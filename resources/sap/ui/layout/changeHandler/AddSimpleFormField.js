/*!
 * OpenUI5
 * (c) Copyright 2009-2021 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/fl/changeHandler/BaseAddViaDelegate"],function(e){"use strict";var r="sap.ui.core.Title";var a="sap.m.Toolbar";var t="sap.m.Label";var n="sap.ui.comp.smartfield.SmartLabel";function o(e,o){var i=o.change;var l=o.modifier;var v=i.getContent();var g=v.newFieldIndex;var d=i.getDependentControl("targetContainerHeader",o);var c=e.indexOf(d);var p=0;var f=0;if(e.length===1||e.length===c+1){p=e.length}else{var u=0;for(u=c+1;u<e.length;u++){var s=l.getControlType(e[u]);if(s===t||s===n){if(f==g){p=u;break}f++}if(s===r||s===a){p=u;break}if(u===e.length-1){p=e.length}}}return p}function i(e,r,a){var t=e.slice();t.splice(r,0,a.label,a.control);return t}function l(e,r,a,t){a.removeAllAggregation(e,"content");for(var n=0;n<r.length;++n){a.insertAggregation(e,"content",r[n],n,t.view)}}var v=e.createAddViaDelegateChangeHandler({addProperty:function(e){var r=e.control;var a=e.innerControls;var t=e.modifier;var n=e.appComponent;var v=e.change;var g=v.getRevertData();g.labelSelector=t.getSelector(a.label,n);var d=t.getAggregation(r,"content");var c=o(d,e);var p=i(d,c,a);l(r,p,t,e);if(a.valueHelp){t.insertAggregation(r,"dependents",a.valueHelp,0,e.view)}},revertAdditionalControls:function(e){var r=e.control;var a=e.change;var t=e.modifier;var n=e.appComponent;var o=a.getRevertData().labelSelector;if(o){var i=t.bySelector(o,n);t.removeAggregation(r,"content",i);t.destroy(i)}},aggregationName:"content",mapParentIdIntoChange:function(e,r,a){var t=a.appComponent;var n=a.view;var o=a.modifier.bySelector(r.parentId,t,n);var i=o.getTitle()||o.getToolbar();if(i){e.addDependentControl(i.getId(),"targetContainerHeader",a)}},parentAlias:"_",fieldSuffix:"",skipCreateLayout:true,supportsDefault:true});return v},true);