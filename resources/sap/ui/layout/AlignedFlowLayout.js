/*!
 * UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2019 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/core/Control","./library","sap/ui/core/ResizeHandler","./AlignedFlowLayoutRenderer","sap/ui/dom/units/Rem"],function(e,t,i,o,n){"use strict";var r=e.extend("sap.ui.layout.AlignedFlowLayout",{metadata:{library:"sap.ui.layout",properties:{minItemWidth:{type:"sap.ui.core.AbsoluteCSSSize",defaultValue:"12rem"},maxItemWidth:{type:"sap.ui.core.AbsoluteCSSSize",defaultValue:"24rem"}},defaultAggregation:"content",aggregations:{content:{type:"sap.ui.core.Control",multiple:true},endContent:{type:"sap.ui.core.Control",multiple:true}}}});r.prototype.init=function(){this._iEndItemWidth=-1;this._sResizeListenerId=i.register(this,this.onResize.bind(this))};r.prototype.exit=function(){if(this._sResizeListenerId){i.deregister(this._sResizeListenerId);this._sResizeListenerId=""}};r.prototype._onRenderingOrThemeChanged=function(){var e=this.getDomRef(),t=this.getDomRef("endItem"),i=this.getContent().length&&e&&t;if(i){var o=window.getComputedStyle(e,null),n=o.getPropertyValue("padding-top"),r=t.style;if(sap.ui.getCore().getConfiguration().getRTL()){r.left=o.getPropertyValue("padding-left")}else{r.right=o.getPropertyValue("padding-right")}r.bottom=n}this.reflow({domRef:e,endItemDomRef:t});if(i){e.lastElementChild.style.width=this._iEndItemWidth+"px"}};r.prototype.onAfterRendering=r.prototype._onRenderingOrThemeChanged;r.prototype.onThemeChanged=r.prototype._onRenderingOrThemeChanged;r.prototype.onResize=function(e,t,i){if(e&&e.size.width===e.oldSize.width){return}this.reflow({domRef:t,endItemDomRef:i})};r.prototype.reflow=function(e){if(this.getContent().length===0){return}e=e||{};var t=e.domRef||this.getDomRef();if(!t||!t.offsetParent){return}var i=this.getRenderer().CSS_CLASS+"OneLine",o=true;var n=e.endItemDomRef||this.getDomRef("endItem"),r=this.getLastItemDomRef();if(n&&r){var s=t.lastElementChild.style;s.height="";s.display="";t.classList.remove(i);var f=n.offsetHeight,a=n.offsetWidth,h=r.offsetLeft,l;if(sap.ui.getCore().getConfiguration().getRTL()){l=h}else{var p=h+r.offsetWidth;l=t.offsetWidth-p}this._iEndItemWidth=a;o=l>=a;if(o){if(this.checkItemsWrapping(t)){if(n.offsetTop<r.offsetTop){s.height=f+"px";s.display="block"}else{s.height="0";s.display=""}}else{if(n.offsetTop<r.offsetTop){s.height=f+"px"}s.display="block"}}else{s.height=f+"px";s.display="block"}}if(!this.checkItemsWrapping(t)&&o){t.classList.add(i)}else{t.classList.remove(i)}};r.prototype.checkItemsWrapping=function(e){e=e||this.getDomRef();if(!e){return false}var t=e.firstElementChild,i=this.getLastItemDomRef();if(!t||!i){return false}var o=t.offsetTop,n=i.offsetTop,r=t.offsetHeight;if(n>=o+r){return true}i=this.getDomRef("endItem");return!!i&&n>=o+r};r.prototype.getLastItemDomRef=function(){var e=this.getContent(),t=e.length;if(t){var i=e[t-1],o=i.getDomRef();if(o){return o.parentElement}}return null};r.prototype.getLastVisibleDomRef=function(){return this.getDomRef("endItem")||this.getLastItemDomRef()};r.prototype.getNumberOfSpacers=function(){var e=this.getContent().length;if(e===0){return 0}var t=e,i=this.getMinItemWidth(),o;if(i.lastIndexOf("rem")!==-1){o=n.toPx(i)}else if(i.lastIndexOf("px")!==-1){o=parseFloat(i)}if(o){var r=Math.max(document.documentElement.clientWidth,window.screen.width);t=Math.abs(r/o)}t=Math.min(t,e-2);t=Math.max(1,t);return Math.floor(t)};return r});