/*!
 * OpenUI5
 * (c) Copyright 2009-2021 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/m/Title","sap/ui/core/Title","sap/ui/fl/Utils"],function(e,t,n){"use strict";function a(e){var t=[];var n;var a;if(e.getMetadata().getName()==="sap.ui.layout.form.FormElement"){n=e.getLabel();if(n){t.push(n)}t=t.concat(e.getFields())}else if(e.getMetadata().getName()==="sap.ui.layout.form.FormContainer"){a=e.getTitle()||e.getToolbar();if(a){t[0]=a}e.getFormElements().forEach(function(e){n=e.getLabel();if(n){t.push(n)}t=t.concat(e.getFields())})}else if(e.getMetadata().getName()==="sap.ui.layout.form.Form"){t.push(e)}return t}function r(e){if(e.getMetadata().getName()==="sap.ui.layout.form.SimpleForm"){return e}else if(e.getParent()){return r(e.getParent())}}function o(e){var t=r(e);return t&&t.getContent().every(function(e){return n.checkControlId(e)})}var i={aggregations:{formContainers:{childNames:{singular:"GROUP_CONTROL_NAME",plural:"GROUP_CONTROL_NAME_PLURAL"},getIndex:function(e,t){var n=e.getFormContainers();if(t){return n.indexOf(t)+1}if(n.length>0&&n[0].getFormElements().length===0&&n[0].getTitle()===null){return 0}return n.length},beforeMove:function(e){if(e){e._bChangedByMe=true}},afterMove:function(e){if(e){e._bChangedByMe=false}},actions:{move:function(e){if(o(e)){return{changeType:"moveSimpleFormGroup"}}},createContainer:{changeType:"addSimpleFormGroup",changeOnRelevantContainer:true,isEnabled:function(e){var t=e.getFormContainers();for(var n=0;n<t.length;n++){if(t[n].getToolbar&&t[n].getToolbar()){return false}}return true},getCreatedContainerId:function(e){var t=sap.ui.getCore().byId(e);var n=t.getParent().getId();return n}}}}},actions:{localReset:{changeType:"localReset",changeOnRelevantContainer:true}},getStableElements:a};var l={name:{singular:"GROUP_CONTROL_NAME",plural:"GROUP_CONTROL_NAME_PLURAL"},aggregations:{formElements:{childNames:{singular:"FIELD_CONTROL_NAME",plural:"FIELD_CONTROL_NAME_PLURAL"},beforeMove:function(e){if(e){e._bChangedByMe=true}},afterMove:function(e){if(e){e._bChangedByMe=false}},actions:{move:function(e){if(o(e)){return{changeType:"moveSimpleFormField"}}},add:{delegate:{changeType:"addSimpleFormField",changeOnRelevantContainer:true,supportsDefaultDelegate:true}}}}},actions:{rename:function(e){return{changeType:"renameTitle",changeOnRelevantContainer:true,isEnabled:!(e.getToolbar()||!e.getTitle()),domRef:function(e){if(e.getTitle&&e.getTitle()){return e.getTitle().getDomRef()}}}},remove:function(n){return{changeType:"removeSimpleFormGroup",changeOnRelevantContainer:true,isEnabled:!!(n.getToolbar()||n.getTitle()),getConfirmationText:function(n){var a=false;if(n.getMetadata().getName()==="sap.ui.layout.form.FormContainer"&&n.getToolbar&&n.getToolbar()){var r=n.getToolbar().getContent();if(r.length>1){a=true}else if(r.length===1&&!r[0].getMetadata().isInstanceOf("sap.ui.core.Label")&&!(r[0]instanceof t)&&!(r[0]instanceof e)){a=true}}if(a){var o=sap.ui.getCore().getLibraryResourceBundle("sap.ui.layout.designtime");return o.getText("MSG_REMOVING_TOOLBAR")}}}}},getStableElements:a};var u={name:{singular:"FIELD_CONTROL_NAME",plural:"FIELD_CONTROL_NAME_PLURAL"},actions:{rename:{changeType:"renameLabel",changeOnRelevantContainer:true,domRef:function(e){return e.getLabel().getDomRef()}},remove:{changeType:"hideSimpleFormField",changeOnRelevantContainer:true,jsOnly:true},reveal:{changeType:"unhideSimpleFormField",changeOnRelevantContainer:true,jsOnly:true}},getStableElements:a};return{palette:{group:"LAYOUT",icons:{svg:"sap/ui/layout/designtime/form/SimpleForm.icon.svg"}},aggregations:{content:{ignore:true},title:{ignore:true},toolbar:{ignore:function(e){return!e.getToolbar()},domRef:function(e){return e.getToolbar().getDomRef()}},form:{ignore:false,propagateMetadata:function(e){var t=e.getMetadata().getName();if(t==="sap.ui.layout.form.Form"){return i}else if(t==="sap.ui.layout.form.FormContainer"){return l}else if(t==="sap.ui.layout.form.FormElement"){return u}else{return{actions:null}}},propagateRelevantContainer:true}}}});