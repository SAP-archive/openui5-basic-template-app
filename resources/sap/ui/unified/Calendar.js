/*!
 * OpenUI5
 * (c) Copyright 2009-2021 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/core/Control","sap/ui/core/LocaleData","sap/ui/unified/calendar/CalendarUtils","sap/ui/unified/DateRange","sap/ui/unified/DateTypeRange","./calendar/Header","./calendar/Month","./calendar/MonthPicker","./calendar/YearPicker","./calendar/YearRangePicker","./calendar/CalendarDate","sap/ui/core/date/UniversalDate","./library","sap/ui/Device","sap/ui/core/format/DateFormat","sap/ui/core/ResizeHandler","sap/ui/core/Locale","sap/ui/events/KeyCodes","./CalendarRenderer","sap/ui/dom/containsOrEquals","sap/base/util/deepEqual","sap/base/Log","sap/ui/thirdparty/jquery"],function(e,t,a,i,s,r,o,n,h,g,l,d,u,c,_,p,f,m,D,y,v,M,P){"use strict";var S=sap.ui.getCore(),C=sap.ui.core.CalendarType;var b=e.extend("sap.ui.unified.Calendar",{metadata:{library:"sap.ui.unified",designtime:"sap/ui/unified/designtime/Calendar.designtime",properties:{intervalSelection:{type:"boolean",group:"Behavior",defaultValue:false},singleSelection:{type:"boolean",group:"Behavior",defaultValue:true},months:{type:"int",group:"Appearance",defaultValue:1},firstDayOfWeek:{type:"int",group:"Appearance",defaultValue:-1},nonWorkingDays:{type:"int[]",group:"Appearance",defaultValue:null},primaryCalendarType:{type:"sap.ui.core.CalendarType",group:"Appearance",defaultValue:null},secondaryCalendarType:{type:"sap.ui.core.CalendarType",group:"Appearance",defaultValue:null},width:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:null},minDate:{type:"object",group:"Misc",defaultValue:null},maxDate:{type:"object",group:"Misc",defaultValue:null},showWeekNumbers:{type:"boolean",group:"Appearance",defaultValue:true}},aggregations:{selectedDates:{type:"sap.ui.unified.DateRange",multiple:true,singularName:"selectedDate"},specialDates:{type:"sap.ui.unified.DateTypeRange",multiple:true,singularName:"specialDate"},disabledDates:{type:"sap.ui.unified.DateRange",multiple:true,singularName:"disabledDate"},header:{type:"sap.ui.core.Control",multiple:false,visibility:"hidden"},secondMonthHeader:{type:"sap.ui.unified.calendar.Header",multiple:false,visibility:"hidden"},month:{type:"sap.ui.unified.calendar.Month",multiple:true,visibility:"hidden"},monthPicker:{type:"sap.ui.unified.calendar.MonthPicker",multiple:false,visibility:"hidden"},yearPicker:{type:"sap.ui.unified.calendar.YearPicker",multiple:false,visibility:"hidden"},yearRangePicker:{type:"sap.ui.unified.calendar.YearPicker",multiple:false,visibility:"hidden"}},associations:{ariaLabelledBy:{type:"sap.ui.core.Control",multiple:true,singularName:"ariaLabelledBy"},legend:{type:"sap.ui.unified.CalendarLegend",multiple:false}},events:{select:{},cancel:{},startDateChange:{},weekNumberSelect:{allowPreventDefault:true,parameters:{weekNumber:{type:"int"},weekDays:{type:"sap.ui.unified.DateRange"}}}}}});b.prototype.init=function(){this._iBreakPointTablet=c.media._predefinedRangeSets[c.media.RANGESETS.SAP_STANDARD_EXTENDED].points[0];this._iBreakPointDesktop=c.media._predefinedRangeSets[c.media.RANGESETS.SAP_STANDARD_EXTENDED].points[1];this._iBreakPointLargeDesktop=c.media._predefinedRangeSets[c.media.RANGESETS.SAP_STANDARD_EXTENDED].points[2];var e=sap.ui.getCore().getConfiguration().getCalendarType();this.setProperty("primaryCalendarType",e);this.setProperty("secondaryCalendarType",e);this._iMode=0;this._iColumns=1;this._oYearFormat=_.getDateInstance({format:"y",calendarType:e});this.data("sap-ui-fastnavgroup","true",true);this._oMinDate=a._minDate(this.getPrimaryCalendarType());this._oMaxDate=a._maxDate(this.getPrimaryCalendarType());this._initializeHeader();this._initializeSecondMonthHeader();var t=this._createMonth(this.getId()+"--Month0");t.attachEvent("focus",this._handleFocus,this);t.attachEvent("select",I,this);t.attachEvent("_renderMonth",B,this);t.attachEvent("_bindMousemove",H,this);t.attachEvent("_unbindMousemove",R,this);t._bNoThemeChange=true;this.addAggregation("month",t);this._initilizeMonthPicker();this._initilizeYearPicker();this._initilizeYearRangePicker();this._resizeProxy=k.bind(this);this._oSelectedMonth;this._bSkipCancelButtonRendering=false;this._bActionTriggeredFromSecondHeader=false};b.prototype.exit=function(){if(this._sInvalidateMonth){clearTimeout(this._sInvalidateMonth)}if(this._afterHeaderRenderAdjustCSS){this.removeDelegate(this._afterHeaderRenderAdjustCSS);this._afterHeaderRenderAdjustCSS=null}if(this._afterSecondHeaderRenderAdjustCSS){this.removeDelegate(this._afterSecondHeaderRenderAdjustCSS);this._afterSecondHeaderRenderAdjustCSS=null}if(this._sResizeListener){p.deregister(this._sResizeListener);this._sResizeListener=undefined}this._oSelectedMonth=null};b.prototype._initializeHeader=function(){var e=new r(this.getId()+"--Head");e.attachEvent("pressPrevious",this._handlePrevious,this);e.attachEvent("pressNext",this._handleNext,this);e.attachEvent("pressButton1",this._handleButton1,this);e.attachEvent("pressButton2",this._handleButton2,this);e.attachEvent("pressButton3",this._handleButton1,this);e.attachEvent("pressButton4",this._handleButton2,this);this._afterHeaderRenderAdjustCSS=this._createOnAfterRenderingDelegate(e);e.addDelegate(this._afterHeaderRenderAdjustCSS);this.setAggregation("header",e)};b.prototype._createOnAfterRenderingDelegate=function(e){return{onAfterRendering:function(){if(e.getVisible()&&!e.getVisibleButton1()){e.$().find(".sapUiCalHeadB2").addClass("sapUiCalSingleYearButton")}if(e.getVisible()&&!e._getVisibleButton3()){this._isTwoMonthsInTwoColumns()&&e.$().find(".sapUiCalHeadB4").addClass("sapUiCalSingleYearButton")}}.bind(this)}};b.prototype._initializeSecondMonthHeader=function(){var e=new r(this.getId()+"--SecondMonthHead",{visible:false});e.addStyleClass("sapUiCalHeadSecondMonth");e.attachEvent("pressPrevious",this._handlePrevious,this);e.attachEvent("pressNext",this._handleNext,this);e.attachEvent("pressButton1",this._handleButton1,this);e.attachEvent("pressButton2",this._handleButton2,this);this._afterSecondHeaderRenderAdjustCSS=this._createOnAfterRenderingDelegate(e);e.addDelegate(this._afterSecondHeaderRenderAdjustCSS);this.setAggregation("secondMonthHeader",e)};b.prototype._initilizeMonthPicker=function(){var e=new n(this.getId()+"--MP");e._bCalendar=true;e.attachEvent("select",this._selectMonth,this);e.attachEvent("pageChange",F,this);e._bNoThemeChange=true;this.setAggregation("monthPicker",e);e._setSelectedDatesControlOrigin(this)};b.prototype._initilizeYearPicker=function(){var e=new h(this.getId()+"--YP");e._bCalendar=true;e.attachEvent("select",this._selectYear,this);e.attachEvent("pageChange",N,this);this.setAggregation("yearPicker",e);e._setSelectedDatesControlOrigin(this)};b.prototype._initilizeYearRangePicker=function(){var e=new g(this.getId()+"--YRP");e.attachEvent("select",this._selectYearRange,this);e.setPrimaryCalendarType(this.getPrimaryCalendarType());this.setAggregation("yearRangePicker",e)};b.prototype._createMonth=function(e){var t=new o(e,{width:"100%"});t._bCalendar=true;t.attachEvent("datehovered",this._handleDateHovered,this);t.attachEvent("weekNumberSelect",this._handleWeekNumberSelect,this);return t};b.prototype._handleWeekNumberSelect=function(e){var t=this.fireWeekNumberSelect({weekNumber:e.getParameter("weekNumber"),weekDays:e.getParameter("weekDays")});if(!t){e.preventDefault()}return this};b.prototype._handleDateHovered=function(e){var t=this.getAggregation("month"),a=e.getParameter("date1"),i=e.getParameter("date2"),s;for(s=0;s<t.length;s++){t[s]._markDatesBetweenStartAndHoveredDate(a,i)}};b.prototype.onBeforeRendering=function(){var e=this.getAggregation("month"),t,a=e[0].getDate(),i=this._getFocusedDate(),s=this.getAggregation("header");if(e.length>1&&a){t=l.fromLocalJSDate(a,this.getPrimaryCalendarType())}else if(e.length>1){t=A.call(this,this._getFocusedDate())}else{t=i}for(var r=0;r<e.length;r++){a=new l(t);if(r>0){a.setMonth(a.getMonth()+r,1)}var o=a;if(i.getYear()===a.getYear()&&i.getMonth()===a.getMonth()){o=i}e[r].displayDate(o.toLocalJSDate());e[r].setShowWeekNumbers(this.getShowWeekNumbers())}if(this._getMonthPicker()){this._setDisabledMonths(i.getYear(),this._getMonthPicker())}this._updateHeader(t);this._iSize=0;if(!this._getSucessorsPickerPopup()){s.setVisibleButton1(true);s.setVisibleButton2(true)}};b.prototype.onAfterRendering=function(e){if(!this._getSucessorsPickerPopup()){Y.call(this)}if(w.call(this)>1||this._bInitMonth){e.size={width:this.getDomRef().offsetWidth};k.call(this,e,true);if(!this._sResizeListener){this._sResizeListener=p.register(this,this._resizeProxy)}this._bInitMonth=undefined}};b.prototype.invalidate=function(t){if(!this._bDateRangeChanged&&(!t||!(t instanceof i))){e.prototype.invalidate.apply(this,arguments)}else if(this.getDomRef()&&this._iMode==0&&!this._sInvalidateMonth){this._sInvalidateMonth=setTimeout(this._invalidateMonth.bind(this,t),0)}};b.prototype.removeSelectedDate=function(e){this._bDateRangeChanged=true;return this.removeAggregation("selectedDates",e)};b.prototype.removeAllSelectedDates=function(){this._bDateRangeChanged=true;var e=this.removeAllAggregation("selectedDates");return e};b.prototype.destroySelectedDates=function(){this._bDateRangeChanged=true;var e=this.destroyAggregation("selectedDates");return e};b.prototype.removeAllSpecialDates=function(){this._bDateRangeChanged=true;var e=this.removeAllAggregation("specialDates");return e};b.prototype.destroySpecialDates=function(){this._bDateRangeChanged=true;var e=this.destroyAggregation("specialDates");return e};b.prototype._setSpecialDatesControlOrigin=function(e){this._oSpecialDatesControlOrigin=e};b.prototype.getSpecialDates=function(){var e=this.getParent();if(this._oSpecialDatesControlOrigin){return this._oSpecialDatesControlOrigin.getSpecialDates()}if(e&&e.getSpecialDates){return e.getSpecialDates()}else{return this.getAggregation("specialDates",[])}};b.prototype.removeAllDisabledDates=function(){this._bDateRangeChanged=true;var e=this.removeAllAggregation("disabledDates");return e};b.prototype.destroyDisabledDates=function(){this._bDateRangeChanged=true;var e=this.destroyAggregation("disabledDates");return e};b.prototype.setLocale=function(e){if(this._sLocale!=e){this._sLocale=e;this._oLocaleData=undefined;this.invalidate();this._toggleTwoMonthsInTwoColumnsCSS()}return this};b.prototype.getLocale=function(){if(!this._sLocale){this._sLocale=sap.ui.getCore().getConfiguration().getFormatSettings().getFormatLocale().toString()}return this._sLocale};b.prototype._getFocusedDate=function(){if(!this._oFocusedDate){T.call(this)}return this._oFocusedDate};b.prototype._setFocusedDate=function(e){a._checkCalendarDate(e);this._oFocusedDate=new l(e,this.getPrimaryCalendarType())};b.prototype.focusDate=function(e){x.call(this,e,false);return this};b.prototype.displayDate=function(e){x.call(this,e,true);return this};b.prototype.getStartDate=function(){var e;if(this.getDomRef()){var t=this.getAggregation("month");e=l.fromLocalJSDate(t[0].getDate(),this.getPrimaryCalendarType())}else{e=new l(this._getFocusedDate())}e.setDate(1);return e.toLocalJSDate()};b.prototype.setPopupMode=function(e){this._bPoupupMode=e;return this};b.prototype.setMonths=function(e){this._bDateRangeChanged=undefined;this.setProperty("months",e,false);e=w.call(this);var t=this.getAggregation("month");var a=0;var i;if(t.length<e){for(a=t.length;a<e;a++){i=this._createMonth(this.getId()+"--Month"+a);i.attachEvent("focus",this._handleFocus,this);i.attachEvent("select",I,this);i.attachEvent("_renderMonth",B,this);i.attachEvent("_bindMousemove",H,this);i.attachEvent("_unbindMousemove",R,this);i._bNoThemeChange=true;this.addAggregation("month",i)}}else if(t.length>e){for(a=t.length;a>e;a--){i=this.removeAggregation("month",a-1);i.destroy()}if(e==1){this._bInitMonth=true}}if(e>1&&t[0].getDate()){t[0].setProperty("date",null,true)}return this};b.prototype.setPrimaryCalendarType=function(e){var t=this.getAggregation("month"),a,i,s,r,o;this.setProperty("primaryCalendarType",e);this._adjustYearRangeDisplay();this._oYearFormat=_.getDateInstance({format:"y",calendarType:e});if(this._oFocusedDate){this._oFocusedDate=new l(this._oFocusedDate,e)}this._oMinDate=new l(this._oMinDate,e);this._oMaxDate=new l(this._oMaxDate,e);for(o=0;o<t.length;o++){a=t[o];a.setPrimaryCalendarType(e)}if(!this._getSucessorsPickerPopup()){i=this._getMonthPicker();i.setPrimaryCalendarType(e);s=this._getYearPicker();s.setPrimaryCalendarType(e);r=this.getAggregation("yearRangePicker");r.setPrimaryCalendarType(e)}return this};b.prototype.setSecondaryCalendarType=function(e){this._bSecondaryCalendarTypeSet=true;this.setProperty("secondaryCalendarType",e);this._oYearFormatSecondary=_.getDateInstance({format:"y",calendarType:e});var t=this.getAggregation("month");for(var a=0;a<t.length;a++){var i=t[a];i.setSecondaryCalendarType(e)}return this};b.prototype._getSecondaryCalendarType=function(){var e;if(this._bSecondaryCalendarTypeSet){e=this.getSecondaryCalendarType();var t=this.getPrimaryCalendarType();if(e==t){e=undefined}}return e};b.prototype._getActiveHeaderAggregation=function(){if(this._bActionTriggeredFromSecondHeader&&this._isTwoMonthsInOneColumn()){return this.getAggregation("secondMonthHeader")}else{return this.getAggregation("header")}};b.prototype._setIsSecondHeaderButtonAction=function(e){if(e.getSource().sParentAggregationName==="secondMonthHeader"||e.sId==="pressButton3"||e.sId==="pressButton4"){this._bActionTriggeredFromSecondHeader=true}else{this._bActionTriggeredFromSecondHeader=false}};b.prototype.setMinDate=function(e){var t=this.getPrimaryCalendarType(),i;if(v(e,this.getMinDate())){return this}if(!e){this._oMinDate=a._minDate(t)}else{a._checkJSDateObject(e);this._oMinDate=l.fromLocalJSDate(e,t);var s=this._oMinDate.getYear();a._checkYearInValidRange(s);if(this._oMaxDate.isBefore(this._oMinDate)){M.warning("minDate > maxDate -> maxDate set to end of the month",this);this._oMaxDate=l.fromLocalJSDate(e,t);this._oMaxDate.setDate(a._daysInMonth(this._oMaxDate));this.setProperty("maxDate",this._oMaxDate.toLocalJSDate(),true)}this._setMinMaxDateExtend(l.fromLocalJSDate(e,t))}this.setProperty("minDate",e,false);if(!this._getSucessorsPickerPopup()){i=this._oMinDate.getYear();this._getYearPicker()._oMinDate.setYear(i);this.getAggregation("yearRangePicker")._oMinDate.setYear(i)}return this};b.prototype.setMaxDate=function(e){var t,i;if(v(e,this.getMaxDate())){return this}if(!e){this._oMaxDate=a._maxDate(t)}else{a._checkJSDateObject(e);this._oMaxDate=l.fromLocalJSDate(e,t);var s=this._oMaxDate.getYear();a._checkYearInValidRange(s);if(this._oMinDate.isAfter(this._oMaxDate)){M.warning("maxDate < minDate -> minDate set to begin of the month",this);this._oMinDate=l.fromLocalJSDate(e,t);this._oMinDate.setDate(1);this.setProperty("minDate",this._oMinDate.toLocalJSDate(),true)}this._setMinMaxDateExtend(l.fromLocalJSDate(e,t))}this.setProperty("maxDate",e,false);if(!this._getSucessorsPickerPopup()){i=this._oMaxDate.getYear();this._getYearPicker()._oMaxDate.setYear(i);this.getAggregation("yearRangePicker")._oMaxDate.setYear(i)}return this};b.prototype._setMinMaxDateExtend=function(e){if(this._oFocusedDate){if(a._isOutside(this._oFocusedDate,this._oMinDate,this._oMaxDate)){M.warning("focused date is not between [minDate - maxDate] -> refocus to the new max/min date: "+e.toString(),this);this.focusDate(e.toLocalJSDate())}}};b.prototype._getLocaleData=function(){if(!this._oLocaleData){var e=this.getLocale();var a=new f(e);this._oLocaleData=t.getInstance(a)}return this._oLocaleData};b.prototype._getShowMonthHeader=function(){var e=w.call(this);if(e>2){return true}else{return false}};b.prototype._getMonthPicker=function(){return this.getAggregation("monthPicker")};b.prototype._getYearPicker=function(){return this.getAggregation("yearPicker")};b.prototype._getYearRangePicker=function(){return this.getAggregation("yearRangePicker")};b.prototype.onclick=function(e){var t=e.target;if(e.isMarked("delayedMouseEvent")){return}if(t.id==this.getId()+"-cancel"){this.onsapescape(e)}};b.prototype.onmousedown=function(e){if(e.cancelable){e.preventDefault()}e.setMark("cancelAutoClose")};b.prototype.onsapescape=function(e){this.fireCancel();this._closedPickers();if(!this._getSucessorsPickerPopup()){this._updateHeadersButtons();this._setHeaderText(this._getFocusedDate())}};b.prototype.onsapshow=function(e){var t=e.which||e.keyCode;if(this._bPoupupMode&&t!==m.F4){this._closedPickers();this.fireCancel();e.preventDefault()}};b.prototype.onkeydown=function(e){var t=e.which||e.keyCode,a=e.shiftKey;if(t!==m.F4){return}e.preventDefault();switch(this._iMode){case 0:if(a){this._showYearPicker()}else{this._showMonthPicker()}break;case 1:if(a){this._showYearPicker()}break;case 2:if(a){this._showYearRangePicker()}break;default:}};b.prototype.onsaphide=b.prototype.onsapshow;b.prototype.onsaptabnext=function(e){var t=this.getAggregation("header");if(y(this.getDomRef("content"),e.target)){if(t.getVisibleButton1()){t.getDomRef("B1").focus();e.preventDefault()}else if(t.getVisibleButton2()){t.getDomRef("B2").focus();e.preventDefault()}else if(!this._bPoupupMode){this._clearTabindex0()}else{this._clearTabindex0();e.preventDefault()}}else if(e.target.id===t.getId()+"-B1"){t.getVisibleButton2()&&t.getDomRef("B2").focus();e.preventDefault()}else if(e.target.id===t.getId()+"-B2"){if(this._bPoupupMode){this._moveFocusToCalContent();e.preventDefault()}else{this._clearTabindex0()}}};b.prototype.onsaptabprevious=function(e){var t=this.getAggregation("header");if(y(this.getDomRef("content"),e.target)){if(this._bPoupupMode){if(t.getVisibleButton2()){t.getDomRef("B2").focus()}else{t.getVisibleButton1()&&t.getDomRef("B1").focus()}e.preventDefault()}else{this._clearTabindex0()}}else if(e.target.id===t.getId()+"-B1"){this._moveFocusToCalContent();e.preventDefault()}else if(e.target.id===t.getId()+"-B2"){if(t.getVisibleButton1()){t.getDomRef("B1").focus()}else{this._moveFocusToCalContent()}e.preventDefault()}};b.prototype._clearTabindex0=function(){var e=this.getAggregation("month"),t=this._getMonthPicker(),a=this.getAggregation("yearPicker"),i=this.getAggregation("yearRangePicker"),s,r;for(r=0;r<e.length;r++){s=e[r];P(s._oItemNavigation.getItemDomRefs()[s._oItemNavigation.getFocusedIndex()]).attr("tabindex","-1")}if(!this._getSucessorsPickerPopup()){if(t.getDomRef()){P(t._oItemNavigation.getItemDomRefs()[t._oItemNavigation.getFocusedIndex()]).attr("tabindex","-1")}if(a.getDomRef()){P(a._oItemNavigation.getItemDomRefs()[a._oItemNavigation.getFocusedIndex()]).attr("tabindex","-1")}if(i.getDomRef()){P(i._oItemNavigation.getItemDomRefs()[i._oItemNavigation.getFocusedIndex()]).attr("tabindex","-1")}}};b.prototype._moveFocusToCalContent=function(){var e=this.getAggregation("yearPicker"),t=this._getMonthPicker(),a=this.getAggregation("month"),i,s,r,o;switch(this._iMode){case 0:r=this._getFocusedDate();for(o=0;o<a.length;o++){i=a[o];s=l.fromLocalJSDate(i.getDate(),this.getPrimaryCalendarType());if(r.isSame(s)){i._oItemNavigation.focusItem(i._oItemNavigation.getFocusedIndex())}else{P(i._oItemNavigation.getItemDomRefs()[i._oItemNavigation.getFocusedIndex()]).attr("tabindex","0")}}break;case 1:if(!this._getSucessorsPickerPopup()){t._oItemNavigation.focusItem(t._oItemNavigation.getFocusedIndex())}break;case 2:if(!this._getSucessorsPickerPopup()){e._oItemNavigation.focusItem(e._oItemNavigation.getFocusedIndex())}break}};b.prototype.onfocusin=function(e){if(e.target.id==this.getId()+"-end"){this._focusOnShiftTab();if(!this._bPoupupMode){this._clearTabindex0()}}this.$("end").attr("tabindex","-1")};b.prototype._focusOnShiftTab=function(){var e=this.getAggregation("header"),t=e.getDomRef("B2");if(t){t.focus()}else{this.focus()}};b.prototype.onsapfocusleave=function(e){var t,a,i,s;if(!e.relatedControlId||!y(this.getDomRef(),sap.ui.getCore().byId(e.relatedControlId).getFocusDomRef())){this.$("end").attr("tabindex","0");if(!this._bPoupupMode){t=this.getAggregation("month");switch(this._iMode){case 0:for(var r=0;r<t.length;r++){a=t[r];P(a._oItemNavigation.getItemDomRefs()[a._oItemNavigation.getFocusedIndex()]).attr("tabindex","0")}break;case 1:if(!this._getSucessorsPickerPopup()){i=this._getMonthPicker();P(i._oItemNavigation.getItemDomRefs()[i._oItemNavigation.getFocusedIndex()]).attr("tabindex","0")}break;case 2:if(!this._getSucessorsPickerPopup()){s=this._getYearPicker();P(s._oItemNavigation.getItemDomRefs()[s._oItemNavigation.getFocusedIndex()]).attr("tabindex","0")}break}}}};b.prototype.getFocusDomRef=function(){var e=this._oSelectedMonth?this._oSelectedMonth:this.getAggregation("month")[0],t=this._getMonthPicker(),a=this._getYearPicker(),i=this._getYearRangePicker();switch(this._iMode){case 0:return e.getFocusDomRef();case 1:return t.getFocusDomRef();case 2:return a.getFocusDomRef();case 3:return i.getFocusDomRef();default:return}};b.prototype.onThemeChanged=function(){var e;if(!this.getDomRef()){return}this._bNamesLengthChecked=undefined;if(!this._getSucessorsPickerPopup()){e=this._getMonthPicker();this._showMonthPicker(true);e._bNoThemeChange=false;e.onThemeChanged(arguments);e._bNoThemeChange=true;this._bLongMonth=e._bLongMonth;this._hideMonthPicker(true)}var t=this.getAggregation("month");for(var a=0;a<t.length;a++){var i=t[a];i._bNoThemeChange=false;i.onThemeChanged(arguments);i._bNoThemeChange=true}var s;if(t.length>1){s=l.fromLocalJSDate(t[0].getDate(),this.getPrimaryCalendarType())}else{s=this._getFocusedDate()}this._setHeaderText(s);this._updateHeadersButtons();this._setPrimaryHeaderMonthButtonText();this._toggleTwoMonthsInTwoColumnsCSS();if(!this._getSucessorsPickerPopup()){Y.call(this)}};b.prototype._updateHeader=function(e){this._setHeaderText(e);switch(this._iMode){case 0:this._togglePrevNext(e,true);break;case 1:this._togglePrevNext(e,false);break;case 2:case 3:this._togglePrevNexYearPicker();break}};b.prototype._togglePrevNext=function(e,t){var i=this._oMaxDate.getYear();var s=this._oMinDate.getYear();var r=this._oMaxDate.getMonth();var o=this._oMinDate.getMonth();var n=this.getAggregation("header");var h=w.call(this);var g=new l(e,this.getPrimaryCalendarType());if(this._iMode==0&&h>1){g=A.call(this,e);g.setMonth(g.getMonth()+h-1);g.setDate(a._daysInMonth(g))}else{g.setDate(a._daysInMonth(g))}var d=g.getYear();var u=g.getMonth();if(d>i||d==i&&(!t||u>=r)||this._iMode==1&&this._getSucessorsPickerPopup()){n.setEnabledNext(false)}else{n.setEnabledNext(true)}if(this._iMode==0&&h>1){g.setMonth(g.getMonth()-h+1,1)}else{g.setDate(1)}d=g.getYear();u=g.getMonth();if(d<s||d==s&&(!t||u<=o)||this._iMode==1&&this._getSucessorsPickerPopup()){n.setEnabledPrevious(false)}else{n.setEnabledPrevious(true)}};b.prototype._togglePrevNexYearPicker=function(){var e=this.getAggregation("yearRangePicker"),t=this._getYearPicker(),a=this.getPrimaryCalendarType(),i=new l(this._oMinDate,a),s=new l(this._oMaxDate,a),r=this.getAggregation("header"),o=1,n,h;if(e.getDomRef()&&e.getDomRef().style.display===""){h=e.getYears();n=l.fromLocalJSDate(e.getFirstRenderedDate());o=e.getRangeSize()}else{h=t.getYears();n=l.fromLocalJSDate(t.getFirstRenderedDate())}n.setYear(n.getYear()+Math.floor(h/2)*o);s.setYear(s.getYear()-Math.ceil(h/2)*o);s.setMonth(11,31);i.setYear(i.getYear()+Math.floor(h/2)*o+1);i.setMonth(0,1);r.setEnabledNext(n.isSameOrBefore(s));r.setEnabledPrevious(n.isSameOrAfter(i))};b.prototype._handlePrevious=function(e){var t=this._getFocusedDate(),a=w.call(this),i,s,r=false;switch(this._iMode){case 0:if(a>1){i=l.fromLocalJSDate(this.getAggregation("month")[0].getDate(),this.getPrimaryCalendarType());i.setDate(1);this._setFocusedDate(i);t=this._getFocusedDate()}else{t.setDate(1)}t.setDate(t.getDate()-1);this._renderMonth(r,true);break;case 1:t.setYear(t.getYear()-1);this._updateHeadersYearPrimaryText(this._oYearFormat.format(t.toUTCJSDate(),true));var o=this._getSecondaryCalendarType();if(o){s=new l(t,o);s.setMonth(0,1);this._updateHeadersYearAdditionalText(this._oYearFormatSecondary.format(s.toUTCJSDate(),true))}else{this._updateHeadersYearAdditionalText()}this._togglePrevNext(t);this._setDisabledMonths(t.getYear());this._getMonthPicker()._setYear(t.getYear());this._renderPicker(this._getMonthPicker());break;case 2:this._getYearPicker().previousPage();this._togglePrevNexYearPicker();this._updateHeadersYearPrimaryText(this._getYearString());break;case 3:this.getAggregation("yearRangePicker").previousPage();this._togglePrevNexYearPicker();this._updateHeadersYearPrimaryText(this._getYearString());break}};b.prototype._handleNext=function(e){var t=this._getFocusedDate(),a=w.call(this),i,s;switch(this._iMode){case 0:if(a>1){i=l.fromLocalJSDate(this.getAggregation("month")[0].getDate(),this.getPrimaryCalendarType());i.setMonth(i.getMonth(),1);this._setFocusedDate(i);t=this._getFocusedDate()}t.setMonth(t.getMonth()+1,1);this._renderMonth(false,false,false,true);break;case 1:t.setYear(t.getYear()+1);this._updateHeadersYearPrimaryText(this._oYearFormat.format(t.toUTCJSDate(),true));var r=this._getSecondaryCalendarType();if(r){s=new l(t,r);s.setMonth(0,1);this._updateHeadersYearAdditionalText(this._oYearFormatSecondary.format(s.toUTCJSDate(),true))}else{this._updateHeadersYearAdditionalText()}this._togglePrevNext(t);this._setDisabledMonths(t.getYear());this._getMonthPicker()._setYear(t.getYear());this._renderPicker(this._getMonthPicker());break;case 2:this._getYearPicker().nextPage();this._togglePrevNexYearPicker();this._updateHeadersYearPrimaryText(this._getYearString());break;case 3:this.getAggregation("yearRangePicker").nextPage();this._togglePrevNexYearPicker();this._updateHeadersYearPrimaryText(this._getYearString());break}};b.prototype._getYearString=function(){var e=this._getYearPicker(),t=e.getDomRef(),a=this._getFocusedDate(),i,s;if(e&&t&&t.style.display===""){i=Math.floor(e.getYears()/2);s=e._oItemNavigation.getItemDomRefs()[i].getAttribute("data-sap-year-start");a=l.fromLocalJSDate(e._oFormatYyyymmdd.parse(s),this.getPrimaryCalendarType());a.setDate(1)}return this._oYearFormat.format(d.getInstance(a.toUTCJSDate(),a.getCalendarType()),true)};b.prototype._getDisplayedMonths=function(e){var t=[];var a=e.getMonth();var i=w.call(this);if(i>1){for(var s=0;s<i;s++){t.push((a+s)%12)}}else{t.push(a)}return t};b.prototype._getDisplayedSecondaryMonths=function(e,t){var i=this.getAggregation("month");var s=l.fromLocalJSDate(i[0].getDate(),e);s.setDate(1);s=new l(s,t);var r=s.getMonth();var o=l.fromLocalJSDate(i[i.length-1].getDate(),e);o.setDate(a._daysInMonth(o));o=new l(o,t);var n=o.getMonth();return{start:r,end:n}};b.prototype._closedPickers=function(){switch(this._iMode){case 0:break;case 1:this._hideMonthPicker();break;case 2:this._hideYearPicker();break;case 3:this._hideYearRangePicker();break}};b.prototype._setDisabledMonths=function(e,t){var a=0;var i=11;if(e===this._oMinDate.getYear()){a=this._oMinDate.getMonth()}if(e===this._oMaxDate.getYear()){i=this._oMaxDate.getMonth()}if(!t){t=this._getMonthPicker()}t.setMinMax(a,i)};b.prototype._handleFocus=function(e){var t=l.fromLocalJSDate(e.getParameter("date"),this.getPrimaryCalendarType());var a=e.getParameter("otherMonth");var i=e.getParameter("restoreOldDate");if(i){if(!v(this._getFocusedDate(),t)){this._renderMonth(false,false,true)}}else{this._focusDate(t,a)}};b.prototype._getVisibleDays=function(){var e=this.getAggregation("month")[0];return e._getVisibleDays(e._getDate(),false)};b.prototype._renderMonth=function(e,t,i,s){var r=this._getFocusedDate(),o=this.getAggregation("month"),n=false,h,g,d,u=0,c;for(u=0;u<o.length;u++){c=s?0:u;h=o[u];if(h.checkDateFocusable(r.toLocalJSDate())&&o[c].getDate()&&r.getMonth()===o[c].getDate().getMonth()){n=true}if(n||o.length==1){if(!e){h.setDate(r.toLocalJSDate())}else{h.displayDate(r.toLocalJSDate())}break}}if(!n){d=new l(r,this.getPrimaryCalendarType());if(o.length>1){d=A.call(this,d);for(u=0;u<o.length;u++){h=o[u];g=new l(d,this.getPrimaryCalendarType());g.setMonth(d.getMonth()+u);if(!e&&a._isSameMonthAndYear(g,r)){h.setDate(r.toLocalJSDate())}else{h.displayDate(g.toLocalJSDate())}}}this._updateHeader(d);this._updateHeadersButtons();this._setPrimaryHeaderMonthButtonText();this._toggleTwoMonthsInTwoColumnsCSS();if(!i){this.fireStartDateChange()}}};b.prototype._showMonthPicker=function(e){var t=this._getFocusedDate(),a=this._getMonthPicker(),i=new l(this._getFocusedDate());this._iMode===2&&this._hideYearPicker(true);this._updateMonthButtonVisibility();this._renderPicker(a);if(this._bActionTriggeredFromSecondHeader){i.setDate(1);i.setMonth(i.getMonth()+1);a._setYear(i.getYear())}else{a._setYear(t.getYear())}this._showOverlay();if(!e&&this._bActionTriggeredFromSecondHeader){a.setMonth(i.getMonth());this._setDisabledMonths(i.getYear(),a)}else if(!e){a.setMonth(t.getMonth());this._setDisabledMonths(t.getYear(),a)}this._iMode=1;this._togglePrevNext(t,false);this._setHeaderText(this._getFocusedDate())};b.prototype._renderPicker=function(e){var t=sap.ui.getCore().createRenderManager(),a=this.$("content");if(a[0]){t.renderControl(e);t.flush(a[0],false,true);t.destroy()}};b.prototype._hideMonthPicker=function(e){var t=this._getMonthPicker();this._iMode=0;t.$().css("display","none");this._hideOverlay();if(!e){this._renderMonth();if(w.call(this)>1){var a=this.getAggregation("month");for(var i=0;i<a.length;i++){var s=a[i];P(s._oItemNavigation.getItemDomRefs()[s._oItemNavigation.getFocusedIndex()]).attr("tabindex","0")}}}this._updateHeadersButtons();this._togglePrevNext(this._getFocusedDate(),true);this._bActionTriggeredFromSecondHeader=false};b.prototype._showYearPicker=function(){var e=this._getFocusedDate(),t=this._getYearPicker(),a,i;this._iMode===1&&this._hideMonthPicker(true);t.getDomRef()?t.$().css("display",""):this._renderPicker(t);this._showOverlay();t.setDate(e.toLocalJSDate());if(w.call(this)==1){a=this.getAggregation("month")[0];i=a.$("days").find(".sapUiCalItem");if(i.length==28){t.$().addClass("sapUiCalYearNoTop")}else{t.$().removeClass("sapUiCalYearNoTop")}}this._togglePrevNexYearPicker();this._iMode=2;if(this._isTwoMonthsInOneColumn()){this._updateActiveHeaderYearButtonVisibility()}else{this._updateHeadersButtons()}if(this._bActionTriggeredFromSecondHeader&&this.getAggregation("month")[1].getDate().getFullYear()>this._getFocusedDate().getYear()){var s=e.toLocalJSDate();s.setFullYear(s.getFullYear()+1);t.setDate(s);this._updateHeadersYearPrimaryText(this._getYearString())}else{t.setDate(e.toLocalJSDate());this._updateHeadersYearPrimaryText(this._getYearString())}};b.prototype._hideYearPicker=function(e){this._iMode=0;var t=this._getYearPicker();t.$().css("display","none");this._hideOverlay();if(!e){this._renderMonth();if(w.call(this)>1){var a=this.getAggregation("month");for(var i=0;i<a.length;i++){var s=a[i];P(s._oItemNavigation.getItemDomRefs()[s._oItemNavigation.getFocusedIndex()]).attr("tabindex","0")}}}this._updateActiveHeaderYearButtonVisibility();this._togglePrevNext(this._getFocusedDate(),true);this._bActionTriggeredFromSecondHeader=false};b.prototype._focusDate=function(e,t,a){var i;var s=false;var r=false;if(e.isBefore(this._oMinDate)){i=this._oMinDate;s=true}else if(e.isAfter(this._oMaxDate)){i=this._oMaxDate;s=true}else{i=e}if(this._focusDateExtend){r=this._focusDateExtend(e,t,a)}var o=i.isBefore(this._getFocusedDate());this._setFocusedDate(i);if(s||t){this._renderMonth(false,o,a)}if(r){this.fireStartDateChange()}};b.prototype._invalidateMonth=function(e){this._sInvalidateMonth=undefined;var t=this.getAggregation("month");if(t){for(var a=0;a<t.length;a++){var i=t[a];i._bDateRangeChanged=true;i._bInvalidateSync=true;i._bNoFocus=true;i.invalidate(e);i._bInvalidateSync=undefined}}this._bDateRangeChanged=undefined};b.prototype._setHeaderText=function(e){var t=this.getAggregation("header");var a=this.getAggregation("secondMonthHeader");var i=this._getLocaleData();var s=[];var r=[];var o=[];var n=[];var h;var g=false;var d;var u;var c;var _;var p;var f=this.getPrimaryCalendarType();var m=this._getSecondaryCalendarType();var D="";if(this._bLongMonth||!this._bNamesLengthChecked){s=i.getMonthsStandAlone("wide",f)}else{g=true;s=i.getMonthsStandAlone("abbreviated",f);r=i.getMonthsStandAlone("wide",f)}if(m){o=i.getMonthsStandAlone("abbreviated",m);n=i.getMonthsStandAlone("wide",m);var y=this._getDisplayedSecondaryMonths(f,m);if(y.start==y.end){c=o[y.start];D=n[y.start]}else{p=i.getIntervalPattern();c=p.replace(/\{0\}/,o[y.start]).replace(/\{1\}/,o[y.end]);D=p.replace(/\{0\}/,n[y.start]).replace(/\{1\}/,n[y.end])}}t.setAdditionalTextButton1(c);t._setAdditionalTextButton3(c);a.setAdditionalTextButton1(c);var v=this._getDisplayedMonths(e);this._sFirstMonthName=d=s[v[0]];u=s[v[v.length-1]];if(v.length>1&&!this._bShowOneMonth){if(!p){p=i.getIntervalPattern()}c=p.replace(/\{0\}/,d).replace(/\{1\}/,u);h=r.length?p.replace(/\{0\}/,r[v[0]]).replace(/\{1\}/,r[v[v.length-1]]):c;if(this._isTwoMonthsInTwoColumns()||this._isTwoMonthsInOneColumn()){c=d}}else{c=d;h=r[v[0]]||c}if(!this._getSucessorsPickerPopup()&&D){h+=", "+D}t.setTextButton1(c);t.setAriaLabelButton1(h);t._setTextButton3(u);t._setAriaLabelButton3(u);a.setTextButton1(u);a.setAriaLabelButton1(u);var M=new l(e,f);M.setDate(1);_=this._oYearFormat.format(M.toUTCJSDate(),true);if(M.getMonth()===11){this._updateHeadersYearPrimaryText(_,(parseInt(_)+1).toString())}else{this._updateHeadersYearPrimaryText(_,_)}if(m){M=new l(M,m);this._updateHeadersYearAdditionalText(this._oYearFormatSecondary.format(M.toUTCJSDate(),true))}else{this._updateHeadersYearAdditionalText()}return{sMonth:c,sYear:_,sAriaLabel:h,bShort:g}};b.prototype._handleButton1=function(e){if(this._iMode!=1){this._setIsSecondHeaderButtonAction(e);this._showMonthPicker()}else{this._hideMonthPicker()}};b.prototype._handleButton2=function(e){if(this._iMode<=1){this._setIsSecondHeaderButtonAction(e);this._showYearPicker()}else{this._hideYearPicker();this._showYearRangePicker()}};b.prototype._selectMonth=function(){var e=new l(this._getFocusedDate(),this.getPrimaryCalendarType()),t=this._getMonthPicker(),i=t._focusedMonth||t._focusedMonth===0?t._focusedMonth:t.getMonth(),s;if(!!t._iYear){s=new l(t._iYear,i-1,1)}else{s=new l(this._getFocusedDate()._oUDate.getFullYear(),i-1,1)}if(this._bActionTriggeredFromSecondHeader&&s.getYear()>=a._minDate().getYear()){e.setYear(s.getYear());e.setMonth(s.getMonth());i=e.getMonth()}else if(e.getYear()===a._maxDate().getYear()&&i===11){i-=1;e.setMonth(i)}else{e.setMonth(i)}if(i!=e.getMonth()){e.setDate(0)}this._focusDate(e,true);this._hideMonthPicker()};b.prototype._getSucessorsPickerPopup=function(){return this.getPickerPopup&&this.getPickerPopup()};b.prototype._selectYear=function(){var e=new l(this._getFocusedDate(),this.getPrimaryCalendarType()),t=e.getMonth(),a=this._getYearPicker(),i=l.fromLocalJSDate(a.getDate(),this.getPrimaryCalendarType());if(!this._bActionTriggeredFromSecondHeader){i.setMonth(t,e.getDate())}else{i.setYear(t===11?i.getYear()-1:i.getYear());i.setMonth(t,e.getDate())}e=i;this._focusDate(e,true);this._hideYearPicker();this._updateHeadersButtons();this._setHeaderText(this._getFocusedDate())};b.prototype._selectYearRange=function(){var e=this.getAggregation("yearRangePicker"),t=this.getAggregation("header"),a=e.getRangeSize(),i=this.getPrimaryCalendarType(),s=l.fromLocalJSDate(e.getDate(),i),r=new l(s.getYear()+a-1,0,1,i),o=this._getFocusedDate(),n,h;s.setMonth(0,1);o.setYear(s.getYear()+Math.floor(a/2));this._setFocusedDate(o);this._hideYearRangePicker();this._showYearPicker();n=this._oYearFormat.format(d.getInstance(s.toUTCJSDate(),s.getCalendarType()),true);h=this._oYearFormat.format(d.getInstance(r.toUTCJSDate(),r.getCalendarType()),true);t.setTextButton2(n+" - "+h);t._setTextButton4(n+" - "+h)};b.prototype._showYearRangePicker=function(){var e=this.getAggregation("yearRangePicker"),t=this._getYearPicker(),a=l.fromLocalJSDate(t.getFirstRenderedDate(),this.getPrimaryCalendarType());e.getDomRef()?e.$().css("display",""):this._renderPicker(e);this._showOverlay();e.setDate(a.toLocalJSDate());this._togglePrevNexYearPicker();this._iMode=3;this._updateHeadersButtons()};b.prototype._hideYearRangePicker=function(){this._iMode=0;this.getAggregation("yearRangePicker").$().css("display","none");this._hideOverlay();this._bActionTriggeredFromSecondHeader=false};b.prototype._showOverlay=function(){this.$("contentOver").css("display","")};b.prototype._hideOverlay=function(){this.$("contentOver").css("display","none")};b.prototype._setColumns=function(e){this._iColumns=e;return this};b.prototype._getColumns=function(){return this._iColumns};b.prototype._updateMonthButtonVisibility=function(){var e=this._getActiveHeaderAggregation();if(this._bActionTriggeredFromSecondHeader){this._isTwoMonthsInOneColumn()?e.setVisibleButton1(!e.getVisibleButton1()):e._setVisibleButton3(!e._getVisibleButton3())}else{e.setVisibleButton1(false)}return this};b.prototype._updateActiveHeaderYearButtonVisibility=function(){var e=this._getActiveHeaderAggregation();if(this._bActionTriggeredFromSecondHeader){this._isTwoMonthsInOneColumn()?e.setVisibleButton1(!e.getVisibleButton1()):e._setVisibleButton3(!e._getVisibleButton3())}else{e.setVisibleButton1(!e.getVisibleButton1())}return this};b.prototype._updateHeadersButtonsHelper=function(e,t,a,i){var s=this.getAggregation("header"),r=this.getAggregation("secondMonthHeader");s.setVisibleButton1(e);s.setVisibleButton2(t);s._setVisibleButton3(a);s._setVisibleButton4(i);if(r.getVisible()){r.setVisibleButton1(e);r.setVisibleButton2(t);r._setVisibleButton3(a);r._setVisibleButton4(i)}};b.prototype._updateHeadersButtons=function(){var e=this.getAggregation("secondMonthHeader");if(this._isTwoMonthsInOneColumn()){e.setVisible(true);if(this._iMode===2){this._updateHeadersButtonsHelper(false,true,false,false)}else if(this._iMode===3){this._updateHeadersButtonsHelper(false,false,false,false)}else{this._updateHeadersButtonsHelper(true,true,false,false)}}else if(this._isTwoMonthsInTwoColumns()){e.setVisible(false);if(this._iMode===2){this._bActionTriggeredFromSecondHeader?this._updateHeadersButtonsHelper(true,true,false,true):this._updateHeadersButtonsHelper(false,true,true,true)}else if(this._iMode===3){this._updateHeadersButtonsHelper(false,false,false,false)}else if(this._iMode===1){this._bActionTriggeredFromSecondHeader?this._updateHeadersButtonsHelper(true,true,false,true):this._updateHeadersButtonsHelper(false,true,true,true)}else{this._updateHeadersButtonsHelper(true,true,true,true)}}else{e.setVisible(false);if(this._iMode===2){this._updateHeadersButtonsHelper(false,true,false,false)}else if(this._iMode===3){this._updateHeadersButtonsHelper(false,false,false,false)}else{this._updateHeadersButtonsHelper(true,true,false,false)}}if(this._getSucessorsPickerPopup()){this.getAggregation("header").setVisibleButton2(false)}};b.prototype._setPrimaryHeaderMonthButtonText=function(){var e=this.getAggregation("header");if(this._isTwoMonthsInOneColumn()||this._isTwoMonthsInTwoColumns()){e.setTextButton1(this._sFirstMonthName)}};b.prototype._toggleTwoMonthsInTwoColumnsCSS=function(){if(this._isTwoMonthsInTwoColumns()){if(S.getConfiguration().getLocale().getLanguage().toLowerCase()==="ja"||S.getConfiguration().getLocale().getLanguage().toLowerCase()==="zh"){this.addStyleClass("sapUiCalTwoMonthsTwoColumnsJaZh");this.removeStyleClass("sapUiCalTwoMonthsTwoColumns")}else{this.addStyleClass("sapUiCalTwoMonthsTwoColumns");this.removeStyleClass("sapUiCalTwoMonthsTwoColumnsJaZh")}}else{this.removeStyleClass("sapUiCalTwoMonthsTwoColumnsJaZh");this.removeStyleClass("sapUiCalTwoMonthsTwoColumns")}};b.prototype._isTwoMonthsInOneColumn=function(){var e=w.call(this);return this._getColumns()===1&&e===2};b.prototype._isTwoMonthsInTwoColumns=function(){var e=w.call(this);return this._getColumns()===2&&e===2};b.prototype._updateHeadersYearPrimaryText=function(e,t){var a=this._getYearPicker(),i=this.getAggregation("header"),s=this.getAggregation("secondMonthHeader"),r=e,o=e,n=t||e,h=this.getPrimaryCalendarType();if(this._iMode===2&&a&&a.getDomRef()){var g=a._oItemNavigation.getItemDomRefs(),u=g[0].getAttribute("data-sap-year-start"),c=g[g.length-1].getAttribute("data-sap-year-start"),_=l.fromLocalJSDate(a._oFormatYyyymmdd.parse(u),h),p=l.fromLocalJSDate(a._oFormatYyyymmdd.parse(c),h),f,m;_.setDate(1);p.setDate(1);f=this._oYearFormat.format(d.getInstance(_.toUTCJSDate(),_.getCalendarType()),true);m=this._oYearFormat.format(d.getInstance(p.toUTCJSDate(),p.getCalendarType()),true);if(this._bActionTriggeredFromSecondHeader){n=f+" - "+m}else{o=f+" - "+m}}i._setTextButton4(n);i._setAriaLabelButton4(n);s.setTextButton2(n);s.setAriaLabelButton2(n);i.setTextButton2(o);i.setAriaLabelButton2(r)};b.prototype._updateHeadersYearAdditionalText=function(e){var t=this.getAggregation("header"),a=this.getAggregation("secondMonthHeader"),i=t.getAriaLabelButton2();if(e){i+=", "+e;t.setAriaLabelButton2(i)}t.setAdditionalTextButton2(e);t._setAdditionalTextButton4(e);a.setAdditionalTextButton2(e)};b.prototype._adjustYearRangeDisplay=function(){var e=this.getAggregation("yearRangePicker");if(!this._getSucessorsPickerPopup()){switch(this.getPrimaryCalendarType()){case C.Japanese:e.setColumns(1);e.setYears(4);break;case C.Gregorian:e.setColumns(3);e.setYears(9);break;default:e.setColumns(2);e.setYears(8)}}};b.prototype._getSpecialDates=function(){var e=this.getParent();if(this._oSpecialDatesControlOrigin){return this._oSpecialDatesControlOrigin._getSpecialDates()}if(e&&e._getSpecialDates){return e._getSpecialDates()}else{var t=this.getSpecialDates();for(var a=0;a<t.length;a++){var i=t[a].getSecondaryType()===u.CalendarDayType.NonWorking&&t[a].getType()!==u.CalendarDayType.NonWorking;if(i){var r=new s;r.setType(t[a].getSecondaryType());r.setStartDate(t[a].getStartDate());if(t[a].getEndDate()){r.setEndDate(t[a].getEndDate())}t.push(r)}}return t}};function T(){var e=this.getSelectedDates();var t=this.getPrimaryCalendarType();if(e&&e[0]&&e[0].getStartDate()){this._oFocusedDate=l.fromLocalJSDate(e[0].getStartDate(),t)}else{this._oFocusedDate=l.fromLocalJSDate(new Date,t)}if(this._oFocusedDate.isBefore(this._oMinDate)){this._oFocusedDate=new l(this._oMinDate,t)}else if(this._oFocusedDate.isAfter(this._oMaxDate)){this._oFocusedDate=new l(this._oMaxDate,t)}}function k(e){var t=e.size.width;if(t<=0){return}var a=this._iSize;if(t<this._iBreakPointTablet){this._iSize=0}else if(t<this._iBreakPointDesktop){this._iSize=1}else if(t<this._iBreakPointLargeDesktop){this._iSize=2}else{this._iSize=3}var i=w.call(this);if(a!=this._iSize||this._bInitMonth){switch(this._iSize){case 1:this._setColumns(2);break;case 2:this._setColumns(3);break;case 3:this._setColumns(4);break;default:this._setColumns(1);break}if(i<this._getColumns()){this._setColumns(i)}if(this._getColumns()>2&&i>this._getColumns()){var s=this._getColumns();var r=0;var o=this._getColumns();while(s>=2){var n=i%s;if(n==0){o=s;break}else{var h=n/s;if(h>r){r=h;o=s}}s--}this._setColumns(o)}var g;var l=this.getAggregation("month");if(this._getColumns()>1){g=100/this._getColumns()+"%";this.$("content").removeClass("sapUiCalContentSingle")}else{g="100%";this.$("content").addClass("sapUiCalContentSingle")}for(var d=0;d<l.length;d++){var u=l[d];u.setWidth(g)}}this._updateHeadersButtons();this._setPrimaryHeaderMonthButtonText();this._toggleTwoMonthsInTwoColumnsCSS()}function A(e){var t=new l(e,this.getPrimaryCalendarType());t.setDate(1);var a=w.call(this);if(a<=12){var i=e.getMonth();if(12%a>0&&i+a>11){i=12-a}t.setMonth(i)}return t}function Y(){var e,t,a;if(!this._bNamesLengthChecked){this._showMonthPicker(true);this._hideMonthPicker(true);e=this._getMonthPicker();this._bLongMonth=e._bLongMonth;this._bNamesLengthChecked=true;if(!this._bLongMonth){t=this.getAggregation("month");a;if(t.length>1){a=l.fromLocalJSDate(t[0].getDate(),this.getPrimaryCalendarType())}else{a=this._getFocusedDate()}this._setHeaderText(a);this._updateHeadersButtons();this._setPrimaryHeaderMonthButtonText();this._toggleTwoMonthsInTwoColumnsCSS()}}else if(w.call(this)>1){this._focusDate(this._getFocusedDate(),true,true)}}function x(e,t){var i,s;if(!e){return}i=l.fromLocalJSDate(e,this.getPrimaryCalendarType());s=i.getYear();a._checkYearInValidRange(s);if(a._isOutside(i,this._oMinDate,this._oMaxDate)){throw new Error("Date must not be in valid range (minDate and maxDate); "+this)}this._setFocusedDate(i);if(this.getDomRef()&&this._iMode==0){this._renderMonth(t,false,true,true)}}function w(){if(c.system.phone){return 1}else{return this.getMonths()}}function B(e){this.fireEvent("_renderMonth",{days:e.getParameter("days")})}function I(e){if(w.call(this)>1){var t=this.getAggregation("month");for(var a=0;a<t.length;a++){var i=t[a];if(i.getId()!=e.oSource.getId()){i._updateSelection()}}}this._oSelectedMonth=e.oSource;this.fireSelect()}function H(e){var t,a,i;if(w.call(this)>1){t=this.getAggregation("month");for(i=0;i<t.length;i++){a=t[i];if(a.getId()!=e.oSource.getId()){a._bindMousemove()}}}}function R(e){var t,a,i;if(w.call(this)>1){t=this.getAggregation("month");for(i=0;i<t.length;i++){a=t[i];if(a.getId()!=e.oSource.getId()){a._unbindMousemove()}}}}function F(e){var t=e.getParameter("offset");if(t>0){this._handleNext(e)}if(t<0){this._handlePrevious(e)}}function N(){this._updateHeadersYearPrimaryText(this._getYearString())}return b});