/*!
 * OpenUI5
 * (c) Copyright 2009-2021 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/core/format/FileSizeFormat","sap/ui/model/SimpleType","sap/ui/model/FormatException","sap/ui/model/ParseException","sap/ui/model/ValidateException","sap/ui/thirdparty/jquery"],function(t,e,i,o,r,n){"use strict";var s=e.extend("sap.ui.model.type.FileSize",{constructor:function(){e.apply(this,arguments);this.sName="FileSize"}});s.prototype.formatValue=function(t,e){var o;if(t==undefined||t==null){return null}if(this.oInputFormat&&typeof t==="string"){o=this.oInputFormat.parse(t);if(isNaN(o)){throw new i("Cannot format file size: "+t+" has the wrong format")}}else if(!this.oInputFormat&&typeof t==="string"){throw new i("Cannot format file size: "+t+" of type string without input/source formatter")}else if(typeof t==="number"){o=t}else{throw new i("Cannot format file size: "+t+" has wrong type: "+typeof t)}if(o==undefined||o==null){return null}switch(this.getPrimitiveType(e)){case"string":return this.oOutputFormat.format(o);case"int":return Math.floor(o);case"float":case"any":return o;default:throw new i("Don't know how to format FileSize to "+e)}};s.prototype.parseValue=function(t,e){var i,r;if(t==undefined||t==null){return null}switch(this.getPrimitiveType(e)){case"string":i=this.oOutputFormat.parse(t);if(isNaN(i)){r=sap.ui.getCore().getLibraryResourceBundle();throw new o(r.getText("FileSize.Invalid"))}break;case"int":case"float":i=t;break;default:throw new o("Don't know how to parse FileSize from "+e)}if(this.oInputFormat){i=this.oInputFormat.format(i)}return i};s.prototype.validateValue=function(t){if(this.oConstraints){var e=sap.ui.getCore().getLibraryResourceBundle(),i=[],o=[],s=this.oInputFormat;if(s&&typeof t==="string"){t=s.parse(t)}else if(!s&&typeof t==="string"){throw new Error("No Validation possible: '"+t+"' is of type string but not input/source format specified.")}n.each(this.oConstraints,function(r,n){if(s&&typeof n==="string"){n=s.parse(n)}else if(!s&&typeof n==="string"){throw new Error("No Validation possible: Compare value ("+r+") '"+n+"' is of type string but not input/source format specified.")}switch(r){case"minimum":if(t<n){i.push("minimum");o.push(e.getText("FileSize.Minimum",[n]))}break;case"maximum":if(t>n){i.push("maximum");o.push(e.getText("FileSize.Maximum",[n]))}}});if(i.length>0){throw new r(this.combineMessages(o),i)}}};s.prototype.setFormatOptions=function(t){this.oFormatOptions=t;this._handleLocalizationChange()};s.prototype._handleLocalizationChange=function(){this.oOutputFormat=t.getInstance(this.oFormatOptions);if(this.oFormatOptions.source){this.oInputFormat=t.getInstance(this.oFormatOptions.source)}};return s});