/*!
 * UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2019 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["./_AnnotationHelperExpression"],function(e){"use strict";var t=/[\\\{\}:]/,n=/\/\$count$/,i={getNavigationBinding:function(e){e=i.getNavigationPath(e);if(t.test(e)){throw new Error("Invalid OData identifier: "+e)}return e?"{"+e+"}":e},getNavigationPath:function(e){var t;if(!e||e[0]==="@"){return""}if(n.test(e)){return e.slice(0,-7)}t=e.indexOf("@");if(t>-1){e=e.slice(0,t)}if(e[e.length-1]==="/"){e=e.slice(0,-1)}if(e.indexOf(".")>-1){e=e.split("/").filter(function(e){return e.indexOf(".")<0}).join("/")}return e},getValueListType:function(e,t){var n=typeof e==="string"?"/"+t.schemaChildName+"/"+e:t.context.getPath();return t.$$valueAsPromise?t.context.getModel().fetchValueListType(n).unwrap():t.context.getModel().getValueListType(n)},isMultiple:function(e,t){var i;function r(e){return e===true}if(!e||e[0]==="@"){return false}if(n.test(e)){return true}i=e.indexOf("@");if(i>-1){e=e.slice(0,i)}if(e[e.length-1]!=="/"){e+="/"}e="/"+t.schemaChildName+"/"+e+"$isCollection";return t.$$valueAsPromise?t.context.getModel().fetchObject(e).then(r).unwrap():t.context.getObject(e)===true},label:function(e,t){var n;if(e.Label){return i.value(e.Label,{context:t.context.getModel().createBindingContext("Label",t.context)})}if(e.Value&&e.Value.$Path){n=t.context.getModel().createBindingContext("Value/$Path@com.sap.vocabularies.Common.v1.Label",t.context);if(t.$$valueAsPromise){return n.getModel().fetchObject("",n).then(function(e){return i.value(e,{context:n})}).unwrap()}return i.value(n.getObject(""),{context:n})}},value:function(t,n){var i=n.context.getPath();if(i.slice(-1)==="/"){i=i.slice(0,-1)}return e.getExpression({asExpression:false,model:n.context.getModel(),path:i,value:t})}};return i},true);