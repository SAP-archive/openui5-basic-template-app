/*!
 * OpenUI5
 * (c) Copyright 2009-2021 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["./AnalyticalBinding","./AnalyticalTreeBindingAdapter","./odata4analytics","./AnalyticalVersionInfo","sap/base/Log"],function(t,e,a,n,i){"use strict";var o=function(){var t=n.getVersion(this);if(t===n.NONE||this.getAnalyticalExtensions){return}this._mPreadapterFunctions={bindList:this.bindList,bindTree:this.bindTree};for(var e in o.prototype){if(o.prototype.hasOwnProperty(e)){this[e]=o.prototype[e]}}if(t===n.V1&&this.isCountSupported()){i.info("ODataModelAdapter: switched ODataModel to use inlinecount (mandatory for the AnalyticalBinding)");this.setCountSupported(false)}};o.prototype.bindList=function(a,n,i,o,s){if(s&&s.analyticalInfo){var r=new t(this,a,n,i,o,s);e.apply(r);return r}else{return this._mPreadapterFunctions.bindList.apply(this,arguments)}};o.prototype.bindTree=function(e,a,n,i){if(i&&i.analyticalInfo){var o=new t(this,e,a,[],n,i);return o}else{return this._mPreadapterFunctions.bindTree.apply(this,arguments)}};o.prototype.getAnalyticalExtensions=function(){if(this.oOData4SAPAnalyticsModel!=undefined&&this.oOData4SAPAnalyticsModel!=null){return this.oOData4SAPAnalyticsModel}var t=n.getVersion(this);if(t===n.V2&&!(this.oMetadata&&this.oMetadata.isLoaded())){throw"Failed to get the analytical extensions. The metadata have not been loaded by the model yet."+"Register for the 'metadataLoaded' event of the ODataModel(v2) to know when the analytical extensions can be retrieved."}var e=null;if(arguments.length==1){var i=arguments[0];var o=jQuery.sap.syncGetText(i);if(o.success){e=o.data}}try{this.oOData4SAPAnalyticsModel=new a.Model(new a.Model.ReferenceByModel(this),{sAnnotationJSONDoc:e})}catch(t){throw"Failed to instantiate analytical extensions for given OData model: "+t.message}return this.oOData4SAPAnalyticsModel};o.prototype.setAnalyticalExtensions=function(t){this.oOData4SAPAnalyticsModel=t};return o},true);