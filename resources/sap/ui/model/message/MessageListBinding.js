/*!
 * OpenUI5
 * (c) Copyright 2009-2021 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/base/strings/hash","sap/base/util/deepEqual","sap/base/util/deepExtend","sap/base/util/each","sap/ui/model/ChangeReason","sap/ui/model/ClientListBinding"],function(t,e,i,s,n,a){"use strict";var h=a.extend("sap.ui.model.message.MessageListBinding");h.prototype.enableExtendedChangeDetection=function(){a.prototype.enableExtendedChangeDetection.apply(this,arguments);this.oExtendedChangeDetectionConfig=this.oExtendedChangeDetectionConfig||{};this.oExtendedChangeDetectionConfig.symbol=function(e){if(typeof e!=="string"){return this.getContextData(e)}return t(e)}.bind(this)};h.prototype.getContexts=function(t,e){this.iLastStartIndex=t;this.iLastLength=e;if(!t){t=0}if(!e){e=Math.min(this.iLength,this.oModel.iSizeLimit)}var i=this._getContexts(t,e),s=[];if(this.bUseExtendedChangeDetection){for(var n=0;n<i.length;n++){s.push(this.getContextData(i[n]))}if(this.aLastContexts&&t<this.iLastEndIndex){i.diff=this.diffData(this.aLastContextData,i)}this.iLastEndIndex=t+e;this.aLastContexts=i.slice(0);this.aLastContextData=s.slice(0)}return i};h.prototype.getEntryData=function(t){var e=t.getObject();var i=e.processor;delete e.processor;var s=JSON.stringify(e);e.processor=i;return s};h.prototype.update=function(){var t=this.oModel._getObject(this.sPath,this.oContext);if(Array.isArray(t)){if(this.bUseExtendedChangeDetection){this.oList=i([],t)}else{this.oList=t.slice(0)}this.updateIndices();this.applyFilter();this.applySort();this.iLength=this._getLength()}else{this.oList=[];this.aIndices=[];this.iLength=0}};h.prototype.checkUpdate=function(t){var i;if(this.bSuspended&&!this.bIgnoreSuspend){return}if(!this.bUseExtendedChangeDetection){i=this.oModel._getObject(this.sPath,this.oContext);if(!e(this.oList,i)||t){this.update();this._fireChange({reason:n.Change})}}else{var a=false;var h=this;i=this.oModel._getObject(this.sPath,this.oContext);if(!e(this.oList,i)){this.update()}var o=this._getContexts(this.iLastStartIndex,this.iLastLength);if(this.aLastContexts){if(this.aLastContexts.length!=o.length){a=true}else{s(this.aLastContextData,function(t,e){if(h.getContextData(o[t])!==e){a=true;return false}return true})}}else{a=true}if(a||t){this._fireChange({reason:n.Change})}}};return h});