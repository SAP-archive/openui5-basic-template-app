/**
 * JUnit reporter for QUnit v1.1.1
 *
 * https://github.com/JamesMGreene/qunit-reporter-junit
 *
 * ##### BEGIN: MODIFIED BY SAP
 * Support for nested modules was inspired by
 * https://github.com/JamesMGreene/qunit-reporter-junit/pull/30
 * (https://github.com/abstraktor/qunit-reporter-junit/commit/526cd95adf147f9867f5ec025e61d2cd9ee1aa3f).
 * ##### END: MODIFIED BY SAP
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * https://jquery.org/license/
 */
(function(){"use strict";var t,e,n,s,i,a,o=[],r=[];QUnit.jUnitReport=function(){};QUnit.jUnitDone=function(t){if(typeof t==="function"){if(i){t(i)}else{r.push(t)}}};a=function(){var t;do{t=r.shift();if(typeof t==="function"){t(i)}}while(r.length>0);if(typeof QUnit.jUnitReport==="function"){QUnit.jUnitReport(i)}};QUnit.begin(function(){t={modules:[],total:0,passed:0,failed:0,start:new Date,time:0}});QUnit.moduleStart(function(n){o.push(e);e={name:n.name,tests:[],total:0,passed:0,failed:0,start:new Date,time:0,stdout:[],stderr:[]};t.modules.push(e)});QUnit.testStart(function(i){if(!e){e={name:i.module||"default",tests:[],total:0,passed:0,failed:0,start:new Date,time:0,stdout:[],stderr:[]};t.modules.push(e)}s=0;n={name:i.name,failedAssertions:[],total:0,passed:0,failed:0,start:new Date,time:0};e.tests.push(n)});QUnit.log(function(t){s++;if(!t.result){n.failedAssertions.push(t);e.stdout.push("["+e.name+", "+n.name+", "+s+"] "+t.message+(t.source?"\nSource: "+t.source:""))}});QUnit.testDone(function(t){n.time=(new Date).getTime()-n.start.getTime();n.total=t.total;n.passed=t.passed;n.failed=t.failed;n=null});QUnit.moduleDone(function(t){e.time=(new Date).getTime()-e.start.getTime();e.total=t.total;e.passed=t.passed;e.failed=t.failed;e=o.pop()});QUnit.done(function(e){t.time=e.runtime||(new Date).getTime()-t.start.getTime();t.total=e.total;t.passed=e.passed;t.failed=e.failed;u(e,t)});var u=function(t,e){var n=function(t){return t<10?"0"+t:t};var s=function(t){return t.getUTCFullYear()+"-"+n(t.getUTCMonth()+1)+"-"+n(t.getUTCDate())+"T"+n(t.getUTCHours())+":"+n(t.getUTCMinutes())+":"+n(t.getUTCSeconds())+"Z"};var o=function(t){return Math.round(t*1e3)/1e6};var r=function(t){var e={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&apos;","\r":"","\n":"&#10;","\t":"&#9;"};return(""+t).replace(/[<>&"'\r\n\t]/g,function(t){return e.hasOwnProperty(t)?e[t]:t})};var u=function(t){if(!(this instanceof u)){return new u(t)}t=t||{};var e=[],n=[],s;var i=function(t){if(s[t]&&e[e.length-1]!=="\n"){e.push("\n")}};s=function(t){var e,n={};t=t||[];e=t.length;while(e--){n[t[e]]={}}return n}(t.linebreak_at);this.start=function(t,s,a){if(!a){n.push(t)}e.push("<"+t);for(var o in s){e.push(" "+r(o)+'="'+r(s[o])+'"')}e.push(a?" />":">");i(t)};this.end=function(){var t=n.pop();i(t);e.push("</"+t+">");i(t)};this.text=function(t){e.push(r(t))};this.cdata=function(t){e.push("<![CDATA["+t+"]]>")};this.comment=function(t){e.push("\x3c!--"+t+"--\x3e")};this.pi=function(t,n){e.push("<?"+t+(n?" "+n:"")+"?>\n")};this.doctype=function(t){e.push("<!DOCTYPE"+t+">\n")};this.getString=function(){while(n.length){this.end()}return e.join("").replace(/\n$/,"")};this.reset=function(){e.length=0;n.length=0};this.pi(t.xmldecl||'xml version="1.0" encoding="UTF-8"')};var l,f,d,c,m,p,h,g,U,v,T=new u({linebreak_at:["testsuites","testsuite","testcase","failure","expected","actual","system-out","system-err"]});T.start("testsuites",{name:typeof location!=="undefined"&&location&&location.href||e.modules.length===1&&e.modules[0].name||null,tests:e.total,failures:e.failed,errors:0,time:o(e.time)});for(l=0,f=e.modules.length;l<f;l++){d=e.modules[l];T.start("testsuite",{id:l,name:d.name,hostname:"localhost",tests:d.total,failures:d.failed,errors:0,time:o(d.time),timestamp:s(d.start)});for(c=0,m=d.tests.length;c<m;c++){p=d.tests[c];T.start("testcase",{name:p.name,time:o(p.time),timestamp:s(p.start)});for(h=0,g=p.failedAssertions.length;h<g;h++){U=p.failedAssertions[h];v=U&&!(U.actual&&U.expected);T.start("failure",{type:"AssertionFailedError",message:U.message},v);if(!v){T.start("actual",{value:U.actual},true);T.start("expected",{value:U.expected},true);T.end()}}T.end()}if(d.stdout&&d.stdout.length){T.start("system-out");T.cdata("\n"+d.stdout.join("\n")+"\n");T.end()}if(d.stderr&&d.stderr.length){T.start("system-err");T.cdata("\n"+d.stderr.join("\n")+"\n");T.end()}T.end()}T.end();i={results:t,xml:T.getString()};a()}})();