var Mobify=window.Mobify=window.Mobify||{};Mobify.$=Mobify.$||window.Zepto||window.jQuery;Mobify.UI=Mobify.UI||{classPrefix:""};(function(t,e){t.support=t.support||{};var i={touch:"ontouchend"in e};if(window.sap&&sap.ui&&sap.ui.Device&&sap.ui.Device.support){i.touch=sap.ui.Device.support.touch}t.extend(t.support,i)})(Mobify.$,document);Mobify.UI.Utils=function(t){var e={},i=t.support;e.events={down:"touchstart mousedown",move:"touchmove mousemove",up:"touchend touchcancel mouseup"};e.getCursorPosition=function(t){t=t.originalEvent||t;var e=t.touches&&t.touches[0];return{x:e?e.clientX:t.clientX,y:e?e.clientY:t.clientY}};e.getProperty=function(t){var e=["Webkit","Moz","O","ms",""],i=document.createElement("div").style;for(var n=0;n<e.length;++n){if(i[e[n]+t]!==undefined){return e[n]+t}}return};t.extend(i,{transform:!!e.getProperty("Transform"),transform3d:!!(window.WebKitCSSMatrix&&"m11"in new WebKitCSSMatrix)});var n=e.getProperty("Transform");if(i.transform3d){e.translateX=function(t,e){if(typeof e=="number")e=e+"px";t.style[n]="translate3d("+e+",0,0)"}}else if(i.transform){e.translateX=function(t,e){if(typeof e=="number")e=e+"px";t.style[n]="translate("+e+",0)"}}else{e.translateX=function(t,e){if(typeof e=="number")e=e+"px";t.style.left=e}}var s=e.getProperty("Transition"),o=e.getProperty("TransitionDuration");e.setTransitions=function(t,e){if(e){t.style[o]=""}else{t.style[o]="0s"}};e.requestAnimationFrame=function(){var t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)};var e=function(){t.apply(window,arguments)};return e}();return e}(Mobify.$);Mobify.UI.Carousel=function(t,e){var i={dragRadius:10,moveRadius:20,classPrefix:undefined,classNames:{outer:"sapMCrsl",inner:"sapMCrslInner",item:"sapMCrslItem",center:"sapMCrslCenter",touch:"has-touch",dragging:"dragging",active:"sapMCrslActive"}},n=t.support;var s=function(t,e){this.setOptions(e);this.initElements(t);this.initOffsets();this.initAnimation();this.bind()};s.defaults=i;s.prototype.setOptions=function(e){var n=t.extend(this.options||{},i,e);n.classNames=t.extend({},n.classNames,e.classNames||{});n.classPrefix=n.classPrefix||Mobify.UI.classPrefix;this.options=n};s.prototype.initElements=function(e){this._index=1;this.element=e;this.$element=t(e);this.$inner=this.$element.find("."+this._getClass("inner"));this.$items=this.$inner.children();this.$start=this.$items.eq(0);this.$sec=this.$items.eq(1);this.$current=this.$items.eq(this._index);this._length=this.$items.length;this._alignment=this.$element.hasClass(this._getClass("center"))?.5:0};s.prototype.initOffsets=function(){this._offset=0;this._offsetDrag=0};s.prototype.initAnimation=function(){this.animating=false;this.dragging=false;this._hasActiveTransition=false;this._needsUpdate=false;this._sTransitionEvents="transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd";this._enableAnimation()};s.prototype._getClass=function(t){return this.options.classPrefix+this.options.classNames[t]};s.prototype._enableAnimation=function(){if(this.animating){return}e.setTransitions(this.$inner[0],true);this.$inner.removeClass(this._getClass("dragging"));this.animating=true};s.prototype._disableAnimation=function(){if(!this.animating){return}e.setTransitions(this.$inner[0],false);this.$inner.addClass(this._getClass("dragging"));this.animating=false};s.prototype.update=function(){if(this._needsUpdate){return}var t=this;this._needsUpdate=true;e.requestAnimationFrame(function(){t._update()})};s.prototype._update=function(){var t,i,n;if(!this._needsUpdate){return}t=this.$items.eq(this._index-1);i=t.prop("offsetLeft")+t.prop("clientWidth")*this._alignment,startOffset=this.$start.prop("offsetLeft")+this.$start.prop("clientWidth")*this._alignment;this._offset=-(i-startOffset);n=Math.round(this._offset+this._offsetDrag);if(this.$inner){e.translateX(this.$inner[0],n)}this._needsUpdate=false};s.prototype.setLoop=function(t){this._bLoop=t};s.prototype.getLoop=function(){return this._bLoop};s.prototype.setRTL=function(t){this._bRTL=t};s.prototype.getRTL=function(){return this._bRTL};s.prototype.changeAnimation=function(t,e,i,n){if(this.$inner){var s=this.$inner,o="transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd";var r=function(){s.off(o,r);s.removeClass(t);if(e){e.apply(i,n)}};s.addClass(t);s.on(o,r)}};s.prototype.resize=function(){this.changeAnimation("sapMCrslHideNonActive");this.update()};s.prototype.touchstart=function(t){if(this._fnStart){this._fnStart.call(this,t)}else{jQuery.sap.log.warning("Mobify's 'start' method not available yet.")}};s.prototype.touchmove=function(t){if(jQuery(t.target).is("input, textarea, select, [contenteditable='true']")){return}if(this._fnDrag){this._fnDrag.call(this,t)}else{jQuery.sap.log.warning("Mobify's 'drag' method not available yet.")}};s.prototype.touchend=function(t){if(this._fnEnd){this._fnEnd.call(this,t)}else{jQuery.sap.log.warning("Mobify's 'end' method not available yet.")}};s.prototype.bind=function(){var i=Math.abs,n=false,s=false,o=this.options.dragRadius,r,a,f,h,l=this,u=this.$element,p=this.$inner,d=this.options,c=this.$element.width(),m=false,g=false;if(!l._fnStart){l._fnStart=function t(i){if(i.isMarked("delayedMouseEvent")){return}var o=jQuery(i.target).control(0);if(o instanceof sap.m.Slider||o instanceof sap.m.Switch||o instanceof sap.m.IconTabBar){s=true;return}n=true;s=false;r=e.getCursorPosition(i);a=0;f=0;h=false;l._disableAnimation();m=l._index==1;g=l._index==l._length};l._fnDrag=function t(u){if(!n||s||u.isMarked("delayedMouseEvent")){return}u.setMarked();var p=e.getCursorPosition(u);a=r.x-p.x;f=r.y-p.y;if(h||i(a)>i(f)&&i(a)>o){h=true;u.preventDefault();if(m&&a<0){a=a*-c/(a-c)}else if(g&&a>0){a=a*c/(a+c)}l._offsetDrag=-a;l.update()}else if(i(f)>i(a)&&i(f)>o){s=true}};l._fnEnd=function t(e){if(!n||e.isMarked("delayedMouseEvent")){return}n=false;l._enableAnimation();if(!s&&i(a)>d.moveRadius){if(a>0){l.getRTL()?l.prev():l.next()}else{l.getRTL()?l.next():l.prev()}}else{l._offsetDrag=0;l.update()}}}function _(t){if(h){t.preventDefault();t.stopPropagation();t.setMarked()}}p.on("click.carousel",_).on("mouseout.carousel",l._fnEnd);u.on("click","[data-slide]",function(e){var i=jQuery(e.target).closest(".sapMCrsl");if(i[0]!=u[0]){return}e.preventDefault();var n=t(this).attr("data-slide"),s=parseInt(n,10);if(isNaN(s)){l[n]()}else{}});u.on("afterSlide",function(t,e,i){var n=i-1,s=l._getClass("active");if(t.target!=this){return}var o=l.$element[0].id,r=o.replace(/(:|\.)/g,"\\$1")+"-pageIndicator";for(var a=n;a<n+l.options.numberOfItemsToShow;a++){var f=l.$items.eq(a);f.addClass(s)}l.$element.find("#"+r+" > [data-slide='"+e+"']").removeClass(l._getClass("active"));l.$element.find("#"+r+" > [data-slide='"+i+"']").addClass(l._getClass("active"));if(l.$items[i-1]){this.setAttribute("aria-activedescendant",l.$items[i-1].id)}});u.trigger("beforeSlide",[1,1]);u.trigger("afterSlide",[1,1]);l.update()};s.prototype.unbind=function(){this.$inner.off()};s.prototype.onTransitionComplete=function(){this.$inner.off(this._sTransitionEvents,this.onTransitionComplete);var t=this._getClass("active"),e;for(e=0;e<this.$items.length;e++){if(e!=this._index-1){this.$items.eq(e).removeClass(t)}}this._hasActiveTransition=false;this.$element.trigger("afterSlide",[this._prevIndex,this._index])};s.prototype.hasActiveTransition=function(){return this._hasActiveTransition};s.prototype.destroy=function(){this.unbind();this.$element.trigger("destroy");this.$element.remove();this.$element=null;this.$inner=null;this.$start=null;this.$current=null;this._needsUpdate=false};s.prototype.move=function(t,e){if(this._length===0||this._hasActiveTransition==true){return}var i=this.$element,n=this.$inner,s=this.$items,o=this.$start,r=this.$current,a=this._length,f=this._index;e=e||{};if(this.getLoop()&&this.options.numberOfItemsToShow!==1&&(t<1||t>this._length)){return}if(t<1){if(this._bLoop){t=this._length}else{t=1}}else if(t>this._length){if(this._bLoop){t=1}else{t=a}}if(t+this.options.numberOfItemsToShow>this._length){t=this._length-this.options.numberOfItemsToShow+1}var h=true;if(t==this._index){h=false}if(h){i.trigger("beforeSlide",[f,t])}this._offsetDrag=0;this._prevIndex=this._index;this._index=t;this.update();if(h){this._hasActiveTransition=true;n.bind(this._sTransitionEvents,jQuery.proxy(this.onTransitionComplete,this))}};s.prototype.next=function(){this.move(this._index+1)};s.prototype.prev=function(){this.move(this._index-1)};return s}(Mobify.$,Mobify.UI.Utils);(function(t){t.fn.carousel=function(e,i){var n=t.extend({},t.fn.carousel.defaults,i);if(typeof e=="object"){n=t(n,e);i=null;e=null}this.each(function(){var s=t(this),o=this._carousel;if(!o){o=new Mobify.UI.Carousel(this,n)}else{o.setOptions(n);o.initElements(this);o.initOffsets();o.initAnimation();o.bind()}if(e){o[e](i);if(e==="destroy"){o=null}}this._carousel=o});return this};t.fn.carousel.defaults={}})(Mobify.$);