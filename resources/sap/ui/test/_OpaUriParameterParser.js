/*!
 * OpenUI5
 * (c) Copyright 2009-2021 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/base/Object","sap/ui/test/_OpaLogger","sap/ui/thirdparty/jquery","sap/ui/thirdparty/URI"],function(r,e,a,t){"use strict";var s=r.extend("sap.ui.test._OpaUriParameterParser",{});var n=e.getLogger("sap.ui.test._OpaUriParameterParser");s.PREFIX="opa";s.EXCLUDED_PATTERNS=[/^opa((?!(Frame)).*)$/,/hidepassed/,/noglobals/,/notrycatch/,/coverage/,/module/,/filter/];s._getOpaParams=function(){var r={};var e=(new t).search(true);for(var a in e){if(a.startsWith(s.PREFIX)){var n=a.substr(s.PREFIX.length);n=n.charAt(0).toLowerCase()+n.substr(1);r[n]=s._parseParam(e[a])}}return r};s._getAppParams=function(){var r={};var e=(new t).search(true);for(var a in e){if(s._isExcludedParam(a)){n.debug("URI parameter '"+a+"' is recognized as OPA parameter and will not be set in application frame!")}else{r[a]=e[a]}}return r};s._isExcludedParam=function(r){return r&&s.EXCLUDED_PATTERNS.some(function(e){return r.match(e)})};s._parseParam=function(r){var e=r;["bool","integer","floating"].forEach(function(a){var t=s._parsers[a](r);e=t.parsed?t.value:e});return e};s._parsers={bool:function(r){var e={};if(r&&r.match(/^true$/i)){e={parsed:true,value:true}}if(r&&r.match(/^false$/i)){e={parsed:true,value:false}}return e},integer:function(r){var e=parseInt(r);return{parsed:s._isNumber(e),value:e}},floating:function(r){var e=parseFloat(r);return{parsed:s._isNumber(e),value:e}}};s._isNumber=function(r){return typeof r==="number"&&!isNaN(r)};return s});