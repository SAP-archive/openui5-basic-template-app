/*!
 * OpenUI5
 * (c) Copyright 2009-2021 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/test/matchers/Matcher","sap/base/strings/capitalize"],function(e,t){"use strict";return e.extend("sap.ui.test.matchers.I18NText",{metadata:{publicMethods:["isMatching"],properties:{propertyName:{type:"string"},key:{type:"string"},parameters:{type:"any"},modelName:{type:"string",defaultValue:"i18n"},useLibraryBundle:{type:"boolean"}}},isMatching:function(e){var r=this.getKey(),a=this.getPropertyName(),o=this.getParameters(),s=this.getModelName(),i=e.getModel(s),n=this.getUseLibraryBundle(),u=e["get"+t(a,0)];if(!i){this._oLogger.debug("The '"+e+"' has no model with name '"+s+"'");return false}if(!i.getResourceBundle){this._oLogger.debug("The model '"+i+"' is not a valid resource model");return false}var g=this._getApplicationWindow();var d;if(n){var l=e.getMetadata().getLibraryName();d=sap.ui.getCore().getLibraryResourceBundle(l)}else{d=i.getResourceBundle();if(d instanceof g.Promise){if(i._oResourceBundle instanceof g.Object&&i._oResourceBundle.getText){d=i._oResourceBundle}else{this._oLogger.debug("The model '"+s+"' of '"+e+"' is in async mode and not loaded yet");return false}}}if(!u){this._oLogger.debug("The '"+e+"' has no '"+a+"' property");return false}var h=u.call(e);var c=d.getText(r,o,true);if(!c){var f="No value for the key '"+r+"' in the model '"+s+"' of '"+e+"'";this._oLogger.debug(f);return false}var p=h===c;if(!p){this._oLogger.debug("The text '"+c+"' does not match the value '"+h+"' of the '"+a+"' property for '"+e+"'")}return p}})});