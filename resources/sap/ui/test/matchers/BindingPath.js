/*!
 * OpenUI5
 * (c) Copyright 2009-2021 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/thirdparty/jquery","sap/ui/test/matchers/Matcher"],function(e,t){"use strict";return t.extend("sap.ui.test.matchers.BindingPath",{metadata:{publicMethods:["isMatching"],properties:{path:{type:"any"},modelName:{type:"string"},propertyPath:{type:"any"}}},isMatching:function(e){var t=this.getModelName()||undefined;var o=this.getPropertyPath();var n=this.getPath();if(!n&&!o){this._oLogger.debug("Matcher requires context path or property path but none is defined! No controls will be matched");return false}var i=true;var a=true;var s=e.mObjectBindingInfos&&e.mObjectBindingInfos[t];var h=e.getBindingContext(t);if(n){if(s){i=r(s.path,n);if(i){this._oLogger.debug("Control '"+e+"' has object binding with the expected context path '"+n+"' for model '"+t+"'")}else{this._oLogger.debug("Control '"+e+"' has object binding with context path '"+s.path+"' for model '"+t+"' but should have context path '"+n+"'")}}else{i=!!h&&r(h.getPath(),n);if(i){this._oLogger.debug("Control '"+e+"' has binding context with the expected path '"+n+"' for model '"+t+"'")}else if(h){this._oLogger.debug("Control '"+e+"' has binding context with path '"+h.getPath()+"' for model '"+t+"' but should have context path '"+n+"'")}else{this._oLogger.debug("Control '"+e+"' does not have a binding context for model '"+t+"' but should have a binding context with path '"+n+"'")}}}if(o){var g=[];var d=Object.keys(e.mBindingInfos).filter(function(n){var i=e.mBindingInfos[n];var a=i.parts?i.parts:[i];var d=a.filter(function(e){var n=r(e.path,o,!!h);var i=s||e.model===t;if(!n&&i){g.push(e.path)}return n&&i});return!!d.length});a=!!d.length;if(a){this._oLogger.debug("Control '"+e+"' has the expected binding property path '"+o+"' for model '"+t+"'")}else if(g.length){this._oLogger.debug("Control '"+e+"' has binding property paths ['"+g.join("', '")+"'] for model '"+t+"' but should have binding property path '"+o+"'")}else{this._oLogger.debug("Control '"+e+"' has no binding property paths for model '"+t+"' but should have binding property path '"+o+"'")}}return i&&a}});function r(t,r,o){if(e.isPlainObject(r)&&r.regex&&r.regex.source){r=new RegExp(r.regex.source,r.regex.flags)}if(r instanceof RegExp){var n;var i=r.source.match(/\^?\//);if(o&&i){n=new RegExp(r.source.substr(i.index+1),r.flags)}else if(!o&&!i){n=new RegExp("/"+r.source,r.flags)}else{n=r}return n.test(t)}else if(t){var a=t.charAt(0)==="/";if(o&&a){r=r.substr(1)}else if(!o&&!a){r="/"+r}return t===r}else{return false}}});