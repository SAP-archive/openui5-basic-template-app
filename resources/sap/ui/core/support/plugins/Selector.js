/*!
 * OpenUI5
 * (c) Copyright 2009-2021 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/core/Core","sap/ui/core/Popup","../Plugin","../Support","sap/ui/thirdparty/jquery","sap/base/util/uid"],function(t,e,o,i,n,s){"use strict";var r=o.extend("sap.ui.core.support.plugins.Selector",{constructor:function(t){o.apply(this,["sapUiSupportSelector","",t]);this._aEventIds=[this.getId()+"Highlight"];this._oPopup=new e}});r.prototype.isToolPlugin=function(){return false};r.prototype.onsapUiSupportSelectorHighlight=function(t){p(t.getParameter("id"),this,t.getParameter("sendInfo"))};r.prototype.init=function(e){o.prototype.init.apply(this,arguments);var i;if(!this._sPopupId){this._sPopupId=this.getId()+"-"+s();var r=t.createRenderManager();r.openStart("div",this._sPopupId).style("border","2px solid rgb(0, 128, 0)").style("background-color","rgba(0, 128, 0, .55)").openEnd().close("div");r.flush(t.getStaticAreaRef(),false,true);r.destroy();i=n(document.getElementById(this._sPopupId));this._oPopup.setContent(i[0])}else{i=n(document.getElementById(this._sPopupId))}var u=this;this._fSelectHandler=function(t){if(!t.shiftKey||!t.altKey||!t.ctrlKey){return}var e=n(t.target).closest("[data-sap-ui]").attr("id");if(p(e,u,true)){t.stopPropagation();t.preventDefault()}};this._fCloseHandler=function(t){u._oPopup.close(0)};i.on("click",this._fCloseHandler);n(document).on("mousedown",this._fSelectHandler)};r.prototype.exit=function(t){this._oPopup.close(0);if(this._fCloseHandler){n(document.getElementById(this._sPopupId)).off("click",this._fCloseHandler);this._fCloseHandler=null}if(this._fSelectHandler){n(document).off("mousedown",this._fSelectHandler);this._fSelectHandler=null}o.prototype.exit.apply(this,arguments)};function p(e,o,s){if(e){var r=t.byId(e);if(r){var p=n(document.getElementById(o._sPopupId));var l=r.$();if(l.is(":visible")){p.width(l.outerWidth());p.height(l.outerHeight());o._oPopup.open(0,"BeginTop","BeginTop",l[0],"0 0","none");if(s){i.getStub().sendEvent(o.getId()+"Select",u(r,o))}setTimeout(function(){o._oPopup.close(0)},1e3);return true}}}return false}function u(t,e){return{id:t.getId()}}return r});