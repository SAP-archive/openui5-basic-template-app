/*!
 * OpenUI5
 * (c) Copyright 2009-2021 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["../Plugin","../Support","sap/base/security/encodeXML"],function(t,e,s){"use strict";var i=t.extend("sap.ui.core.support.plugins.MessageTest",{constructor:function(s){t.apply(this,["sapUiSupportMessageTest","Support Tool Communication Test",s]);this._aEventIds=[this.getId()+"Msg",e.EventType.SETUP,e.EventType.TEAR_DOWN];this._bFirstTime=true}});i.prototype.onsapUiSupportMessageTestMsg=function(t){this.$("Panel").removeClass("sapUiSupportHidden");n(this,this.getId()+"Msg",t.getParameter("message"),true)};i.prototype.init=function(s){t.prototype.init.apply(this,arguments);var i=this;if(this._bFirstTime){this._bFirstTime=false;this.$("Panel").addClass("sapUiSupportHidden")}var p=sap.ui.getCore().createRenderManager();p.write("<div class='sapUiSupportToolbar'>");p.write("<input type='text' id='"+this.getId()+"-input' class='sapUiSupportTxtFld'>");p.write("<button id='"+this.getId()+"-send' class='sapUiSupportRoundedButton'>Send</button>");p.write("</div><div class='sapUiSupportMessageCntnt'></div>");p.flush(this.$().get(0));p.destroy();this._fSendHandler=function(){var t=i.$("input").val();s.sendEvent(i.getId()+"Msg",{message:t});n(i,i.getId()+"Msg",t,false)};this.$("send").on("click",this._fSendHandler);n(this,e.EventType.SETUP,"",true)};i.prototype.exit=function(s){n(this,e.EventType.TEAR_DOWN,"",true);if(this._fSendHandler){this.$("send").off("click",this._fSendHandler);this._fSendHandler=null}t.prototype.exit.apply(this,arguments)};function n(t,e,i,n){jQuery(".sapUiSupportMessageCntnt",t.$()).append('<b style="color:'+(n?"green":"blue")+";\">Message '"+e+"' "+(n?"received":"send")+(i?":</b> "+s(i):"</b>")+"<br>")}return i});