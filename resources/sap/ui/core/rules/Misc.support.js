/*!
 * OpenUI5
 * (c) Copyright 2009-2021 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/support/library","./CoreHelper.support","sap/ui/thirdparty/jquery","sap/ui/dom/jquery/control"],function(e,s,r){"use strict";var i=sap.ui.require("sap/base/Log");if(!i){i=r.sap.log}var t=e.Categories;var o=e.Severity;var n=e.Audiences;var a={id:"errorLogs",audiences:[n.Control,n.Internal],categories:[t.Performance],enabled:true,minversion:"1.32",title:"Error logs",description:"Checks for the amount of error logs in the console",resolution:"Error logs should be fixed",resolutionurls:[],check:function(e,s){var r=0,t="";var n=i.getLogEntries();n.forEach(function(e){if(e.level===i.Level.ERROR){r++;if(r<=20){t+="- "+e.message+"\n"}}});if(r>0){e.addIssue({severity:o.Low,details:"Total error logs: "+r+"\n"+t,context:{id:"WEBPAGE"}})}}};var u={id:"eventBusSilentPublish",audiences:[n.Internal],categories:[t.Functionality],enabled:true,minversion:"1.32",title:"EventBus publish",description:"Checks the EventBus publications for missing listeners",resolution:"Calls to EventBus#publish should be removed or adapted such that associated listeners are found",resolutionurls:[],check:function(e,s){var r=i.getLogEntries();var t=[];r.forEach(function(e){if(e.component==="sap.ui.core.EventBus"){if(e.details&&e.details.indexOf("sap.")!==0){if(t.indexOf(e.message)===-1){t.push(e.message)}}}});t.forEach(function(s){e.addIssue({severity:o.Low,details:"EventBus publish without listeners "+s,context:{id:"WEBPAGE"}})})}};return[u,a]},true);