/*!
 * OpenUI5
 * (c) Copyright 2009-2021 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/core/Control","./DOMAttribute","./DOMElementRenderer","sap/base/Log","sap/ui/thirdparty/jquery","sap/ui/core/library"],function(t,e,i,r,a){"use strict";var s=t.extend("sap.ui.core.tmpl.DOMElement",{metadata:{library:"sap.ui.core",properties:{text:{type:"string",group:"Appearance",defaultValue:null},tag:{type:"string",group:"Behavior",defaultValue:"span"}},defaultAggregation:"attributes",aggregations:{attributes:{type:"sap.ui.core.tmpl.DOMAttribute",multiple:true,singularName:"attribute"},elements:{type:"sap.ui.core.tmpl.DOMElement",multiple:true,singularName:"element"}}},renderer:i});s.prototype.applySettings=function(i){var s=this.getMetadata(),n=s.getJSONKeys();if(i){if(!i["attributes"]){var o=i["attributes"]=[];a.each(i,function(t,r){if(t!=="id"&&!n[t]&&typeof r==="string"){o.push(new e({name:t,value:r}));delete i[t]}})}else{r.warning("DOMElement#"+this.getId()+": custom attributes in settings will be ignored since attributes are provided!")}}t.prototype.applySettings.apply(this,arguments)};s.prototype.exit=s.prototype.onBeforeRendering=function(){var t=this.getTag().toLowerCase();if(t==="input"||t==="textarea"||t==="select"){this.$().off("change")}};s.prototype.onAfterRendering=function(){var t=this.getTag().toLowerCase();if(t==="input"||t==="textarea"||t==="select"){this.$().on("change",a.proxy(this.oninputchange,this))}};s.prototype.oninputchange=function(t){var e=this.getTag().toLowerCase();if(e==="input"){var i=this.$().val();this.getAttributes().forEach(function(t){if(t.getName().toLowerCase()==="value"){t.setValue(i)}})}else if(e==="textarea"){var r=this.$().val();this.setText(r)}else if(e==="select"){var r="";this.$().find("select option:selected").each(function(){r+=a(this).text()+" "});this.setText(r)}};s.prototype.attr=function(t,i){var r=this.getAttributes(),a;r.forEach(function(e){var i=e.getName();if(i.toLowerCase()===t){a=e;return false}});if(i===undefined){return a&&a.getValue()}else{if(a){if(i===null){this.removeAttribute(a)}else{a.setValue(i)}}else{if(i!==null){this.addAttribute(new e({name:t,value:i}))}}return this}};s.prototype.removeAttr=function(t){this.attr(t,null);return this};s.prototype.setText=function(t){this.setProperty("text",t,true);var e=this.$();if(e.length>0){var i=this.getTag().toLowerCase();if(i==="textarea"){e.val(this.getProperty("text"))}else{e.text(this.getProperty("text"))}}return this};return s});