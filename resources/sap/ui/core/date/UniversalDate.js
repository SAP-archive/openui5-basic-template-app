/*!
 * OpenUI5
 * (c) Copyright 2009-2020 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/base/Object","sap/ui/core/LocaleData","./_Calendars"],function(e,t,r){"use strict";var n=e.extend("sap.ui.core.date.UniversalDate",{constructor:function(){var e=n.getClass();return this.createDate(e,arguments)}});n.UTC=function(){var e=n.getClass();return e.UTC.apply(e,arguments)};n.now=function(){return Date.now()};n.prototype.createDate=function(e,t){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}};n.getInstance=function(e,t){var r,a;if(e instanceof n){e=e.getJSDate()}if(!t){t=sap.ui.getCore().getConfiguration().getCalendarType()}r=n.getClass(t);a=Object.create(r.prototype);a.oDate=e;a.sCalendarType=t;return a};n.getClass=function(e){if(!e){e=sap.ui.getCore().getConfiguration().getCalendarType()}return r.get(e)};["getDate","getMonth","getFullYear","getYear","getDay","getHours","getMinutes","getSeconds","getMilliseconds","getUTCDate","getUTCMonth","getUTCFullYear","getUTCDay","getUTCHours","getUTCMinutes","getUTCSeconds","getUTCMilliseconds","getTime","valueOf","getTimezoneOffset","toString","toDateString","setDate","setFullYear","setYear","setMonth","setHours","setMinutes","setSeconds","setMilliseconds","setUTCDate","setUTCFullYear","setUTCMonth","setUTCHours","setUTCMinutes","setUTCSeconds","setUTCMilliseconds"].forEach(function(e){n.prototype[e]=function(){return this.oDate[e].apply(this.oDate,arguments)}});n.prototype.getJSDate=function(){return this.oDate};n.prototype.getCalendarType=function(){return this.sCalendarType};n.prototype.getEra=function(){return n.getEraByDate(this.sCalendarType,this.oDate.getFullYear(),this.oDate.getMonth(),this.oDate.getDate())};n.prototype.setEra=function(e){};n.prototype.getUTCEra=function(){return n.getEraByDate(this.sCalendarType,this.oDate.getUTCFullYear(),this.oDate.getUTCMonth(),this.oDate.getUTCDate())};n.prototype.setUTCEra=function(e){};n.prototype.getWeek=function(){return n.getWeekByDate(this.sCalendarType,this.getFullYear(),this.getMonth(),this.getDate())};n.prototype.setWeek=function(e){var t=n.getFirstDateOfWeek(this.sCalendarType,e.year||this.getFullYear(),e.week);this.setFullYear(t.year,t.month,t.day)};n.prototype.getUTCWeek=function(){return n.getWeekByDate(this.sCalendarType,this.getUTCFullYear(),this.getUTCMonth(),this.getUTCDate())};n.prototype.setUTCWeek=function(e){var t=n.getFirstDateOfWeek(this.sCalendarType,e.year||this.getFullYear(),e.week);this.setUTCFullYear(t.year,t.month,t.day)};n.prototype.getQuarter=function(){return Math.floor(this.getMonth()/3)};n.prototype.getUTCQuarter=function(){return Math.floor(this.getUTCMonth()/3)};n.prototype.getDayPeriod=function(){if(this.getHours()<12){return 0}else{return 1}};n.prototype.getUTCDayPeriod=function(){if(this.getUTCHours()<12){return 0}else{return 1}};n.prototype.getTimezoneShort=function(){if(this.oDate.getTimezoneShort){return this.oDate.getTimezoneShort()}};n.prototype.getTimezoneLong=function(){if(this.oDate.getTimezoneLong){return this.oDate.getTimezoneLong()}};var a=7*24*60*60*1e3;n.getWeekByDate=function(e,t,r,n){var a=sap.ui.getCore().getConfiguration().getFormatSettings().getFormatLocale(),i=this.getClass(e),g=o(i,t),u=new i(i.UTC(t,r,n)),l,f,C,c,p;if(a.getRegion()==="US"){l=s(g,u)}else{f=t-1;C=t+1;c=o(i,f);p=o(i,C);if(u>=p){t=C;l=0}else if(u<g){t=f;l=s(c,u)}else{l=s(g,u)}}return{year:t,week:l}};n.getFirstDateOfWeek=function(e,t,r){var n=sap.ui.getCore().getConfiguration().getFormatSettings().getFormatLocale(),s=this.getClass(e),i=o(s,t),g=new s(i.valueOf()+r*a);if(n.getRegion()==="US"&&r===0&&i.getUTCFullYear()<t){return{year:t,month:0,day:1}}return{year:g.getUTCFullYear(),month:g.getUTCMonth(),day:g.getUTCDate()}};function o(e,r){var n=sap.ui.getCore().getConfiguration().getFormatSettings().getFormatLocale(),a=t.getInstance(n),o=a.getMinimalDaysInFirstWeek(),s=a.getFirstDayOfWeek(),i=new e(e.UTC(r,0,1)),g=7;while(i.getUTCDay()!==s){i.setUTCDate(i.getUTCDate()-1);g--}if(g<o){i.setUTCDate(i.getUTCDate()+7)}return i}function s(e,t){return Math.floor((t.valueOf()-e.valueOf())/a)}var i={};n.getEraByDate=function(e,t,r,n){var a=g(e),o=new Date(0).setUTCFullYear(t,r,n),s;for(var i=a.length-1;i>=0;i--){s=a[i];if(!s){continue}if(s._start&&o>=s._startInfo.timestamp){return i}if(s._end&&o<s._endInfo.timestamp){return i}}};n.getCurrentEra=function(e){var t=new Date;return this.getEraByDate(e,t.getFullYear(),t.getMonth(),t.getDate())};n.getEraStartDate=function(e,t){var r=g(e),n=r[t]||r[0];if(n._start){return n._startInfo}};function g(e){var r=sap.ui.getCore().getConfiguration().getFormatSettings().getFormatLocale(),n=t.getInstance(r),a=i[e];if(!a){var a=n.getEraDates(e);if(!a[0]){a[0]={_start:"1-1-1"}}for(var o=0;o<a.length;o++){var s=a[o];if(!s){continue}if(s._start){s._startInfo=u(s._start)}if(s._end){s._endInfo=u(s._end)}}i[e]=a}return a}function u(e){var t=e.split("-"),r,n,a;if(t[0]==""){r=-parseInt(t[1]);n=parseInt(t[2])-1;a=parseInt(t[3])}else{r=parseInt(t[0]);n=parseInt(t[1])-1;a=parseInt(t[2])}return{timestamp:new Date(0).setUTCFullYear(r,n,a),year:r,month:n,day:a}}return n});