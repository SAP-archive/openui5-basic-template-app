/*!
 * OpenUI5
 * (c) Copyright 2009-2021 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/core/Element","sap/base/Log","sap/base/assert"],function(e,t,r){"use strict";var a={},n={};a.mixInto=function(e){r(!e.prototype.unstash,"StashedControlSupport: fnClass already has method 'unstash', sideeffects possible",e.getMetadata().getName());if(e.getMetadata().isA("sap.ui.core.Fragment")||e.getMetadata().isA("sap.ui.core.mvc.View")){throw new Error("Stashing is not supported for sap.ui.coreFragment or sap.ui.core.mvc.View")}o(e)};function o(e){e.prototype.unstash=function(){if(this.isStashed()){var e=s(this);e.stashed=false;return e}return this};e.prototype.isStashed=function(){return!!n[this.getId()]};var t=e.prototype.clone;e.prototype.clone=function(){if(this.isStashed()){throw new Error("A stashed control cannot be cloned, id: '"+this.getId()+"'.")}return t.apply(this,arguments)};var r=e.prototype.destroy;e.prototype.destroy=function(){delete n[this.getId()];r.apply(this,arguments)}}function s(e){var t;var r;var a;var o=n[e.getId()];t=e.getParent();if(t){a=t.getMetadata().getAggregation(e.sParentAggregationName);r=a.indexOf(t,e);a.remove(t,e)}e.destroy();var s=sap.ui.require("sap/ui/core/Component");var i=s&&s.getOwnerComponentFor(t);var p;var u=o.fnCreate;if(i){p=i.runAsOwner(u)}else{p=u()}if(r>=0){p.forEach(function(e){a.insert(t,e,r)})}delete n[e.getId()];return p[0]}function i(e,t){var r=[];for(var a in n){var o=sap.ui.getCore().byId(n[a].wrapperId);var s=e?o:a;var i=o&&o.getParent();if(!t||i&&i.getId()===t){r.push(s)}}return r}a.getStashedControlIds=function(e){return i(false,e)};a.getStashedControls=function(e){return i(true,e)};a.createStashedControl=function(e){var t={wrapperId:e.wrapperId,fnCreate:e.fnCreate};n[e.wrapperId]=t;return t};return a});