/*!
 * OpenUI5
 * (c) Copyright 2009-2021 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/base/Object","sap/base/util/Deferred","sap/base/util/LoaderExtensions","sap/ui/core/BlockLayerUtils"],function(e,t,i,o){"use strict";var s=[];var r=e.extend("sap.ui.core.Placeholder",{constructor:function(t){e.call(this);if(!t.html){throw new Error("A HTML page defining the placeholders content must be given!")}this.bShow=false;this.placeholderHTML=t.html},show:function(e,t){this.bShow=true;return this._load().then(function(i){if(i&&this.bShow&&!e.getDomRef().contains(this.placeholder)){if(this.blockState){o.unblock(this.blockState)}this.blockState=o.block(e,e.getId()+"--placeholder",t);var s=this.blockState.$blockLayer[0];s.className+=" sapUiPlaceholder";s.insertAdjacentHTML("beforeend",i);this.placeholder=s}return i}.bind(this))},hide:function(){this.bShow=false;if(this.placeholder&&this.blockState){o.unblock(this.blockState);this.placeholder=undefined;this.blockState=undefined}if(this.pLoaded){this.pLoaded.resolve()}},_load:function(){if(!this.pLoaded){this.pLoaded=new t;if(this.placeholderHTML){i.loadResource(this.placeholderHTML,{async:true,dataType:"html"}).then(function(e){this.placeholderContent=e;this.pLoaded.resolve(e)}.bind(this))}else{this.pLoaded.reject()}}return this.pLoaded.promise}});r.registerProvider=function(e){s.push(e)};r.hasProviders=function(){return s.length>0};r.getPlaceholderFromProviders=function(e){var t;if(e){s.some(function(i){t=i(e);return!!t})}return t};return r});