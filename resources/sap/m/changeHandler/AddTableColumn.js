/*!
 * OpenUI5
 * (c) Copyright 2009-2021 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/fl/changeHandler/BaseAddViaDelegate","sap/base/util/ObjectPath"],function(e,t){"use strict";var a="columns";var r="cells";var n="items";function i(e,a,r,n,i){var o=t.get("oDataInformation.entityType",e);if(o){var l=e.content;return r.createControl("sap.m.Text",i,n,l.newFieldSelector.id+"--column",{text:"{/#"+o+"/"+l.bindingPath+"/@sap:label}"})}return a.label}var o=e.createAddViaDelegateChangeHandler({addProperty:function(e){var t=e.innerControls;if(t.valueHelp){throw Error("Adding properties with value helps is not yet supported by addTableColumn change handler")}var o=e.control;var l=e.modifier;var g=e.view;var d=e.appComponent;var v=e.change;var p=v.getRevertData();var u=v.getDefinition();var c=u.content;var s=c.newFieldIndex;var f=c.newFieldSelector;var m=l.getBindingTemplate(o,n,g);if(m){var h=t.control;l.insertAggregation(m,r,h,s,g);l.updateAggregation(o,n);p.newCellSelector={id:f.id+"--field",idIsLocal:true}}var C=l.createControl("sap.m.Column",d,g,f);var A=i(u,t,l,g,d);l.insertAggregation(C,"header",A,0,g);l.insertAggregation(o,a,C,s,g)},revertAdditionalControls:function(e){var t=e.control;var a=e.change;var i=e.modifier;var o=e.appComponent;var l=i.getBindingTemplate(t,n);if(l){var g=i.bySelector(a.getRevertData().newCellSelector,o);i.removeAggregation(l,r,g);i.destroy(g);i.updateAggregation(t,n)}},aggregationName:a,parentAlias:"targetTable",fieldSuffix:"--field",skipCreateLabel:function(e){return!!t.get("changeDefinition.oDataInformation.entityType",e)},skipCreateLayout:true,supportsDefault:true});return o},true);