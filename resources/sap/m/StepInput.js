/*!
 * OpenUI5
 * (c) Copyright 2009-2021 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/core/Icon","./Input","./InputBase","./InputRenderer","sap/ui/core/Control","sap/ui/core/IconPool","sap/ui/core/LabelEnablement","sap/ui/core/message/MessageMixin","sap/ui/model/ValidateException","sap/ui/Device","sap/ui/core/library","sap/ui/core/Renderer","sap/m/library","./StepInputRenderer","sap/ui/events/KeyCodes","sap/base/Log"],function(e,t,i,n,a,s,r,u,o,l,h,p,g,_,f,d){"use strict";var c=g.InputType;var m=h.TextAlign;var y=h.ValueState;var b=g.StepInputValidationMode;var V=g.StepInputStepModeType;var v=a.extend("sap.m.StepInput",{metadata:{interfaces:["sap.ui.core.IFormContent"],library:"sap.m",designtime:"sap/m/designtime/StepInput.designtime",properties:{min:{type:"float",group:"Data"},max:{type:"float",group:"Data"},step:{type:"float",group:"Data",defaultValue:1},stepMode:{type:"sap.m.StepInputStepModeType",group:"Data",defaultValue:V.AdditionAndSubtraction},largerStep:{type:"float",group:"Data",defaultValue:2},value:{type:"float",group:"Data",defaultValue:0},name:{type:"string",group:"Misc",defaultValue:null},placeholder:{type:"string",group:"Misc",defaultValue:null},required:{type:"boolean",group:"Misc",defaultValue:false},width:{type:"sap.ui.core.CSSSize",group:"Dimension"},valueState:{type:"sap.ui.core.ValueState",group:"Data",defaultValue:y.None},valueStateText:{type:"string",group:"Misc",defaultValue:null},editable:{type:"boolean",group:"Behavior",defaultValue:true},enabled:{type:"boolean",group:"Behavior",defaultValue:true},displayValuePrecision:{type:"int",group:"Data",defaultValue:0},description:{type:"string",group:"Misc",defaultValue:null},fieldWidth:{type:"sap.ui.core.CSSSize",group:"Appearance",defaultValue:"50%"},textAlign:{type:"sap.ui.core.TextAlign",group:"Appearance",defaultValue:m.End},validationMode:{type:"sap.m.StepInputValidationMode",group:"Misc",defaultValue:b.FocusOut}},aggregations:{_input:{type:"sap.ui.core.Control",multiple:false,visibility:"hidden"}},associations:{ariaLabelledBy:{type:"sap.ui.core.Control",multiple:true,singularName:"ariaLabelledBy"},ariaDescribedBy:{type:"sap.ui.core.Control",multiple:true,singularName:"ariaDescribedBy"}},events:{change:{parameters:{value:{type:"string"}}}},dnd:{draggable:false,droppable:true}},constructor:function(e,t){a.prototype.constructor.apply(this,arguments);if(this.getEditable()){this._getOrCreateDecrementButton();this._getOrCreateIncrementButton()}if(typeof e!=="string"){t=e}if(t&&t.value===undefined){this.setValue(this._getDefaultValue(undefined,t.max,t.min))}}});var I=sap.ui.getCore().getLibraryResourceBundle("sap.m");v.STEP_INPUT_INCREASE_BTN_TOOLTIP=I.getText("STEP_INPUT_INCREASE_BTN");v.STEP_INPUT_DECREASE_BTN_TOOLTIP=I.getText("STEP_INPUT_DECREASE_BTN");v.INITIAL_WAIT_TIMEOUT=500;v.ACCELLERATION=.8;v.MIN_WAIT_TIMEOUT=50;v.INITIAL_SPEED=120;v._TOLERANCE=10;var T=["enabled","editable","name","placeholder","required","valueStateText","description","fieldWidth","textAlign"];var E=p.extend(n);E.apiVersion=2;E.writeInnerAttributes=function(e,t){var i=t.getParent(),n=this.getAccessibilityState(t);e.attr("type",t.getType().toLowerCase());if(sap.ui.getCore().getConfiguration().getRTL()){e.attr("dir","ltr")}n.disabled=null;e.accessibilityState(i,n)};E.getAccessibilityState=function(e){var t=n.getAccessibilityState(e),i=e.getParent(),a=i._getMin(),s=i._getMax(),u=i.getValue(),o=i.getDescription(),l=i.getAriaLabelledBy(),h=r.getReferencingLabels(i),p=i.getAriaDescribedBy().join(" "),g;t.valuenow=u;if(o){l.push(i._getInput().getId()+"-descr")}g=h.concat(l).join(" ");if(typeof a==="number"){t.valuemin=a}if(typeof s==="number"){t.valuemax=s}if(!i.getEditable()){t.readonly=true}if(p){t.describedby=p}if(g){t.labelledby=g}return t};var S=t.extend("sap.m.internal.NumericInput",{metadata:{library:"sap.m"},constructor:function(e,i){return t.apply(this,arguments)},renderer:E});S.prototype.onBeforeRendering=function(){i.prototype.onBeforeRendering.call(this);this.setWidth("100%");this._deregisterEvents()};S.prototype.setValue=function(e){t.prototype.setValue.apply(this,arguments);if(this.getDomRef()){this.getDomRef("inner").setAttribute("aria-valuenow",e)}return this};u.call(v.prototype);v.prototype.init=function(){this._iRealPrecision=0;this._attachChange();this._bPaste=false;this._bNeedsVerification=false;this._bValueStatePreset=true;this._onmousewheel=this._onmousewheel.bind(this);window.addEventListener("contextmenu",function(e){if(this._btndown===false&&e.target.className.indexOf("sapMInputBaseIconContainer")!==-1){e.preventDefault()}}.bind(this))};v.prototype.onBeforeRendering=function(){var e=this._getMin(),t=this._getMax(),i=this._sOriginalValue||this.getValue(),n=this.getEditable();this._iRealPrecision=this._getRealValuePrecision();this._getInput().setValue(this._getFormattedValue(i));this._getInput().setValueState(this.getValueState());this._getInput().setTooltip(this.getTooltip());this._getOrCreateDecrementButton().setVisible(n);this._getOrCreateIncrementButton().setVisible(n);this._disableButtons(i,t,e);this.$().off(l.browser.firefox?"DOMMouseScroll":"mousewheel",this._onmousewheel);if(this._bNeedsVerification&&!this._bValueStatePreset){this._verifyValue();this._bNeedsVerification=false}};v.prototype.onAfterRendering=function(){this.$().on(l.browser.firefox?"DOMMouseScroll":"mousewheel",this._onmousewheel)};v.prototype.exit=function(){this.$().off(l.browser.firefox?"DOMMouseScroll":"mousewheel",this._onmousewheel);this._sOriginalValue=null};v.prototype.setProperty=function(e,t,i){a.prototype.setProperty.call(this,e,t,i);if(T.indexOf(e)>-1){this._getInput().setProperty(e,this.getProperty(e),i)}return this};v.prototype.setValidationMode=function(e){if(this.getValidationMode()!==e){switch(e){case b.FocusOut:this._detachLiveChange();break;case b.LiveChange:this._attachLiveChange();break}this.setProperty("validationMode",e)}return this};v.prototype.setMin=function(e){if(e!==undefined&&!this._validateOptionalNumberProperty("min",e)){return this}return this.setProperty("min",e)};v.prototype.setMax=function(e){if(e!==undefined&&!this._validateOptionalNumberProperty("max",e)){return this}return this.setProperty("max",e)};v.prototype._validateOptionalNumberProperty=function(e,t){if(this._isNumericLike(t)){return true}d.error("The value of property '"+e+"' must be a number");return false};v.prototype.setDisplayValuePrecision=function(e){var t;if(D(e)){t=parseInt(e)}else{t=0;d.warning(this+": ValuePrecision ("+e+") is not correct. It should be a number between 0 and 20! Setting the default ValuePrecision:0.")}return this.setProperty("displayValuePrecision",t)};v.prototype._getIncrementButton=function(){var e=this._getInput().getAggregation("_endIcon")||[];var t=null;if(e.length){t=e[e.length-1]}return t};v.prototype._getDecrementButton=function(){var e=this._getInput().getAggregation("_beginIcon");return e?e[0]:null};v.prototype._createIncrementButton=function(){var e=this._getInput().addEndIcon({src:s.getIconURI("add"),id:this.getId()+"-incrementBtn",noTabStop:true,decorative:false,press:this._handleButtonPress.bind(this,1),tooltip:v.STEP_INPUT_INCREASE_BTN_TOOLTIP});e.getEnabled=function(){return!this._shouldDisableIncrementButton(Number(this._getInput().getValue()),this._getMax())}.bind(this);e.$().attr("tabindex","-1");this._attachEvents(e,true);e.addEventDelegate({onAfterRendering:function(){e.$().attr("tabindex","-1")}});return e};v.prototype._createDecrementButton=function(){var e=this._getInput().addBeginIcon({src:s.getIconURI("less"),id:this.getId()+"-decrementBtn",noTabStop:true,decorative:false,press:this._handleButtonPress.bind(this,-1),tooltip:v.STEP_INPUT_DECREASE_BTN_TOOLTIP});e.getEnabled=function(){return!this._shouldDisableDecrementButton(Number(this._getInput().getValue()),this._getMin())}.bind(this);e.$().attr("tabindex","-1");this._attachEvents(e,false);e.addEventDelegate({onAfterRendering:function(){e.$().attr("tabindex","-1")}});return e};v.prototype._getInput=function(){if(!this.getAggregation("_input")){var e=new S({id:this.getId()+"-input",textAlign:this.getTextAlign(),type:c.Number,editable:this.getEditable(),enabled:this.getEnabled(),description:this.getDescription(),fieldWidth:this.getFieldWidth(),liveChange:this._inputLiveChangeHandler});this.setAggregation("_input",e)}return this.getAggregation("_input")};v.prototype._changeValue=function(e){if(this._fTempValue!=this._fOldValue||e){this.setValue(this._fTempValue);this.fireChange({value:this._fTempValue})}else{this._applyValue(this._fTempValue);this._disableButtons(Number(this._getInput().getValue()),this._getMax(),this._getMin())}return this};v.prototype._handleButtonPress=function(e){if(!this._bSpinStarted){this._bDelayedEventFire=false;this._changeValueWithStep(e);this._btndown=false;this._changeValue()}else{this._bSpinStarted=false}this._bNeedsVerification=true;return this};v.prototype._changeValueWithStep=function(e){var t,i;if(isNaN(this._fTempValue)||this._fTempValue===undefined){this._fTempValue=this.getValue()}i=this._checkInputValue();this._fTempValue+=i;t=e!==0?this._calculateNewValue(e):this._fTempValue;if(e!==0||i!==0||this._bDelayedEventFire){this._fTempValue=t}if(this._bDelayedEventFire){this._applyValue(t);this._disableButtons(Number(this._getFormattedValue(t)),this._getMax(),this._getMin());this._bNeedsVerification=true}return this};v.prototype._disableButtons=function(e,t,i){if(!this._isNumericLike(e)){return}var n=this._getIncrementButton(),a=this._getDecrementButton(),s=this._shouldDisableDecrementButton(e,i),r=this._shouldDisableIncrementButton(e,t);a&&a.toggleStyleClass("sapMStepInputIconDisabled",s);n&&n.toggleStyleClass("sapMStepInputIconDisabled",r);return this};v.prototype._shouldDisableDecrementButton=function(e,t){var i=this._isNumericLike(t),n=this.getEnabled(),a=i&&t>=e;return n?a:true};v.prototype._shouldDisableIncrementButton=function(e,t){var i=this._isNumericLike(t),n=this.getEnabled(),a=i&&t<=e;return n?a:true};v.prototype._verifyValue=function(){var e=this._getMin(),t=this._getMax(),i=parseFloat(this._getInput().getValue()),n=sap.ui.getCore().getLibraryResourceBundle("sap.ui.core"),a=this.getBinding("value"),s=a&&a.getType&&a.getType(),r=s&&s.oConstraints&&s.oConstraints.maximum,u=s&&s.oConstraints&&s.oConstraints.minimum,l,h=[],p=false,g;if(!this._isNumericLike(i)){return}g=this;do{p=g.hasListeners("validationError");g=g.getEventingParent()}while(g&&!p);if(this._isMoreThanMax(i)){if(p&&r){return}l=n.getText("EnterNumberMax",[t]);h.push("maximum")}else if(this._isLessThanMin(i)){if(p&&u){return}l=n.getText("EnterNumberMin",[e]);h.push("minimum")}else if(this._areFoldChangeRequirementsFulfilled()&&i%this.getStep()!==0){l=n.getText("Float.Invalid")}if(l){this.setProperty("valueState",y.Error,true);this._getInput().setValueState(y.Error);this._getInput().setValueStateText(l);if(p){this.fireValidationError({element:this,exception:new o(l,h),id:this.getId(),message:l,property:"value"})}}else{this.setProperty("valueState",y.None,true);this._getInput().setValueState(y.None)}};v.prototype.setValueState=function(e){this._bValueStatePreset=true;this.setProperty("valueState",e);this._getInput().setValueState(e);return this};v.prototype.setValue=function(e){var t;if(isNaN(e)||e===null){e=this._getDefaultValue(undefined,this._getMax(),this._getMin())}else{e=Number(e)}if(!this._validateOptionalNumberProperty("value",e)){return this}this._sOriginalValue=e;this._applyValue(e);this._disableButtons(Number(this._getInput().getValue()),this._getMax(),this._getMin());if(e!==this._fOldValue){this._fOldValue=e;t=this.setProperty("value",e)}else{t=this}this._iRealPrecision=this._getRealValuePrecision();this._fTempValue=e;this._bValueStatePreset=false;return t};v.prototype._getFormattedValue=function(e){var t=this.getDisplayValuePrecision(),i,n;if(e==undefined){e=this.getValue()}if(t<=0){return parseFloat(e).toFixed(0)}n=e.toString().split(".");if(n.length===2){i=n[1].length;if(i>t){return parseFloat(e).toFixed(t)}return n[0]+"."+this._padZeroesRight(n[1],t)}else{return e.toString()+"."+this._padZeroesRight("0",t)}};v.prototype._padZeroesRight=function(e,t){var i="",n=e.length;for(var a=n;a<t;a++){i=i+"0"}i=e+i;return i};v.prototype._checkInputValue=function(){var e=this._getInput().getValue(),t=0;if(e===""){e=this._getDefaultValue(e,this._getMax(),this._getMin()).toString()}if(this.getDisplayValuePrecision()===0){e=Math.round(Number(e.toLowerCase().split("e")[0])).toString()}if(this._getFormattedValue(this._fTempValue)!==e){t=Number(e)-this._fTempValue}return t};v.prototype.onsappageup=function(e){e.preventDefault();if(this.getEditable()){this._bDelayedEventFire=true;this._changeValueWithStep(this.getLargerStep())}};v.prototype.onsappagedown=function(e){e.preventDefault();if(this.getEditable()){this._bDelayedEventFire=true;this._changeValueWithStep(-this.getLargerStep())}};v.prototype.onsappageupmodifiers=function(e){if(this.getEditable()&&this._isNumericLike(this._getMax())&&!(e.ctrlKey||e.metaKey||e.altKey)&&e.shiftKey){this._bDelayedEventFire=true;this._fTempValue=Number(this._getInput().getValue());this._changeValueWithStep(this._getMax()-this._fTempValue)}};v.prototype.onsappagedownmodifiers=function(e){if(this.getEditable()&&this._isNumericLike(this._getMin())&&!(e.ctrlKey||e.metaKey||e.altKey)&&e.shiftKey){this._bDelayedEventFire=true;this._fTempValue=Number(this._getInput().getValue());this._changeValueWithStep(-(this._fTempValue-this._getMin()))}};v.prototype.onsapup=function(e){e.preventDefault();if(this.getEditable()){this._bDelayedEventFire=true;this._changeValueWithStep(1);e.setMarked()}};v.prototype.onsapdown=function(e){e.preventDefault();if(this.getEditable()){this._bDelayedEventFire=true;this._changeValueWithStep(-1);e.setMarked()}};v.prototype._onmousewheel=function(e){var t=this.getDomRef().contains(document.activeElement);if(t&&this.getEditable()&&this.getEnabled()){e.preventDefault();var i=e.originalEvent,n=i.detail?-i.detail>0:i.wheelDelta>0;this._bDelayedEventFire=true;this._changeValueWithStep(n?1:-1)}};v.prototype.onkeydown=function(e){var t,i,n;if(!this.getEditable()){return}if(e.which===f.ENTER&&this._fTempValue!==this.getValue()){e.preventDefault();this._changeValue();return}this._bPaste=(e.ctrlKey||e.metaKey)&&e.which===f.V;if(e.which===f.ARROW_UP&&!e.altKey&&e.shiftKey&&(e.ctrlKey||e.metaKey)){i=this._getMax();this._fTempValue=Number(this._getInput().getValue());t=i!==undefined?i-this._fTempValue:0}else if(e.which===f.ARROW_DOWN&&!e.altKey&&e.shiftKey&&(e.ctrlKey||e.metaKey)){n=this._getMin();this._fTempValue=Number(this._getInput().getValue());t=n!==undefined?-(this._fTempValue-n):0}else if(e.which===f.ARROW_UP&&!(e.ctrlKey||e.metaKey||e.altKey)&&e.shiftKey){t=this.getLargerStep()}else if(e.which===f.ARROW_DOWN&&!(e.ctrlKey||e.metaKey||e.altKey)&&e.shiftKey){t=-this.getLargerStep()}else if(e.which===f.ARROW_UP&&(e.ctrlKey||e.metaKey)){t=1}else if(e.which===f.ARROW_DOWN&&(e.ctrlKey||e.metaKey)){t=-1}else if(e.which===f.ARROW_UP&&e.altKey){t=1}else if(e.which===f.ARROW_DOWN&&e.altKey){t=-1}if(t!==undefined){e.preventDefault();if(t!==0){this._bDelayedEventFire=true;this._changeValueWithStep(t)}}};v.prototype.onsapescape=function(e){if(this._fOldValue!==this._fTempValue){this._applyValue(this._fOldValue);this._bNeedsVerification=true}};v.prototype._attachLiveChange=function(){this._getInput().attachLiveChange(this._liveChange,this)};v.prototype._detachLiveChange=function(){this._getInput().detachLiveChange(this._liveChange,this)};v.prototype._attachChange=function(){this._getInput().attachChange(this._change,this)};v.prototype._liveChange=function(){this._disableButtons(Number(this._getInput().getValue()),this._getMax(),this._getMin());this._verifyValue()};v.prototype._change=function(e){var t;var i=this._getInput().getValue();var n=this._isLessThanMin(i)||this._isMoreThanMax(i);if(!this._isButtonFocused()){if(!this._btndown||n){t=Number(this._getFormattedValue());if(this._fOldValue===undefined){this._fOldValue=t}this._bDelayedEventFire=false;this._changeValueWithStep(0);this._changeValue();this._bNeedsVerification=true}else{this._fTempValue=Number(this._getInput().getValue())}}};v.prototype._isMoreThanMax=function(e){return this._isNumericLike(this._getMax())&&this._getMax()<e};v.prototype._isLessThanMin=function(e){return this._isNumericLike(this._getMin())&&this._getMin()>e};v.prototype._applyValue=function(e){this._getInput().setValue(this._getFormattedValue(e))};v.prototype._calculateNewValue=function(e,t){if(t===undefined){t=e<0?false:true}var i=this.getStep(),n=this._getMax(),a=this._getMin(),s=parseFloat(this._getDefaultValue(this._getInput().getValue(),n,a)),r=t?1:-1,u=Math.abs(i)*Math.abs(e),o=s+r*u,l;if(this._areFoldChangeRequirementsFulfilled()){o=l=this._calculateClosestFoldValue(s,u,r)}else{l=this._sumValues(this._fTempValue,u,r,this._iRealPrecision)}if(this._isNumericLike(n)&&o>=n){l=n}if(this._isNumericLike(a)&&o<=a){l=a}return l};v.prototype._getRealValuePrecision=function(){var e=this.getValue().toString().split("."),t=this.getStep().toString().split("."),i,n;i=!e[1]?0:e[1].length;n=!t[1]?0:t[1].length;return i>n?i:n};v.prototype._getOrCreateDecrementButton=function(){return this._getDecrementButton()||this._createDecrementButton()};v.prototype._getOrCreateIncrementButton=function(){return this._getIncrementButton()||this._createIncrementButton()};v.prototype._inputLiveChangeHandler=function(e){var t=this.getParent()._restrictCharsWhenDecimal(e);this.setProperty("value",t?t:e.getParameter("newValue"),true)};v.prototype._restrictCharsWhenDecimal=function(e){var t=e.getParameter("value").indexOf("."),i=this.getDisplayValuePrecision(),n=e.getParameter("value"),a;if(t>0&&i>=0){var s=n.split(".")[1],r=s?s.length:0,u=n.split(".")[0],o=i>0?n.substring(n.indexOf(".")+1,n.length):"";if(!this._bPaste){if(r>i){a=u+(i>0?"."+o.substr(0,i):"");this._showWrongValueVisualEffect()}}else{if(n.indexOf(".")){a=n.split(".")[0]+(i>0?"."+s.substring(0,i):"")}this._bPaste=false}}else{a=n}if(this._getInput()._getInputValue()!==a){this._getInput().updateDomValue(a)}return a};v.prototype._showWrongValueVisualEffect=function(){var e=this.getValueState(),t=this._getInput();if(e===y.Error){return}t.setValueState(y.Error);setTimeout(t["setValueState"].bind(t,e),1e3)};v.prototype._getDefaultValue=function(e,t,i){if(e!==""&&e!==undefined){return Number(this._getInput().getValue())}if(this._isNumericLike(i)&&i>0){return i}else if(this._isNumericLike(t)&&t<0){return t}else{return 0}};v.prototype._isNumericLike=function(e){return!isNaN(e)&&e!==null&&e!==""};v.prototype._isInteger=function(e){return e===parseInt(e)};v.prototype._isButtonFocused=function(){return document.activeElement===this._getIncrementButton().getDomRef()||document.activeElement===this._getDecrementButton().getDomRef()};v.prototype._sumValues=function(e,t,i,n){var a=Math.pow(10,n),s=parseInt((e*a).toFixed(1)),r=parseInt((t*a).toFixed(1));return(s+i*r)/a};v.prototype._areFoldChangeRequirementsFulfilled=function(){return this.getStepMode()===V.Multiple&&this.getDisplayValuePrecision()===0&&this._isInteger(this.getStep())&&this._isInteger(this.getLargerStep())};v.prototype._calculateClosestFoldValue=function(e,t,i){var n=Math.floor(e),a=t;do{n+=i;a--}while(n%t!==0&&a);if(n%t!==0){d.error("Wrong next/previous value "+n+" for "+e+", step: "+t+" and sign: "+i,this)}return n};function D(e){return typeof e==="number"&&!isNaN(e)&&e>=0&&e<=20}v.prototype._calcWaitTimeout=function(){this._speed*=v.ACCELLERATION;this._waitTimeout=this._waitTimeout-this._speed<v.MIN_WAIT_TIMEOUT?v.MIN_WAIT_TIMEOUT:this._waitTimeout-this._speed;return this._waitTimeout};v.prototype._spinValues=function(e){this._spinTimeoutId=setTimeout(function(){if(this._btndown){this._bSpinStarted=true;this._bDelayedEventFire=true;this._changeValueWithStep(e?1:-1);this._disableButtons(Number(this._getInput().getValue()),this._getMax(),this._getMin());if(this._getIncrementButton().getEnabled()&&e||this._getDecrementButton().getEnabled()&&!e){this._spinValues(e)}}}.bind(this),this._calcWaitTimeout())};v.prototype._attachEvents=function(e,t){var i={onmousedown:function(e){if(e.button===0&&!this._btndown){this._btndown=true;this._waitTimeout=v.INITIAL_WAIT_TIMEOUT;this._speed=v.INITIAL_SPEED;this._spinValues(t)}}.bind(this),onmouseup:function(e){if(e.button===0){this._bDelayedEventFire=undefined;this._btndown=false;this._stopSpin()}}.bind(this),onmouseout:function(e){if(this._btndown){this._bDelayedEventFire=undefined;this._stopSpin()}}.bind(this),oncontextmenu:function(e){e.stopImmediatePropagation(true);if(e.originalEvent&&e.originalEvent.cancelable){e.preventDefault()}e.stopPropagation()},ontouchend:function(e){if(l.system.phone||l.system.tablet){this._bDelayedEventFire=undefined;this._btndown=false;this._stopSpin()}if(e.originalEvent&&e.originalEvent.cancelable){e.preventDefault()}if(t){this._getIncrementButton().invalidate()}else{this._getDecrementButton().invalidate()}}.bind(this)};e.addDelegate(i,true)};v.prototype._stopSpin=function(){this._resetSpinValues();if(this._bSpinStarted){this._changeValue()}};v.prototype._getMin=function(){var e=this.getBinding("value"),t=e&&e.getType&&e.getType(),i=t&&t.oConstraints&&t.oConstraints.minimum;return i?parseFloat(i):this.getMin()};v.prototype._getMax=function(){var e=this.getBinding("value"),t=e&&e.getType&&e.getType(),i=t&&t.oConstraints&&t.oConstraints.maximum;return i?parseFloat(i):this.getMax()};v.prototype.getIdForLabel=function(){return this._getInput().getIdForLabel()};v.prototype.onfocusout=function(e){if(!this._btndown){this._changeValueWithStep(0);if(this._bDelayedEventFire&&this._fTempValue!==this._fOldValue){this._bDelayedEventFire=undefined;this._changeValue()}}};v.prototype.getFocusDomRef=function(){return this.getAggregation("_input").getFocusDomRef()};v.prototype._resetSpinValues=function(){clearTimeout(this._spinTimeoutId);this._waitTimeout=500;this._speed=120};v.prototype.getAccessibilityInfo=function(){return{type:sap.ui.getCore().getLibraryResourceBundle("sap.m").getText("ACC_CTR_TYPE_STEPINPUT"),description:this.getValue()||"",focusable:this.getEnabled(),enabled:this.getEnabled(),editable:this.getEnabled()&&this.getEditable()}};return v});