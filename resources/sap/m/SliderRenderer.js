/*!
 * UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2019 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["./SliderUtilities"],function(e){"use strict";var t={};t.CSS_CLASS="sapMSlider";t.render=function(e,i){var r=i.getEnabled(),a=i.getTooltip_AsString(),s=t.CSS_CLASS,l=i.getAriaLabelledBy().reduce(function(e,t){return e+" "+t},"");e.write("<div");this.addClass(e,i);if(!r){e.addClass(s+"Disabled")}e.addStyle("width",i.getWidth());e.writeClasses();e.writeStyles();e.writeControlData(i);if(a&&i.getShowHandleTooltip()){e.writeAttributeEscaped("title",i._formatValueByCustomElement(a))}e.write(">");e.write("<div");e.writeAttribute("id",i.getId()+"-inner");this.addInnerClass(e,i);if(!r){e.addClass(s+"InnerDisabled")}e.writeClasses();e.writeStyles();e.write(">");if(i.getProgress()){this.renderProgressIndicator(e,i,l)}this.renderHandles(e,i,l);e.write("</div>");if(i.getEnableTickmarks()){this.renderTickmarks(e,i)}else{this.renderLabels(e,i)}if(i.getName()){this.renderInput(e,i)}e.write("</div>")};t.renderProgressIndicator=function(e,t){e.write("<div");e.writeAttribute("id",t.getId()+"-progress");this.addProgressIndicatorClass(e,t);e.addStyle("width",t._sProgressValue);e.writeClasses();e.writeStyles();e.write(' aria-hidden="true"></div>')};t.renderHandles=function(e,t,i){this.renderHandle(e,t,{id:t.getId()+"-handle",forwardedLabels:i})};t.renderHandle=function(e,t,i){var r=t.getEnabled(),a=t.getUsedTooltips()[0];e.write("<span");if(i&&i.id!==undefined){e.writeAttributeEscaped("id",i.id)}e.writeAttribute("aria-labelledby",(i.forwardedLabels+" "+t.getAggregation("_handlesLabels")[0].getId()).trim());if(t.getShowHandleTooltip()&&!t.getShowAdvancedTooltip()){this.writeHandleTooltip(e,t)}if(t.getInputsAsTooltips()&&a){e.writeAttribute("aria-controls",a.getId())}this.addHandleClass(e,t);e.addStyle(sap.ui.getCore().getConfiguration().getRTL()?"right":"left",t._sProgressValue);this.writeAccessibilityState(e,t);e.writeClasses();e.writeStyles();if(r){e.writeAttribute("tabindex","0")}e.write("></span>")};t.writeHandleTooltip=function(e,t){e.writeAttribute("title",t._formatValueByCustomElement(t.toFixed(t.getValue())))};t.renderInput=function(e,i){e.write('<input type="text"');e.writeAttribute("id",i.getId()+"-input");e.addClass(t.CSS_CLASS+"Input");if(!i.getEnabled()){e.write("disabled")}e.writeClasses();e.writeAttributeEscaped("name",i.getName());e.writeAttribute("value",i._formatValueByCustomElement(i.toFixed(i.getValue())));e.write("/>")};t.writeAccessibilityState=function(e,t){var i=t.getValue(),r=t._isElementsFormatterNotNumerical(i),a=t._formatValueByCustomElement(i),s;if(t._getUsedScale()&&!r){s=a}else{s=t.toFixed(i)}e.writeAccessibilityState(t,{role:"slider",orientation:"horizontal",valuemin:t.toFixed(t.getMin()),valuemax:t.toFixed(t.getMax()),valuenow:s});if(r){e.writeAccessibilityState(t,{valuetext:a})}};t.renderTickmarks=function(i,r){var a,s,l,d,n,o,S,c=r._getUsedScale();if(!r.getEnableTickmarks()||!c){return}o=Math.abs(r.getMin()-r.getMax());S=r.getStep();d=c.getTickmarksBetweenLabels();s=c.calcNumberOfTickmarks(o,S,e.CONSTANTS.TICKMARKS.MAX_POSSIBLE);l=r._getPercentOfValue(this._calcTickmarksDistance(s,r.getMin(),r.getMax(),S));i.write('<ul class="'+t.CSS_CLASS+'Tickmarks">');this.renderTickmarksLabel(i,r,r.getMin());i.write('<li class="'+t.CSS_CLASS+'Tick" style="width: '+l+'%;"></li>');for(a=1;a<s-1;a++){if(d&&a%d===0){n=a*l;this.renderTickmarksLabel(i,r,r._getValueOfPercent(n))}i.write('<li class="'+t.CSS_CLASS+'Tick" style="width: '+l+'%;"></li>')}this.renderTickmarksLabel(i,r,r.getMax());i.write('<li class="'+t.CSS_CLASS+'Tick" style="width: 0;"></li>');i.write("</ul>")};t.renderTickmarksLabel=function(e,i,r){var a=i._getPercentOfValue(r);var s=sap.ui.getCore().getConfiguration().getRTL()?"right":"left";var l;r=i.toFixed(r,i.getDecimalPrecisionOfNumber(i.getStep()));l=i._formatValueByCustomElement(r,"scale");e.write('<li class="'+t.CSS_CLASS+'TickLabel"');e.addStyle(s,a+"%");e.writeStyles();e.write(">");e.write('<div class="'+t.CSS_CLASS+'Label">');e.writeEscaped(l);e.write("</div>");e.write("</li>")};t._calcTickmarksDistance=function(e,t,i,r){var a=Math.abs(t-i),s=Math.floor(a/r),l=Math.ceil(s/e);return t+l*r};t.addClass=function(e,i){e.addClass(t.CSS_CLASS)};t.addInnerClass=function(e,i){e.addClass(t.CSS_CLASS+"Inner")};t.addProgressIndicatorClass=function(e,i){e.addClass(t.CSS_CLASS+"Progress")};t.addHandleClass=function(e,i){e.addClass(t.CSS_CLASS+"Handle")};t.renderLabels=function(e,t){t.getAggregation("_handlesLabels").forEach(e.renderControl,e)};return t},true);