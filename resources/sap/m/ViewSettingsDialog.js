/*!
* UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2018 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
*/
sap.ui.define(["./library","sap/ui/core/Control","sap/ui/core/IconPool","./Toolbar","./CheckBox","./SearchField","./List","./StandardListItem","sap/ui/base/ManagedObject","sap/ui/base/EventProvider","sap/ui/Device","sap/ui/core/InvisibleText","./ViewSettingsDialogRenderer","sap/m/GroupHeaderListItem","sap/base/Log","sap/ui/thirdparty/jquery","sap/ui/dom/jquery/Focusable"],function(t,e,i,s,r,n,o,a,l,g,h,u,d,p,_,f){"use strict";var c=t.ListMode;var m=t.ListType;var I=t.StringFilterOperator;var S="-list-item";var y=e.extend("sap.m.ViewSettingsDialog",{metadata:{library:"sap.m",properties:{title:{type:"string",group:"Behavior",defaultValue:null},sortDescending:{type:"boolean",group:"Behavior",defaultValue:false},groupDescending:{type:"boolean",group:"Behavior",defaultValue:false},filterSearchOperator:{type:"sap.m.StringFilterOperator",group:"Behavior",defaultValue:I.StartsWith}},aggregations:{sortItems:{type:"sap.m.ViewSettingsItem",multiple:true,singularName:"sortItem",bindable:"bindable"},groupItems:{type:"sap.m.ViewSettingsItem",multiple:true,singularName:"groupItem",bindable:"bindable"},filterItems:{type:"sap.m.ViewSettingsItem",multiple:true,singularName:"filterItem",bindable:"bindable"},presetFilterItems:{type:"sap.m.ViewSettingsItem",multiple:true,singularName:"presetFilterItem",bindable:"bindable"},customTabs:{type:"sap.m.ViewSettingsCustomTab",multiple:true,singularName:"customTab",bindable:"bindable"}},associations:{selectedSortItem:{type:"sap.m.ViewSettingsItem",multiple:false},selectedGroupItem:{type:"sap.m.ViewSettingsItem",multiple:false},selectedPresetFilterItem:{type:"sap.m.ViewSettingsItem",multiple:false}},events:{confirm:{parameters:{sortItem:{type:"sap.m.ViewSettingsItem"},sortDescending:{type:"boolean"},groupItem:{type:"sap.m.ViewSettingsItem"},groupDescending:{type:"boolean"},presetFilterItem:{type:"sap.m.ViewSettingsItem"},filterItems:{type:"sap.m.ViewSettingsItem[]"},filterKeys:{type:"object",deprecated:true},filterCompoundKeys:{type:"object"},filterString:{type:"string"}}},cancel:{},resetFilters:{},filterDetailPageOpened:{parameters:{parentFilterItem:{type:"sap.m.ViewSettingsFilterItem"}}}}}});y.prototype.init=function(){this._rb=sap.ui.getCore().getLibraryResourceBundle("sap.m");this._sDialogWidth="350px";this._sDialogHeight="434px";this._bAppendedToUIArea=false;this._showSubHeader=false;this._filterDetailList=undefined;this._vContentPage=-1;this._oContentItem=null;this._oPreviousState={};this._sCustomTabsButtonsIdPrefix="-custom-button-";this._sTitleLabelId=this.getId()+"-title";this._aggregationToListItems("sortItems",{text:{listProp:"title"},selected:{}},{tooltip:{}},{type:m.Active},{mode:c.SingleSelectLeft,includeItemInSelection:true,selectionChange:function(t){var e=t.getParameter("listItem"),i=this.getSortItems(),s=this._getVSItem(e),r;s.setProperty("selected",t.getParameter("selected"),true,false);this.setAssociation("selectedSortItem",s,true);for(r=0;r<i.length;r++){if(s!==i[r]){i[r].setProperty("selected",false,true,false)}}}.bind(this)})};y.prototype.exit=function(){this._rb=null;this._sDialogWidth=null;this._sDialogHeight=null;this._bAppendedToUIArea=null;this._showSubHeader=null;this._vContentPage=null;this._oContentItem=null;this._oPreviousState=null;this._sortContent=null;this._groupContent=null;this._filterContent=null;this._sCustomTabsButtonsIdPrefix=null;this._fnFilterSearchCallback=null;if(this._bAppendedToUIArea&&this._dialog){var t=sap.ui.getCore().getStaticAreaRef();t=sap.ui.getCore().getUIArea(t);t.removeContent(this._dialog,true)}if(this._dialog){this._dialog.destroy();this._dialog=null}if(this._navContainer){this._navContainer.destroy();this._navContainer=null}if(this._titleLabel){this._titleLabel.destroy();this._titleLabel=null}if(this._page1){this._page1.destroy();this._page1=null}if(this._header){this._header.destroy();this._header=null}if(this._resetButton){this._resetButton.destroy();this._resetButton=null}if(this._subHeader){this._subHeader.destroy();this._subHeader=null}if(this._segmentedButton){this._segmentedButton.destroy();this._segmentedButton=null}if(this._sortButton){this._sortButton.destroy();this._sortButton=null}if(this._groupButton){this._groupButton.destroy();this._groupButton=null}if(this._filterButton){this._filterButton.destroy();this._filterButton=null}if(this._sortList){this._sortList.destroy();this._sortList=null}if(this._ariaSortListInvisibleText){this._ariaSortListInvisibleText.destroy();this._ariaSortListInvisibleText=null}if(this._sortOrderList){this._sortOrderList.destroy();this._sortOrderList=null;this._ariaSortOrderInvisibleText.destroy();this._ariaSortOrderInvisibleText=null}if(this._oGroupingNoneItem){this._oGroupingNoneItem.destroy();this._oGroupingNoneItem=null}if(this._groupList){this._groupList.destroy();this._groupList=null;this._ariaGroupListInvisibleText.destroy();this._ariaGroupListInvisibleText=null}if(this._groupOrderList){this._groupOrderList.destroy();this._groupOrderList=null;this._ariaGroupOrderInvisibleText.destroy();this._ariaGroupOrderInvisibleText=null}if(this._presetFilterList){this._presetFilterList.destroy();this._presetFilterList=null}if(this._filterList){this._filterList.destroy();this._filterList=null}if(this._page2){this._page2.destroy();this._page2=null}if(this._detailTitleLabel){this._detailTitleLabel.destroy();this._detailTitleLabel=null}if(this._filterDetailList){this._filterDetailList.destroy();this._filterDetailList=null}if(this._oStringFilter){this._oStringFilter=null}};y.prototype._aggregationToListItems=function(t,e,i,s,r){var n=this._getListType(t),o="_"+n+"List";if(!this.mToList){this.mToList={}}this.mToList[n]={itemPropertyMap:e,itemAggregationMap:i,listItemOptions:s,listOptions:r,listName:o}};y.prototype._getListType=function(t){return t.replace("Items","")};y.prototype._createList=function(t){var e=this.getId()+"-"+t+"list",i=new o(e,this.mToList[t].listOptions),s=this._rb.getText("VIEWSETTINGS_SORT_OBJECT"),r=new p({title:s});i.addItem(r);this[this.mToList[t].listName]=i;return i};y.prototype._getList=function(t){if(!this.mToList||!this.mToList[t]){return}return this[this.mToList[t].listName]};y.prototype._createListItem=function(t,e){var i=this.mToList[t].listItemOptions,s=this.mToList[t].itemPropertyMap,r=this.mToList[t].itemAggregationMap,n,o;for(var l in s){if(s.hasOwnProperty(l)){n=s[l].listProp||l;i[n]=this._createListItemPropertyValue(t,l,e)}}for(var g in r){if(r.hasOwnProperty(g)){i[g]=e.getAggregation(g)}}o=new a(i).data("item",e);return o};y.prototype._createListItemPropertyValue=function(t,e,i){var s=i.getMetadata().getAllProperties()[e].get(i),r=this.mToList[t].itemPropertyMap[e].fn;return r?r(s):s};y.prototype._getListItem=function(t,e){var i=this._getList(t).getItems().filter(function(t){return t.data("item")===e});return i.length?i[0]:null};y.prototype._getVSItem=function(t){return t.data("item")};y.prototype.addCustomTab=function(t){var e=t.getId();if(e==="sort"||e==="filter"||e==="group"){throw'Id "'+e+'" is reserved and cannot be used as custom tab id.'}this.addAggregation("customTabs",t);return this};y.prototype.invalidate=function(){if(this._dialog&&(!arguments[0]||arguments[0]&&arguments[0].getId()!==this.getId()+"-dialog")){this._dialog.invalidate(arguments)}};y.prototype.addStyleClass=function(){var t=this._getDialog();t.addStyleClass.apply(t,arguments);return this};y.prototype.removeStyleClass=function(){var t=this._getDialog();t.removeStyleClass.apply(t,arguments);return this};y.prototype.toggleStyleClass=function(){var t=this._getDialog();t.toggleStyleClass.apply(t,arguments);return this};y.prototype.hasStyleClass=function(){var t=this._getDialog();return t.hasStyleClass.apply(t,arguments)};y.prototype.getDomRef=function(){if(this._dialog){return this._dialog.getDomRef.apply(this._dialog,arguments)}else{return null}};y.prototype.setTitle=function(t){this._getTitleLabel().setText(t);this.setProperty("title",t,true);return this};y.prototype.addAggregation=function(t,i,s){e.prototype.addAggregation.apply(this,arguments);var r=this._getListType(t);if(this.mToList[r]){var n=this._createListItem(r,i);var o=this._getList(r);if(!o){o=this._createList(r)}o.addItem(n);this._attachItemPropertyChange(r,i)}else{this._attachItemEventHandlers(t,i)}return this};y.prototype.insertAggregation=function(t,i,s,r){e.prototype.insertAggregation.apply(this,arguments);var n=this._getListType(t);if(this.mToList[n]){var o=this._createListItem(n,i);var a=this._getList(n);if(!a){a=this._createList(n)}a.insertItem(o,s);this._attachItemPropertyChange(n,i)}else{this._attachItemEventHandlers(t,i)}return this};y.prototype.removeAggregation=function(t,i,s){L.call(this,t,i);var r=e.prototype.removeAggregation.apply(this,arguments);var n=this._getListType(t);if(this.mToList[n]){var o=this._getListItem(n,r);var a=this._getList(n);var l=a.removeItem(o);l.destroy();this._detachItemPropertyChange(r)}return r};y.prototype.removeAllAggregation=function(t,i){L.call(this);var s=e.prototype.removeAllAggregation.apply(this,arguments);var r=this._getListType(t);if(this.mToList[r]){var n=this._getList(r);if(n){var o=n.removeAllItems();o.forEach(function(t){t.destroy()})}s.forEach(function(t){this._detachItemPropertyChange(t)},this)}return s};y.prototype.destroyAggregation=function(t,i){L.call(this);e.prototype.destroyAggregation.apply(this,arguments);var s=this._getListType(t);if(this.mToList[s]){var r=this._getList(s);if(r){r.destroyItems()}}return this};y.prototype._detachItemPropertyChange=function(t){delete g.getEventList(t)["itemPropertyChanged"]};y.prototype._attachItemPropertyChange=function(t,e){e.attachEvent("itemPropertyChanged",function i(s){var r,n,o,a,l,g;r=this._getListItem(t,e);n=s.getParameter("propertyKey");if(!this.mToList[t].itemPropertyMap[n]){return}o=this.mToList[t].itemPropertyMap[n].listProp||n;a=s.getParameter("propertyValue");l=this.mToList[t].itemPropertyMap[n].fn;g=l?l(a):a;r.getMetadata().getAllProperties()[o].set(r,g)},this)};y.prototype._attachItemEventHandlers=function(t,e){if(t!=="groupItems"&&t!=="filterItems"){return this}var i=t.replace("Items","");i=i.charAt(0).toUpperCase()+i.slice(1);e.attachEvent("itemPropertyChanged",function(t,e){if(t==="filterItems"&&e.getParameter("changedItem").getParent().getMetadata().getName()==="sap.m.ViewSettingsFilterItem"){if(e.getParameter("propertyKey")!=="selected"){if(this._vContentPage===3&&this._oContentItem){this._setFilterDetailTitle(this._oContentItem);this._initFilterDetailItems(this._oContentItem)}}else{if(this._filterDetailList){var s=this._filterDetailList.getItems();s.forEach(function(t){if(t.data("item").getId()===e.getParameter("changedItem").getId()){t.setSelected(e.getParameter("propertyValue"))}});this._updateSelectAllCheckBoxState()}}this._updateFilterCounters()}else{if(typeof this["_init"+i+"Content"]==="function"){this["_init"+i+"Content"]()}if(typeof this["_init"+i+"Items"]==="function"){this["_init"+i+"Items"]()}}}.bind(this,t));e.attachEvent("filterDetailItemsAggregationChange",function(t){if(this._vContentPage===3&&this._oContentItem){this._setFilterDetailTitle(this._oContentItem);this._initFilterDetailItems(this._oContentItem)}}.bind(this));return this};y.prototype._setFilterDetailTitle=function(t){this._getDetailTitleLabel().setText(this._rb.getText("VIEWSETTINGS_TITLE_FILTERBY")+" "+t.getText())};y.prototype.updateAggregation=function(t){e.prototype.updateAggregation.apply(this,arguments);if(t!=="groupItems"&&t!=="filterItems"){return this}var i=t.replace("Items","");i=i.charAt(0).toUpperCase()+i.slice(1);if(typeof this["_init"+i+"Content"]==="function"){this["_init"+i+"Content"]()}if(typeof this["_init"+i+"Items"]==="function"){this["_init"+i+"Items"]()}};y.prototype.addSortItem=function(t){this.addAggregation("sortItems",t);if(t.getSelected()){this.setSelectedSortItem(t)}return this};y.prototype.addGroupItem=function(t){this.addAggregation("groupItems",t);if(t.getSelected()){this.setSelectedGroupItem(t)}return this};y.prototype.addPresetFilterItem=function(t){this.addAggregation("presetFilterItems",t);if(t.getSelected()){this.setSelectedPresetFilterItem(t)}return this};y.prototype.setSelectedSortItem=function(t){var e=this.getSortItems(),i=0,s=b(t,e,"Could not set selected sort item. Item is not found: '"+t+"'");if(v(s)){for(i=0;i<e.length;i++){if(e[i].getId()!==s.getId()){e[i].setProperty("selected",false,true)}}if(s.getProperty("selected")!==true){s.setProperty("selected",true,true)}if(this._getDialog().isOpen()){this._updateListSelection(this._sortList,s)}this.setAssociation("selectedSortItem",s,true)}return this};y.prototype.setSelectedGroupItem=function(t){var e=this.getGroupItems(),i=0,s=b(t,e,"Could not set selected group item. Item is not found: '"+t+"'");if(!s&&!t){s=this._oGroupingNoneItem}if(v(s)){for(i=0;i<e.length;i++){e[i].setProperty("selected",false,true)}s.setProperty("selected",true,true);if(this._getDialog().isOpen()){this._updateListSelection(this._groupList,s)}this.setAssociation("selectedGroupItem",s,true)}return this};y.prototype.setSelectedPresetFilterItem=function(t){var e=this.getPresetFilterItems(),i=0,s=b(t,e,"Could not set selected preset filter item. Item is not found: '"+t+"'");if(v(s)){for(i=0;i<e.length;i++){e[i].setProperty("selected",false,true)}s.setProperty("selected",true,true);this._clearSelectedFilters();this.setAssociation("selectedPresetFilterItem",s,true)}return this};y.prototype.open=function(t){if(!this.getParent()&&!this._bAppendedToUIArea){var e=sap.ui.getCore().getStaticAreaRef();e=sap.ui.getCore().getUIArea(e);e.addContent(this._getDialog(),true);this._bAppendedToUIArea=true}if(t&&this._vContentPage===3){setTimeout(this._getNavContainer()["to"].bind(this._getNavContainer(),this._getPage1().getId(),"show"),0)}this._initDialogContent(t);this._oPreviousState={sortItem:sap.ui.getCore().byId(this.getSelectedSortItem()),sortDescending:this.getSortDescending(),groupItem:sap.ui.getCore().byId(this.getSelectedGroupItem()),groupDescending:this.getGroupDescending(),presetFilterItem:sap.ui.getCore().byId(this.getSelectedPresetFilterItem()),filterKeys:this.getSelectedFilterKeys(),filterCompoundKeys:this.getSelectedFilterCompoundKeys(),navPage:this._getNavContainer().getCurrentPage(),contentPage:this._vContentPage,contentItem:this._oContentItem};if(h.system.desktop){this._getDialog().attachEventOnce("afterOpen",function(){var t=this._getNavContainer().getCurrentPage(),e;if(t){e=t.$("cont").firstFocusableDomRef();if(e){if(f(e).hasClass("sapMListUl")){var i=f(e).find(".sapMLIB");i.length&&i[0].focus();return}e.focus()}}},this)}this._getDialog().open();return this};y.prototype.getSelectedFilterItems=function(){var t=[],e=this.getFilterItems(),i,s=true,r=0,n;for(;r<e.length;r++){if(e[r]instanceof sap.m.ViewSettingsCustomItem){if(e[r].getSelected()){t.push(e[r])}}else if(e[r]instanceof sap.m.ViewSettingsFilterItem){i=e[r].getItems();s=e[r].getMultiSelect();for(n=0;n<i.length;n++){if(i[n].getSelected()){t.push(i[n]);if(!s){break}}}}}return t};y.prototype.getSelectedFilterString=function(){var t="",e,i=this.getSelectedPresetFilterItem(),s=this.getFilterItems(),r,n=true,o=0,a;if(i){t=this._rb.getText("VIEWSETTINGS_FILTERTEXT").concat(" "+sap.ui.getCore().byId(i).getText())}else{for(;o<s.length;o++){if(s[o]instanceof sap.m.ViewSettingsCustomItem){if(s[o].getSelected()){t+=s[o].getText()+", "}}else if(s[o]instanceof sap.m.ViewSettingsFilterItem){r=s[o].getItems();n=s[o].getMultiSelect();e="";for(a=0;a<r.length;a++){if(r[a].getSelected()){e+=r[a].getText()+", ";if(!n){break}}}e=e.substring(0,e.length-2);if(e){e=" ("+e+")";t+=s[o].getText()+e+", "}}}t=t.substring(0,t.length-2);if(t){t=this._rb.getText("VIEWSETTINGS_FILTERTEXT").concat(" "+t)}}return t};y.prototype.getSelectedFilterKeys=function(){var t={},e=this.getSelectedFilterItems(),i=0;for(;i<e.length;i++){t[e[i].getKey()]=e[i].getSelected()}return t};y.prototype.getSelectedFilterCompoundKeys=function(){var t={},e=this.getSelectedFilterItems(),i,s,r,n;for(i=0;i<e.length;i++){n=e[i];if(n instanceof sap.m.ViewSettingsCustomItem){s=n.getKey();t[s]=n.getSelected()}else{s=n.getKey();r=n.getParent().getKey();if(!t[r]){t[r]={}}t[r][s]=n.getSelected()}}return t};y.prototype.setSelectedFilterKeys=function(t){var e=this.getFilterItems(),i={},s,r,n,o,a;if(Object.keys(t).length){this._clearPresetFilter()}for(var l in t){s=null;if(t.hasOwnProperty(l)){for(n=0;n<e.length;n++){if(e[n]instanceof sap.m.ViewSettingsCustomItem){if(e[n].getKey()===l){s=e[n];e[n].setProperty("selected",t[l],true)}}else if(e[n]instanceof sap.m.ViewSettingsFilterItem){i=e[n].getItems();r=e[n].getMultiSelect();for(o=0;o<i.length;o++){if(i[o].getKey()===l){s=i[o];if(!r){for(a=0;a<i.length;a++){i[a].setProperty("selected",false,true)}}break}}}if(s){break}}if(s===null){_.warning('Cannot set state for key "'+l+'" because there is no filter with these keys');continue}s.setProperty("selected",t[l],true)}}return this};y.prototype.setSelectedFilterCompoundKeys=function(t){var e=this.getFilterItems();var i=function(t,e,i){if(!e.hasOwnProperty(i)){return}var s=C(t,i);return s};if(Object.keys(t).length){this._clearPresetFilter()}for(var s in t){var r=i(e,t,s);if(!r){_.warning('No filter with key "'+s);continue}if(r instanceof sap.m.ViewSettingsCustomItem){r.setProperty("selected",t[s],true)}else if(r instanceof sap.m.ViewSettingsFilterItem){var n=t[s];var o=r.getItems();var a=r.getMultiSelect();for(var l in n){var g=i(o,n,l);if(!g){_.warning('No filter with key "'+l);continue}if(!a){o.forEach(function(t){t.setProperty("selected",false,true)})}g.setProperty("selected",n[l],true)}}}return this};y.prototype._getDialog=function(){var t=this;if(this._dialog===undefined){this._dialog=new sap.m.Dialog(this.getId()+"-dialog",{ariaLabelledBy:this._sTitleLabelId,showHeader:false,stretch:h.system.phone,verticalScrolling:true,horizontalScrolling:false,contentWidth:this._sDialogWidth,contentHeight:this._sDialogHeight,content:this._getNavContainer(),beginButton:new sap.m.Button(this.getId()+"-acceptbutton",{text:this._rb.getText("VIEWSETTINGS_ACCEPT"),type:sap.m.ButtonType.Emphasized}).attachPress(this._onConfirm,this),endButton:new sap.m.Button(this.getId()+"-cancelbutton",{text:this._rb.getText("VIEWSETTINGS_CANCEL")}).attachPress(this._onCancel,this)}).addStyleClass("sapMVSD");this.addDependent(this._dialog);var e=this._dialog.onsapescape;this._dialog.onsapescape=function(i){if(e){e.call(t._dialog,i)}t._onCancel()};this._dialog.onsapentermodifiers=function(e){if(e.shiftKey&&!e.ctrlKey&&!e.altKey){t._pressBackButton()}}}return this._dialog};y.prototype._getNavContainer=function(){if(this._navContainer===undefined){this._navContainer=new sap.m.NavContainer(this.getId()+"-navcontainer",{pages:[]})}return this._navContainer};y.prototype._getTitleLabel=function(){if(this._titleLabel===undefined){this._titleLabel=new sap.m.Label(this._sTitleLabelId,{text:this._rb.getText("VIEWSETTINGS_TITLE")}).addStyleClass("sapMVSDTitle")}return this._titleLabel};y.prototype._getResetButton=function(){var t=this;if(this._resetButton===undefined){this._resetButton=new sap.m.Button(this.getId()+"-resetbutton",{icon:i.getIconURI("clear-filter"),press:function(){t._onClearFilters()},tooltip:this._rb.getText("VIEWSETTINGS_CLEAR_FILTER_TOOLTIP")})}return this._resetButton};y.prototype._getDetailTitleLabel=function(){if(this._detailTitleLabel===undefined){this._detailTitleLabel=new sap.m.Label(this.getId()+"-detailtitle",{text:this._rb.getText("VIEWSETTINGS_TITLE_FILTERBY")}).addStyleClass("sapMVSDTitle")}return this._detailTitleLabel};y.prototype._getHeader=function(){if(this._header===undefined){this._header=new sap.m.Bar({contentMiddle:[this._getTitleLabel()]}).addStyleClass("sapMVSDBar")}return this._header};y.prototype._getSubHeader=function(){if(this._subHeader===undefined){this._subHeader=new sap.m.Bar({contentLeft:[this._getSegmentedButton()]}).addStyleClass("sapMVSDBar")}return this._subHeader};y.prototype._getSegmentedButton=function(){var t=this,e=this.getCustomTabs(),i=e.length,s=0;if(this._segmentedButton===undefined){this._segmentedButton=new sap.m.SegmentedButton({select:function(r){var n=r.getParameter("id");if(n===t.getId()+"-sortbutton"){t._switchToPage(0)}else if(n===t.getId()+"-groupbutton"){t._switchToPage(1)}else if(n===t.getId()+"-filterbutton"){t._switchToPage(2)}else{for(s=0;s<i;s++){var o=e[s],a=t.getId()+t._sCustomTabsButtonsIdPrefix+o.getId();if(!t._isEmptyTab(o)&&n===a){t._switchToPage(o.getId());break}}}_.info("press event segmented: "+r.getParameter("id"))}}).addStyleClass("sapMVSDSeg");this._segmentedButton._bPreventWidthRecalculationOnAfterRendering=true}return this._segmentedButton};y.prototype._getSortButton=function(){if(this._sortButton===undefined){this._sortButton=new sap.m.Button(this.getId()+"-sortbutton",{icon:i.getIconURI("sort"),tooltip:this._rb.getText("VIEWSETTINGS_TITLE_SORT")})}return this._sortButton};y.prototype._getGroupButton=function(){if(this._groupButton===undefined){this._groupButton=new sap.m.Button(this.getId()+"-groupbutton",{icon:i.getIconURI("group-2"),tooltip:this._rb.getText("VIEWSETTINGS_TITLE_GROUP")})}return this._groupButton};y.prototype._getFilterButton=function(){if(this._filterButton===undefined){this._filterButton=new sap.m.Button(this.getId()+"-filterbutton",{icon:i.getIconURI("filter"),tooltip:this._rb.getText("VIEWSETTINGS_TITLE_FILTER")})}return this._filterButton};y.prototype._getPage1=function(t){if(this._page1===undefined&&!t){this._page1=new sap.m.Page(this.getId()+"-page1",{title:this._rb.getText("VIEWSETTINGS_TITLE"),customHeader:this._getHeader()});this._getNavContainer().addPage(this._page1)}return this._page1};y.prototype._getPage2=function(){var t=this,e,s,r;if(this._page2===undefined){s=new sap.m.Button(this.getId()+"-backbutton",{icon:i.getIconURI("nav-back"),press:[this._pressBackButton,this]});r=new sap.m.Button(this.getId()+"-detailresetbutton",{icon:i.getIconURI("clear-filter"),press:function(){t._onClearFilters()},tooltip:this._rb.getText("VIEWSETTINGS_CLEAR_FILTER_TOOLTIP")});e=new sap.m.Bar({contentLeft:[s],contentMiddle:[this._getDetailTitleLabel()],contentRight:[r]}).addStyleClass("sapMVSDBar");this._page2=new sap.m.Page(this.getId()+"-page2",{title:this._rb.getText("VIEWSETTINGS_TITLE_FILTERBY"),customHeader:e});this._getNavContainer().addPage(this._page2)}return this._page2};y.prototype._initFilterDetailItems=function(t){var e;var i=t.getMultiSelect();var r=t.getItems();var n=this;if(this._filterDetailList){this._filterDetailList.destroy()}this._getPage2().removeAllAggregation("content");this._filterDetailList=new o({mode:i?c.MultiSelect:c.SingleSelectLeft,includeItemInSelection:true,selectionChange:function(e){var s,r=e.getParameter("listItems"),o,a=0,l;n._clearPresetFilter();if(i){this._updateSelectAllCheckBoxState()}if(r.length>1&&i){o=t.getItems();for(;a<o.length;a++){for(var g=0;g<r.length;g++){if(o[a].getKey()===r[g].getCustomData()[0].getValue().getKey()){o[a].setProperty("selected",r[g].getSelected(),true)}}}}else{s=e.getParameter("listItem").data("item");if(!t.getMultiSelect()){o=t.getItems();for(;a<o.length;a++){if(o[a].getId()!==s.getId()){o[a].setProperty("selected",false,true)}}}l=e.getParameter("listItem").getSelected();if(s.getProperty("selected")!==l){s.setProperty("selected",l,true)}}}.bind(this)});for(var g=0;g<r.length;g++){e=new a({title:l.escapeSettingsValue(r[g].getText()),type:m.Active,selected:r[g].getSelected(),tooltip:r[g].getTooltip()}).data("item",r[g]);this._filterDetailList.addItem(e)}this._filterSearchField=this._getFilterSearchField(this._filterDetailList);this._getPage2().addContent(this._filterSearchField.addStyleClass("sapMVSDFilterSearchField"));this._getPage2().getCustomHeader().addStyleClass("sapMVSDBarWithSearch");if(i){this._selectAllCheckBox=this._createSelectAllCheckbox(r,this._filterDetailList);this._filterDetailList.setHeaderToolbar(new s({content:[this._selectAllCheckBox]}).addStyleClass("sapMVSDFilterHeaderToolbar"))}this._getPage2().addContent(this._filterDetailList)};y.prototype._initSortContent=function(){var t=this,e=this._rb.getText("VIEWSETTINGS_SORT_BY");if(this._sortContent){return}this._vContentPage=-1;this._ariaSortOrderInvisibleText=new u(this.getId()+"-sortOrderLabel",{text:this._rb.getText("VIEWSETTINGS_SORT_DIRECTION").concat(":")});this._sortOrderList=new o(this.getId()+"-sortorderlist",{mode:c.SingleSelectLeft,includeItemInSelection:true,selectionChange:function(e){t.setProperty("sortDescending",e.getParameter("listItem").data("item"),true)},ariaLabelledBy:this._ariaSortOrderInvisibleText});this._sortOrderList.addItem(new p({title:e}));this._sortOrderList.addItem(new a({title:this._rb.getText("VIEWSETTINGS_ASCENDING_ITEM")}).data("item",false).setSelected(true));this._sortOrderList.addItem(new a({title:this._rb.getText("VIEWSETTINGS_DESCENDING_ITEM")}).data("item",true));this._ariaSortListInvisibleText=new u(this.getId()+"-sortListLabel",{text:this._rb.getText("VIEWSETTINGS_TITLE_SORT").concat(":")});this._sortList.addAriaLabelledBy(this._ariaSortListInvisibleText);this._sortContent=[this._ariaSortOrderInvisibleText,this._sortOrderList,this._ariaSortListInvisibleText,this._sortList]};y.prototype._initGroupItems=function(){var t,e,i=this.getGroupItems(),s=this._rb.getText("VIEWSETTINGS_GROUP_OBJECT");this._groupList.destroyItems();if(!!i.length){this._groupList.addItem(new p({title:s}));i.forEach(function(e){t=new a({id:e.getId()+S,title:l.escapeSettingsValue(e.getText()),type:m.Active,selected:e.getSelected(),tooltip:e.getTooltip()}).data("item",e);this._groupList.addItem(t)},this);if(!this._oGroupingNoneItem||this._oGroupingNoneItem.bIsDestroyed){e=!!this.getSelectedGroupItem();this._oGroupingNoneItem=new sap.m.ViewSettingsItem({text:this._rb.getText("VIEWSETTINGS_NONE_ITEM"),selected:!e,itemPropertyChanged:function(){this._initGroupContent();this._initGroupItems()}.bind(this)});!e&&this.setAssociation("selectedGroupItem",this._oGroupingNoneItem,true)}t=new a({id:this._oGroupingNoneItem.getId()+S,title:this._oGroupingNoneItem.getText(),type:m.Active,selected:this._oGroupingNoneItem.getSelected()}).data("item",this._oGroupingNoneItem);this._groupList.addItem(t)}};y.prototype._initGroupContent=function(){var t=this,e=this._rb.getText("VIEWSETTINGS_GROUP_BY");if(this._groupContent){return}this._vContentPage=-1;this._ariaGroupOrderInvisibleText=new u(this.getId()+"-groupOrderLabel",{text:this._rb.getText("VIEWSETTINGS_GROUP_DIRECTION").concat(":")});this._groupOrderList=new o(this.getId()+"-grouporderlist",{mode:c.SingleSelectLeft,includeItemInSelection:true,selectionChange:function(e){t.setProperty("groupDescending",e.getParameter("listItem").data("item"),true)},ariaLabelledBy:this._ariaGroupOrderInvisibleText});this._groupOrderList.addItem(new p({title:e}));this._groupOrderList.addItem(new a({title:this._rb.getText("VIEWSETTINGS_ASCENDING_ITEM")}).data("item",false).setSelected(true));this._groupOrderList.addItem(new a({title:this._rb.getText("VIEWSETTINGS_DESCENDING_ITEM")}).data("item",true));this._ariaGroupListInvisibleText=new u(this.getId()+"-groupListLabel",{text:this._rb.getText("VIEWSETTINGS_TITLE_GROUP").concat(":")});this._groupList=new o(this.getId()+"-grouplist",{mode:c.SingleSelectLeft,includeItemInSelection:true,selectionChange:function(e){var i=e.getParameter("listItem").data("item");t.setSelectedGroupItem(i)},ariaLabelledBy:this._ariaGroupListInvisibleText});this._groupContent=[this._ariaGroupOrderInvisibleText,this._groupOrderList,this._ariaGroupListInvisibleText,this._groupList]};y.prototype._initFilterItems=function(){var t,e,i,s=this,r=this._rb.getText("VIEWSETTINGS_FILTER_BY");this._presetFilterList.destroyItems();t=this.getPresetFilterItems();if(t.length){t.forEach(function(t){i=new a({id:t.getId()+S,title:l.escapeSettingsValue(t.getText()),type:m.Active,selected:t.getSelected(),tooltip:t.getTooltip()}).data("item",t);this._presetFilterList.addItem(i)},this)}if(t.length){i=new a({id:this._presetFilterList.getId()+"-none"+S,title:this._rb.getText("VIEWSETTINGS_NONE_ITEM"),selected:!!this.getSelectedPresetFilterItem()});this._presetFilterList.addItem(i)}this._filterList.destroyItems();e=this.getFilterItems();this._filterList.addItem(new p({title:r}));if(e.length){e.forEach(function(t){i=new a({id:t.getId()+S,title:l.escapeSettingsValue(t.getText()),type:m.Active,tooltip:t.getTooltip(),press:function(t){return function(e){if(s._navContainer.getCurrentPage().getId()!==s.getId()+"-page2"){s._switchToPage(3,t);s._prevSelectedFilterItem=this;setTimeout(s._navContainer["to"].bind(s._navContainer,s.getId()+"-page2","slide"),0)}if(h.system.desktop&&s._filterDetailList&&s._filterDetailList.getItems()[0]){s._getNavContainer().attachEventOnce("afterNavigate",function(){s._filterDetailList.getItems()[0].focus()})}}}(t)}).data("item",t);this._filterList.addItem(i)},this)}};y.prototype._initFilterContent=function(){var t=this;if(this._filterContent){return}this._vContentPage=-1;this._presetFilterList=new o(this.getId()+"-predefinedfilterlist",{mode:c.SingleSelectLeft,includeItemInSelection:true,selectionChange:function(e){var i=e.getParameter("listItem").data("item");if(i){i.setProperty("selected",e.getParameter("listItem").getSelected(),true)}t.setAssociation("selectedPresetFilterItem",i,true);t._clearSelectedFilters()}});this._filterList=new o(this.getId()+"-filterlist",{});this._filterContent=[this._presetFilterList,this._filterList]};y.prototype._initDialogContent=function(t){var e=!!this.getSortItems().length,i=!!this.getGroupItems().length,s=!!this.getPresetFilterItems().length,r=!!this.getFilterItems().length;if(e){this._initSortContent()}if(i){this._initGroupContent();this._initGroupItems()}if(s||r){this._initFilterContent();this._initFilterItems()}this._updateDialogState(t);this._updateListSelections()};y.prototype._getTabButton=function(t,e){var i=e+t.getId(),s=sap.ui.getCore().byId(i);if(s){return s}else{return new sap.m.Button({id:i,icon:t.getIcon(),tooltip:t.getTooltip()})}};y.prototype._updateDialogState=function(t){var e=!!this.getSortItems().length,i=!!this.getGroupItems().length,s=!!this.getPresetFilterItems().length,r=!!this.getFilterItems().length,n=!!this.getCustomTabs().length,o=this._getSegmentedButton(),a=null,l=false,g={sort:0,group:1,filter:2};o.removeAllButtons();if(this._filterContent){this._presetFilterList.setVisible(true);this._filterList.setVisible(true)}if(e){o.addButton(this._getSortButton())}if(s||r){o.addButton(this._getFilterButton());if(!s){this._presetFilterList.setVisible(false)}if(!r){this._filterList.setVisible(false)}}if(i){o.addButton(this._getGroupButton())}if(n){this.getCustomTabs().forEach(function(t){if(!this._isEmptyTab(t)){var e=this.getId()+this._sCustomTabsButtonsIdPrefix,i=this._getTabButton(t,e);o.addButton(i)}}.bind(this))}this._showSubHeader=this._hasSubHeader();if(t===undefined&&this._vContentPage!==-1){t=this._vContentPage;switch(t){case 0:t="sort";break;case 1:t="group";break;case 2:t="filter";break}}if(t===this._vContentPage&&this._vContentPage===3){this._vContentPage=-1;this._switchToPage(3,this._oContentItem)}else{t=this._determineValidPageId(t);for(var h in g){if(t===h){l=true;a=this.getId()+"-"+t+"button";t=g[h];break}}if(!l){a=this.getId()+this._sCustomTabsButtonsIdPrefix+t}this._getSegmentedButton().setSelectedButton(a);this._switchToPage(t);if(this._getNavContainer().getCurrentPage()!==this._getPage1()){this._getNavContainer().to(this._getPage1().getId())}}};y.prototype._determineValidPageId=function(t){var e="sort",i=false,s=[];s=this._fetchValidPagesIds();if(s.length){e=s[0]}else{_.warning("No available pages to load - missing items.")}if(!t){t=e}else{s.filter(function(e){if(e===t){i=true;return false}return true});if(!i){t=e}}return t};y.prototype._fetchValidPagesIds=function(){var t,e=this.getCustomTabs(),i=e.length,s=[];var r=["sort","filter","group"];r.forEach(function(t){if(this._isValidPredefinedPageId(t)){s.push(t)}},this);for(t=0;t<i;t++){var n=e[t];if(!this._isEmptyTab(n)){s.push(n.getId())}}return s};y.prototype._isEmptyTab=function(t){return!(t.getContent().length||this._vContentPage===t.getId()&&this._getPage1().getContent().length)};y.prototype._isValidPredefinedPageId=function(t){if(!t){_.warning("Missing mandatory parameter.");return false}var e=false;switch(t){case"sort":e=!!this.getSortItems().length;break;case"filter":e=!!this.getFilterItems().length||!!this.getPresetFilterItems().length;break;case"group":e=!!this.getGroupItems().length;break}return e};y.prototype._pressBackButton=function(){var t=this;if(this._vContentPage===3){this._updateFilterCounters();this._getNavContainer().attachEvent("afterNavigate",function(){if(t._prevSelectedFilterItem){t._prevSelectedFilterItem.focus()}});setTimeout(this._getNavContainer()["back"].bind(this._getNavContainer()),0);this._switchToPage(2);this._segmentedButton.setSelectedButton(this._filterButton)}};y.prototype.setModel=function(t,e){if(this._vContentPage===3&&this._oContentItem){T.call(this)}return l.prototype.setModel.call(this,t,e)};y.prototype.removeFilterItem=function(t){var e="";if(this._vContentPage===3&&this._oContentItem){if(typeof t==="object"){e=t.getId()}else if(typeof t==="string"){e=t}else if(typeof t==="number"){e=this.getFilterItems()[t].getId()}if(this._oContentItem.getId()===e){T.call(this)}}return this.removeAggregation("filterItems",t)};y.prototype.removeAllFilterItems=function(){if(this._vContentPage===3&&this._oContentItem){T.call(this)}return this.removeAllAggregation("filterItems")};y.prototype.setFilterSearchCallback=function(t){this._fnFilterSearchCallback=t;return this};y.prototype._switchToPage=function(t,e){var i=0,s=this._getTitleLabel(),r=this._getResetButton(),n=this._getHeader(),o=this._getSubHeader();if(this._vContentPage===t&&t!==3){if(n.getContentRight().length===0&&o.getContentRight().length===0){this._addResetButtonToPage1()}return false}this._getPage2().getCustomHeader().removeStyleClass("sapMVSDBarWithSearch");if(P.call(this)){L.call(this)}n.removeAllContentRight();o.removeAllContentRight();this._vContentPage=t;this._oContentItem=e;if(t!==3){this._getPage1().removeAllAggregation("content",true);this._addResetButtonToPage1()}else if(t===3){this._getPage2().removeAllAggregation("content",true)}if(this.getTitle()){s.setText(this.getTitle())}else{s.setText(this._rb.getText("VIEWSETTINGS_TITLE"))}switch(t){case 1:r.setVisible(false);if(!this._showSubHeader&&!this.getTitle()){s.setText(this._rb.getText("VIEWSETTINGS_TITLE_GROUP"))}for(;i<this._groupContent.length;i++){this._getPage1().addContent(this._groupContent[i])}break;case 2:r.setVisible(!!this.getFilterItems().length);if(!this._showSubHeader&&!this.getTitle()){s.setText(this._rb.getText("VIEWSETTINGS_TITLE_FILTER"))}this._updateListSelection(this._presetFilterList,sap.ui.getCore().byId(this.getSelectedPresetFilterItem()));this._updateFilterCounters();for(;i<this._filterContent.length;i++){this._getPage1().addContent(this._filterContent[i])}break;case 3:this._setFilterDetailTitle(e);if(e instanceof sap.m.ViewSettingsCustomItem&&e.getCustomControl()){this._clearPresetFilter();this._getPage2().addContent(e.getCustomControl())}else if(e instanceof sap.m.ViewSettingsFilterItem&&e.getItems()){this._initFilterDetailItems(e)}break;case 0:r.setVisible(false);if(!this._getPage1().getSubHeader()&&!this.getTitle()){s.setText(this._rb.getText("VIEWSETTINGS_TITLE_SORT"))}if(this._sortContent){for(;i<this._sortContent.length;i++){this._getPage1().addContent(this._sortContent[i])}}break;default:r.setVisible(false);this._getPage1().removeAllAggregation("content",true);var a="VIEWSETTINGS_TITLE";var l=this.getCustomTabs();if(l.length<2){a=l[0].getTitle()}if(!this._getPage1().getSubHeader()&&!this.getTitle()){s.setText(a)}l.forEach(function(e){if(e.getId()===t){e.getContent().forEach(function(t){this._getPage1().addContent(t)},this)}},this);break}if(t===3){this.fireFilterDetailPageOpened({parentFilterItem:e})}};y.prototype._createSelectAllCheckbox=function(t,e){var i=false;if(t&&t.length!==0){i=t.every(function(t){return t.getSelected()})}var s=new r({text:this._rb.getText("COLUMNSPANEL_SELECT_ALL"),selected:i,select:function(t){var i=t.getParameter("selected");e.getItems().filter(function(t){return t.getVisible()}).forEach(function(t){var e=t.data("item");e.setSelected(i)})}});return s};y.prototype._updateSelectAllCheckBoxState=function(){var t=false,e=this._filterDetailList.getItems(),i=[];if(!this._selectAllCheckBox){return}if(e&&e.length!==0){i=e.filter(function(t){return t.getVisible()})}if(i.length!==0){t=i.every(function(t){return t.getSelected()})}this._selectAllCheckBox.setSelected(t)};y.prototype._getFilterSearchField=function(t){var e=this,i=new n({liveChange:function(i){var s=i.getParameter("newValue"),r=e._getStringFilter();t.getItems().forEach(function(t){var e=r(s,t.getTitle());t.setVisible(e)});e._updateSelectAllCheckBoxState()}});return i};y.prototype._getStringFilter=function(){if(this._fnFilterSearchCallback){return this._fnFilterSearchCallback}if(!this._oStringFilter||this._oStringFilter.sOperator!==this.getFilterSearchOperator()){this._oStringFilter=new F(this.getFilterSearchOperator())}return this._oStringFilter.filter.bind(this._oStringFilter)};y.prototype._updateListSelections=function(){this._updateListSelection(this._sortList,sap.ui.getCore().byId(this.getSelectedSortItem()));this._updateListSelection(this._sortOrderList,this.getSortDescending());this._updateListSelection(this._groupList,sap.ui.getCore().byId(this.getSelectedGroupItem()));this._updateListSelection(this._groupOrderList,this.getGroupDescending());this._updateListSelection(this._presetFilterList,sap.ui.getCore().byId(this.getSelectedPresetFilterItem()));this._updateFilterCounters()};y.prototype._updateListSelection=function(t,e){var i,s=0,r;if(!t){return false}i=t.getItems();t.removeSelections();for(;s<i.length;s++){r=i[s].isA("sap.m.GroupHeaderListItem");if(!r&&(i[s].data("item")===e||i[s].data("item")===null)){t.setSelectedItem(i[s],e&&e.getSelected?e.getSelected():true);return true}}return false};y.prototype._updateFilterCounters=function(){var t=this._filterList?this._filterList.getItems():[],e,i,s=0,r=0,n;for(;r<t.length;r++){e=t[r].data("item");s=0;if(e){if(e instanceof sap.m.ViewSettingsCustomItem){s=e.getFilterCount()}else if(e instanceof sap.m.ViewSettingsFilterItem){s=0;i=e.getItems();for(n=0;n<i.length;n++){if(i[n].getSelected()){s++}}}}t[r].setCounter(s)}};y.prototype._clearSelectedFilters=function(){var t=this.getFilterItems(),e,i=0,s;for(;i<t.length;i++){if(t[i]instanceof sap.m.ViewSettingsFilterItem){e=t[i].getItems();for(s=0;s<e.length;s++){e[s].setProperty("selected",false,true)}}t[i].setProperty("selected",false,true)}if(this._vContentPage===2&&this._getDialog().isOpen()){this._updateFilterCounters()}};y.prototype._clearPresetFilter=function(){if(this.getSelectedPresetFilterItem()){this.setSelectedPresetFilterItem(null)}};y.prototype._calculateNumberOfPages=function(){var t=0,e=!!this.getSortItems().length,i=!!this.getGroupItems().length,s=!!this.getPresetFilterItems().length,r=!!this.getFilterItems().length;if(e){t++}if(s||r){t++}if(i){t++}this.getCustomTabs().forEach(function(e){if(!this._isEmptyTab(e)){t++}},this);return t};y.prototype._hasSubHeader=function(){return!(this._calculateNumberOfPages()<2)};function T(){this._vContentPage=2;this._oContentItem=null;this._navContainer.to(this._getPage1().getId(),"show")}function C(t,e){var i,s;for(i=0;i<t.length;i++){if(t[i].getKey()===e){s=t[i];break}}return s}function b(t,e,i){var s;if(typeof t==="string"){s=C(e,t);if(!s){_.error(i)}}else{s=t}return s}function v(t){return t&&t instanceof sap.m.ViewSettingsItem}y.prototype._onConfirm=function(t){var e=this._getDialog(),i=this,s=function(){var t,e,r=i.getSelectedGroupItem();if(!i._oGroupingNoneItem||r!=i._oGroupingNoneItem.getId()){e=sap.ui.getCore().byId(r)}t={sortItem:sap.ui.getCore().byId(i.getSelectedSortItem()),sortDescending:i.getSortDescending(),groupItem:e,groupDescending:i.getGroupDescending(),presetFilterItem:sap.ui.getCore().byId(i.getSelectedPresetFilterItem()),filterItems:i.getSelectedFilterItems(),filterKeys:i.getSelectedFilterKeys(),filterCompoundKeys:i.getSelectedFilterCompoundKeys(),filterString:i.getSelectedFilterString()};i._dialog.detachAfterClose(s);i.fireConfirm(t)};e.attachAfterClose(s);e.close()};y.prototype._onCancel=function(t){var e=this,i=this._getDialog(),s=function(){e.setSelectedSortItem(e._oPreviousState.sortItem);e.setSortDescending(e._oPreviousState.sortDescending);e.setSelectedGroupItem(e._oPreviousState.groupItem);e.setGroupDescending(e._oPreviousState.groupDescending);e.setSelectedPresetFilterItem(e._oPreviousState.presetFilterItem);e._clearSelectedFilters();e.setSelectedFilterCompoundKeys(e._oPreviousState.filterCompoundKeys);if(e._navContainer.getCurrentPage()!==e._oPreviousState.navPage){setTimeout(e._navContainer["to"].bind(e._navContainer,e._oPreviousState.navPage.getId(),"show"),0)}e._switchToPage(e._oPreviousState.contentPage,e._oPreviousState.contentItem);e._dialog.detachAfterClose(s);e.fireCancel()};i.attachAfterClose(s);i.close()};y.prototype._onClearFilters=function(){this._clearSelectedFilters();this._clearPresetFilter();this.fireResetFilters();this._updateFilterCounters();if(this._vContentPage===3){setTimeout(this._getNavContainer()["to"].bind(this._getNavContainer(),this._getPage1().getId()),0);this._switchToPage(2);this._getSegmentedButton().setSelectedButton(this._getFilterButton())}this._updateListSelection(this._presetFilterList,sap.ui.getCore().byId(this.getSelectedPresetFilterItem()))};y.prototype._addResetButtonToPage1=function(){var t=this._getHeader(),e=this._getSubHeader(),i=this._getResetButton();if(this._showSubHeader){if(!this._getPage1().getSubHeader()){this._getPage1().setSubHeader(e)}e.addContentRight(i)}else{if(this._getPage1().getSubHeader()){this._getPage1().setSubHeader()}t.addContentRight(i)}};y.prototype._applyContextualSettings=function(){l.prototype._applyContextualSettings.call(this,l._defaultContextualSettings)};function L(t,e){if(!this._getPage1(true)){return}if(t==="customTabs"&&e){if(e.getMetadata().getName()===this.getMetadata().getManagedAggregation(t).type&&this._vContentPage===e.getId()){var i=this._getPage1().getContent();i.forEach(function(t){e.addAggregation("content",t,true)})}}else if(!t&&!e){var i=this._getPage1().getContent();this.getCustomTabs().forEach(function(t){if(this._vContentPage===t.getId()){i.forEach(function(e){t.addAggregation("content",e,true)})}},this)}}function P(){var t=[-1,0,1,2,3];return this._getPage1().getContent().length&&t.indexOf(this._vContentPage)===-1}y.prototype.setBusy=function(t){this._getDialog().setBusy(t);return this};var F=function(t){this.sOperator=t||I.StartsWith;switch(this.sOperator){case I.Equals:this.fnOperator=E;break;case I.Contains:this.fnOperator=w;break;case I.StartsWith:this.fnOperator=B;break;case I.AnyWordStartsWith:this.fnOperator=x;break;default:_.warning("Unknown string compare operator. Use values from sap.m.StringFilterOperator. Default operator should be used.");this.fnOperator=w;break}};F.prototype.filter=function(t,e){if(!t){return true}if(!e){return false}e=e.toLowerCase();t=t.toLowerCase();return this.fnOperator(t,e)};function E(t,e){return e===t}function w(t,e){return e.indexOf(t)>-1}function B(t,e){return e.indexOf(t)===0}function x(t,e){var i=new RegExp(".*\\b"+t+".*");return i.test(e)}return y});