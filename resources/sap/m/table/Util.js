/*!
 * OpenUI5
 * (c) Copyright 2009-2021 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/m/library","sap/ui/core/Core","sap/ui/core/theming/Parameters"],function(t,e,a){"use strict";var r={};var n="";var i=parseFloat(t.BaseFontSize);r.measureText=function(){var t=.05;var r=document.createElement("canvas").getContext("2d");var o=function(){n=[parseFloat(a.get({name:"sapMFontMediumSize"})||"0.875rem")*i+"px",a.get({name:"sapUiFontFamily"})||"Arial"].join(" ");return n};e.attachThemeChanged(o);return function(e,a){r.font=a||n||o();return r.measureText(e||"").width/i+t}}();r.calcTypeWidth=function(){var t=0;var a=[2023,9,26,22,47,58,999];var n=new Date(Date.UTC.apply(0,a));var i=new(Function.prototype.bind.apply(Date,[null].concat(a)));var o={Byte:3,SByte:3,Int16:5,Int32:9,Int64:12,Single:6,Float:12,Double:13,Decimal:15};e.attachThemeChanged(function(){t=0});return function(a,u){var m=a.getMetadata().getName().split(".").pop();if(m=="Boolean"){if(!t){var s=e.getLibraryResourceBundle("sap.ui.core");var l=r.measureText(s.getText("YES"));var h=r.measureText(s.getText("NO"));t=Math.max(l,h)}return t}if(m=="String"||a.isA("sap.ui.model.odata.type.String")){var c=u&&u.maxWidth||19;var f=a.getConstraints().maxLength||0;if(!f){return Math.max(Math.min(10,c),c*.75)}if(f*.25>c){return c}var v=r.measureText("A".repeat(f));if(f<c||c<10){return Math.min(v,c)}var g=Math.log(v-c*.16)/Math.log(c/3)*(c/2)*Math.pow(c/19,1/v);return Math.min(g,v,c)}if(m.startsWith("Date")||m.startsWith("Time")){var p=a.getFormatOptions().UTC?n:i;var d=p.toLocaleDateString();if(m=="TimeOfDay"){d=new Intl.DateTimeFormat("de",{hour:"numeric",minute:"numeric",second:"numeric"}).format(p);d=a.formatValue(d,"string")}else if(a.isA("sap.ui.model.odata.type.Time")){d=a.formatValue({__edmType:"Edm.Time",ms:n.valueOf()},"string")}else{d=a.formatValue(p,"string")}return r.measureText(d)}if(o[m]){var T=a.getConstraints().scale||0;var M=a.getConstraints().precision||20;M=Math.min(M,o[m]);var x=2*Math.pow(10,M-T-1);x=a.formatValue(x,"string");return r.measureText(x)}return u&&u.defaultWidth||8}}();r.calcHeaderWidth=function(){var t="";var i=function(){if(!t){t=[a.get({name:"sapUiColumnHeaderFontWeight"})||"normal",n].join(" ")}return t};e.attachThemeChanged(function(){t=""});return function(t,e,a,n){var o=t.length;a=a||19;n=n||2;if(e>a){return a}if(n>o){return n}e=Math.max(e,n);if(e>o){return e}var u=r.measureText(t,i());u=Math.min(u,a*.7);var m=Math.max(1,1-Math.log(Math.max(e-1.7,.2))/Math.log(a*.5)+1);var s=m*e;var l=Math.max(0,u-s);var h=l<.15?u:s+l*(1-1/e)/Math.E;return h}}();return r},false);